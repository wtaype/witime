(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function b_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ca={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var w_=Ca.exports,ph;function T_(){return ph||(ph=1,function(n){(function(e,t){n.exports=e.document?t(e,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return t(r)}})(typeof window<"u"?window:w_,function(e,t){var r=[],i=Object.getPrototypeOf,s=r.slice,o=r.flat?function(a){return r.flat.call(a)}:function(a){return r.concat.apply([],a)},l=r.push,u=r.indexOf,h={},g=h.toString,b=h.hasOwnProperty,w=b.toString,A=w.call(Object),C={},P=function(d){return typeof d=="function"&&typeof d.nodeType!="number"&&typeof d.item!="function"},O=function(d){return d!=null&&d===d.window},U=e.document,X={type:!0,src:!0,nonce:!0,noModule:!0};function te(a,d,p){p=p||U;var v,_,E=p.createElement("script");if(E.text=a,d)for(v in X)_=d[v]||d.getAttribute&&d.getAttribute(v),_&&E.setAttribute(v,_);p.head.appendChild(E).parentNode.removeChild(E)}function ie(a){return a==null?a+"":typeof a=="object"||typeof a=="function"?h[g.call(a)]||"object":typeof a}var Se="3.7.1",de=/HTML$/i,f=function(a,d){return new f.fn.init(a,d)};f.fn=f.prototype={jquery:Se,constructor:f,length:0,toArray:function(){return s.call(this)},get:function(a){return a==null?s.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var d=f.merge(this.constructor(),a);return d.prevObject=this,d},each:function(a){return f.each(this,a)},map:function(a){return this.pushStack(f.map(this,function(d,p){return a.call(d,p,d)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(f.grep(this,function(a,d){return(d+1)%2}))},odd:function(){return this.pushStack(f.grep(this,function(a,d){return d%2}))},eq:function(a){var d=this.length,p=+a+(a<0?d:0);return this.pushStack(p>=0&&p<d?[this[p]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:r.sort,splice:r.splice},f.extend=f.fn.extend=function(){var a,d,p,v,_,E,T=arguments[0]||{},N=1,D=arguments.length,F=!1;for(typeof T=="boolean"&&(F=T,T=arguments[N]||{},N++),typeof T!="object"&&!P(T)&&(T={}),N===D&&(T=this,N--);N<D;N++)if((a=arguments[N])!=null)for(d in a)v=a[d],!(d==="__proto__"||T===v)&&(F&&v&&(f.isPlainObject(v)||(_=Array.isArray(v)))?(p=T[d],_&&!Array.isArray(p)?E=[]:!_&&!f.isPlainObject(p)?E={}:E=p,_=!1,T[d]=f.extend(F,E,v)):v!==void 0&&(T[d]=v));return T},f.extend({expando:"jQuery"+(Se+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isPlainObject:function(a){var d,p;return!a||g.call(a)!=="[object Object]"?!1:(d=i(a),d?(p=b.call(d,"constructor")&&d.constructor,typeof p=="function"&&w.call(p)===A):!0)},isEmptyObject:function(a){var d;for(d in a)return!1;return!0},globalEval:function(a,d,p){te(a,{nonce:d&&d.nonce},p)},each:function(a,d){var p,v=0;if(R(a))for(p=a.length;v<p&&d.call(a[v],v,a[v])!==!1;v++);else for(v in a)if(d.call(a[v],v,a[v])===!1)break;return a},text:function(a){var d,p="",v=0,_=a.nodeType;if(!_)for(;d=a[v++];)p+=f.text(d);return _===1||_===11?a.textContent:_===9?a.documentElement.textContent:_===3||_===4?a.nodeValue:p},makeArray:function(a,d){var p=d||[];return a!=null&&(R(Object(a))?f.merge(p,typeof a=="string"?[a]:a):l.call(p,a)),p},inArray:function(a,d,p){return d==null?-1:u.call(d,a,p)},isXMLDoc:function(a){var d=a&&a.namespaceURI,p=a&&(a.ownerDocument||a).documentElement;return!de.test(d||p&&p.nodeName||"HTML")},merge:function(a,d){for(var p=+d.length,v=0,_=a.length;v<p;v++)a[_++]=d[v];return a.length=_,a},grep:function(a,d,p){for(var v,_=[],E=0,T=a.length,N=!p;E<T;E++)v=!d(a[E],E),v!==N&&_.push(a[E]);return _},map:function(a,d,p){var v,_,E=0,T=[];if(R(a))for(v=a.length;E<v;E++)_=d(a[E],E,p),_!=null&&T.push(_);else for(E in a)_=d(a[E],E,p),_!=null&&T.push(_);return o(T)},guid:1,support:C}),typeof Symbol=="function"&&(f.fn[Symbol.iterator]=r[Symbol.iterator]),f.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,d){h["[object "+d+"]"]=d.toLowerCase()});function R(a){var d=!!a&&"length"in a&&a.length,p=ie(a);return P(a)||O(a)?!1:p==="array"||d===0||typeof d=="number"&&d>0&&d-1 in a}function k(a,d){return a.nodeName&&a.nodeName.toLowerCase()===d.toLowerCase()}var L=r.pop,B=r.sort,j=r.splice,x="[\\x20\\t\\r\\n\\f]",It=new RegExp("^"+x+"+|((?:^|[^\\\\])(?:\\\\.)*)"+x+"+$","g");f.contains=function(a,d){var p=d&&d.parentNode;return a===p||!!(p&&p.nodeType===1&&(a.contains?a.contains(p):a.compareDocumentPosition&&a.compareDocumentPosition(p)&16))};var jr=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function ec(a,d){return d?a==="\0"?"ï¿½":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a}f.escapeSelector=function(a){return(a+"").replace(jr,ec)};var Ct=U,Nn=l;(function(){var a,d,p,v,_,E=Nn,T,N,D,F,Q,Y=f.expando,W=0,ee=0,me=Wn(),ke=Wn(),Ee=Wn(),rt=Wn(),Ze=function(I,V){return I===V&&(_=!0),0},Ht="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",jt="(?:\\\\[\\da-fA-F]{1,6}"+x+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ce="\\["+x+"*("+jt+")(?:"+x+"*([*^$|!~]?=)"+x+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+jt+"))|)"+x+"*\\]",et=":("+jt+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Ce+")*)|.*)\\)|)",Ne=new RegExp(x+"+","g"),Qe=new RegExp("^"+x+"*,"+x+"*"),Zt=new RegExp("^"+x+"*([>+~]|"+x+")"+x+"*"),c=new RegExp(x+"|>"),m=new RegExp(et),y=new RegExp("^"+jt+"$"),S={ID:new RegExp("^#("+jt+")"),CLASS:new RegExp("^\\.("+jt+")"),TAG:new RegExp("^("+jt+"|[*])"),ATTR:new RegExp("^"+Ce),PSEUDO:new RegExp("^"+et),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+x+"*(even|odd|(([+-]|)(\\d*)n|)"+x+"*(?:([+-]|)"+x+"*(\\d+)|))"+x+"*\\)|)","i"),bool:new RegExp("^(?:"+Ht+")$","i"),needsContext:new RegExp("^"+x+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+x+"*((?:-\\d)?\\d*)"+x+"*\\)|)(?=[^-]|$)","i")},H=/^(?:input|select|textarea|button)$/i,q=/^h\d$/i,ne=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ue=/[+~]/,ze=new RegExp("\\\\[\\da-fA-F]{1,6}"+x+"?|\\\\([^\\r\\n\\f])","g"),Ie=function(I,V){var z="0x"+I.slice(1)-65536;return V||(z<0?String.fromCharCode(z+65536):String.fromCharCode(z>>10|55296,z&1023|56320))},dt=function(){pr()},ht=da(function(I){return I.disabled===!0&&k(I,"fieldset")},{dir:"parentNode",next:"legend"});function fr(){try{return T.activeElement}catch{}}try{E.apply(r=s.call(Ct.childNodes),Ct.childNodes),r[Ct.childNodes.length].nodeType}catch{E={apply:function(V,z){Nn.apply(V,s.call(z))},call:function(V){Nn.apply(V,s.call(arguments,1))}}}function Re(I,V,z,$){var K,re,se,ue,oe,xe,be,we=V&&V.ownerDocument,Pe=V?V.nodeType:9;if(z=z||[],typeof I!="string"||!I||Pe!==1&&Pe!==9&&Pe!==11)return z;if(!$&&(pr(V),V=V||T,D)){if(Pe!==11&&(oe=ne.exec(I)))if(K=oe[1]){if(Pe===9)if(se=V.getElementById(K)){if(se.id===K)return E.call(z,se),z}else return z;else if(we&&(se=we.getElementById(K))&&Re.contains(V,se)&&se.id===K)return E.call(z,se),z}else{if(oe[2])return E.apply(z,V.getElementsByTagName(I)),z;if((K=oe[3])&&V.getElementsByClassName)return E.apply(z,V.getElementsByClassName(K)),z}if(!rt[I+" "]&&(!F||!F.test(I))){if(be=I,we=V,Pe===1&&(c.test(I)||Zt.test(I))){for(we=Ue.test(I)&&pc(V.parentNode)||V,(we!=V||!C.scope)&&((ue=V.getAttribute("id"))?ue=f.escapeSelector(ue):V.setAttribute("id",ue=Y)),xe=Ks(I),re=xe.length;re--;)xe[re]=(ue?"#"+ue:":scope")+" "+ua(xe[re]);be=xe.join(",")}try{return E.apply(z,we.querySelectorAll(be)),z}catch{rt(I,!0)}finally{ue===Y&&V.removeAttribute("id")}}}return fh(I.replace(It,"$1"),V,z,$)}function Wn(){var I=[];function V(z,$){return I.push(z+" ")>d.cacheLength&&delete V[I.shift()],V[z+" "]=$}return V}function xt(I){return I[Y]=!0,I}function $i(I){var V=T.createElement("fieldset");try{return!!I(V)}catch{return!1}finally{V.parentNode&&V.parentNode.removeChild(V),V=null}}function v_(I){return function(V){return k(V,"input")&&V.type===I}}function y_(I){return function(V){return(k(V,"input")||k(V,"button"))&&V.type===I}}function dh(I){return function(V){return"form"in V?V.parentNode&&V.disabled===!1?"label"in V?"label"in V.parentNode?V.parentNode.disabled===I:V.disabled===I:V.isDisabled===I||V.isDisabled!==!I&&ht(V)===I:V.disabled===I:"label"in V?V.disabled===I:!1}}function ti(I){return xt(function(V){return V=+V,xt(function(z,$){for(var K,re=I([],z.length,V),se=re.length;se--;)z[K=re[se]]&&(z[K]=!($[K]=z[K]))})})}function pc(I){return I&&typeof I.getElementsByTagName<"u"&&I}function pr(I){var V,z=I?I.ownerDocument||I:Ct;return z==T||z.nodeType!==9||!z.documentElement||(T=z,N=T.documentElement,D=!f.isXMLDoc(T),Q=N.matches||N.webkitMatchesSelector||N.msMatchesSelector,N.msMatchesSelector&&Ct!=T&&(V=T.defaultView)&&V.top!==V&&V.addEventListener("unload",dt),C.getById=$i(function($){return N.appendChild($).id=f.expando,!T.getElementsByName||!T.getElementsByName(f.expando).length}),C.disconnectedMatch=$i(function($){return Q.call($,"*")}),C.scope=$i(function(){return T.querySelectorAll(":scope")}),C.cssHas=$i(function(){try{return T.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),C.getById?(d.filter.ID=function($){var K=$.replace(ze,Ie);return function(re){return re.getAttribute("id")===K}},d.find.ID=function($,K){if(typeof K.getElementById<"u"&&D){var re=K.getElementById($);return re?[re]:[]}}):(d.filter.ID=function($){var K=$.replace(ze,Ie);return function(re){var se=typeof re.getAttributeNode<"u"&&re.getAttributeNode("id");return se&&se.value===K}},d.find.ID=function($,K){if(typeof K.getElementById<"u"&&D){var re,se,ue,oe=K.getElementById($);if(oe){if(re=oe.getAttributeNode("id"),re&&re.value===$)return[oe];for(ue=K.getElementsByName($),se=0;oe=ue[se++];)if(re=oe.getAttributeNode("id"),re&&re.value===$)return[oe]}return[]}}),d.find.TAG=function($,K){return typeof K.getElementsByTagName<"u"?K.getElementsByTagName($):K.querySelectorAll($)},d.find.CLASS=function($,K){if(typeof K.getElementsByClassName<"u"&&D)return K.getElementsByClassName($)},F=[],$i(function($){var K;N.appendChild($).innerHTML="<a id='"+Y+"' href='' disabled='disabled'></a><select id='"+Y+"-\r\\' disabled='disabled'><option selected=''></option></select>",$.querySelectorAll("[selected]").length||F.push("\\["+x+"*(?:value|"+Ht+")"),$.querySelectorAll("[id~="+Y+"-]").length||F.push("~="),$.querySelectorAll("a#"+Y+"+*").length||F.push(".#.+[+~]"),$.querySelectorAll(":checked").length||F.push(":checked"),K=T.createElement("input"),K.setAttribute("type","hidden"),$.appendChild(K).setAttribute("name","D"),N.appendChild($).disabled=!0,$.querySelectorAll(":disabled").length!==2&&F.push(":enabled",":disabled"),K=T.createElement("input"),K.setAttribute("name",""),$.appendChild(K),$.querySelectorAll("[name='']").length||F.push("\\["+x+"*name"+x+"*="+x+`*(?:''|"")`)}),C.cssHas||F.push(":has"),F=F.length&&new RegExp(F.join("|")),Ze=function($,K){if($===K)return _=!0,0;var re=!$.compareDocumentPosition-!K.compareDocumentPosition;return re||(re=($.ownerDocument||$)==(K.ownerDocument||K)?$.compareDocumentPosition(K):1,re&1||!C.sortDetached&&K.compareDocumentPosition($)===re?$===T||$.ownerDocument==Ct&&Re.contains(Ct,$)?-1:K===T||K.ownerDocument==Ct&&Re.contains(Ct,K)?1:v?u.call(v,$)-u.call(v,K):0:re&4?-1:1)}),T}Re.matches=function(I,V){return Re(I,null,null,V)},Re.matchesSelector=function(I,V){if(pr(I),D&&!rt[V+" "]&&(!F||!F.test(V)))try{var z=Q.call(I,V);if(z||C.disconnectedMatch||I.document&&I.document.nodeType!==11)return z}catch{rt(V,!0)}return Re(V,T,null,[I]).length>0},Re.contains=function(I,V){return(I.ownerDocument||I)!=T&&pr(I),f.contains(I,V)},Re.attr=function(I,V){(I.ownerDocument||I)!=T&&pr(I);var z=d.attrHandle[V.toLowerCase()],$=z&&b.call(d.attrHandle,V.toLowerCase())?z(I,V,!D):void 0;return $!==void 0?$:I.getAttribute(V)},Re.error=function(I){throw new Error("Syntax error, unrecognized expression: "+I)},f.uniqueSort=function(I){var V,z=[],$=0,K=0;if(_=!C.sortStable,v=!C.sortStable&&s.call(I,0),B.call(I,Ze),_){for(;V=I[K++];)V===I[K]&&($=z.push(K));for(;$--;)j.call(I,z[$],1)}return v=null,I},f.fn.uniqueSort=function(){return this.pushStack(f.uniqueSort(s.apply(this)))},d=f.expr={cacheLength:50,createPseudo:xt,match:S,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(I){return I[1]=I[1].replace(ze,Ie),I[3]=(I[3]||I[4]||I[5]||"").replace(ze,Ie),I[2]==="~="&&(I[3]=" "+I[3]+" "),I.slice(0,4)},CHILD:function(I){return I[1]=I[1].toLowerCase(),I[1].slice(0,3)==="nth"?(I[3]||Re.error(I[0]),I[4]=+(I[4]?I[5]+(I[6]||1):2*(I[3]==="even"||I[3]==="odd")),I[5]=+(I[7]+I[8]||I[3]==="odd")):I[3]&&Re.error(I[0]),I},PSEUDO:function(I){var V,z=!I[6]&&I[2];return S.CHILD.test(I[0])?null:(I[3]?I[2]=I[4]||I[5]||"":z&&m.test(z)&&(V=Ks(z,!0))&&(V=z.indexOf(")",z.length-V)-z.length)&&(I[0]=I[0].slice(0,V),I[2]=z.slice(0,V)),I.slice(0,3))}},filter:{TAG:function(I){var V=I.replace(ze,Ie).toLowerCase();return I==="*"?function(){return!0}:function(z){return k(z,V)}},CLASS:function(I){var V=me[I+" "];return V||(V=new RegExp("(^|"+x+")"+I+"("+x+"|$)"))&&me(I,function(z){return V.test(typeof z.className=="string"&&z.className||typeof z.getAttribute<"u"&&z.getAttribute("class")||"")})},ATTR:function(I,V,z){return function($){var K=Re.attr($,I);return K==null?V==="!=":V?(K+="",V==="="?K===z:V==="!="?K!==z:V==="^="?z&&K.indexOf(z)===0:V==="*="?z&&K.indexOf(z)>-1:V==="$="?z&&K.slice(-z.length)===z:V==="~="?(" "+K.replace(Ne," ")+" ").indexOf(z)>-1:V==="|="?K===z||K.slice(0,z.length+1)===z+"-":!1):!0}},CHILD:function(I,V,z,$,K){var re=I.slice(0,3)!=="nth",se=I.slice(-4)!=="last",ue=V==="of-type";return $===1&&K===0?function(oe){return!!oe.parentNode}:function(oe,xe,be){var we,Pe,fe,We,Vt,_t=re!==se?"nextSibling":"previousSibling",en=oe.parentNode,bn=ue&&oe.nodeName.toLowerCase(),Gi=!be&&!ue,Pt=!1;if(en){if(re){for(;_t;){for(fe=oe;fe=fe[_t];)if(ue?k(fe,bn):fe.nodeType===1)return!1;Vt=_t=I==="only"&&!Vt&&"nextSibling"}return!0}if(Vt=[se?en.firstChild:en.lastChild],se&&Gi){for(Pe=en[Y]||(en[Y]={}),we=Pe[I]||[],We=we[0]===W&&we[1],Pt=We&&we[2],fe=We&&en.childNodes[We];fe=++We&&fe&&fe[_t]||(Pt=We=0)||Vt.pop();)if(fe.nodeType===1&&++Pt&&fe===oe){Pe[I]=[W,We,Pt];break}}else if(Gi&&(Pe=oe[Y]||(oe[Y]={}),we=Pe[I]||[],We=we[0]===W&&we[1],Pt=We),Pt===!1)for(;(fe=++We&&fe&&fe[_t]||(Pt=We=0)||Vt.pop())&&!((ue?k(fe,bn):fe.nodeType===1)&&++Pt&&(Gi&&(Pe=fe[Y]||(fe[Y]={}),Pe[I]=[W,Pt]),fe===oe)););return Pt-=K,Pt===$||Pt%$===0&&Pt/$>=0}}},PSEUDO:function(I,V){var z,$=d.pseudos[I]||d.setFilters[I.toLowerCase()]||Re.error("unsupported pseudo: "+I);return $[Y]?$(V):$.length>1?(z=[I,I,"",V],d.setFilters.hasOwnProperty(I.toLowerCase())?xt(function(K,re){for(var se,ue=$(K,V),oe=ue.length;oe--;)se=u.call(K,ue[oe]),K[se]=!(re[se]=ue[oe])}):function(K){return $(K,0,z)}):$}},pseudos:{not:xt(function(I){var V=[],z=[],$=yc(I.replace(It,"$1"));return $[Y]?xt(function(K,re,se,ue){for(var oe,xe=$(K,null,ue,[]),be=K.length;be--;)(oe=xe[be])&&(K[be]=!(re[be]=oe))}):function(K,re,se){return V[0]=K,$(V,null,se,z),V[0]=null,!z.pop()}}),has:xt(function(I){return function(V){return Re(I,V).length>0}}),contains:xt(function(I){return I=I.replace(ze,Ie),function(V){return(V.textContent||f.text(V)).indexOf(I)>-1}}),lang:xt(function(I){return y.test(I||"")||Re.error("unsupported lang: "+I),I=I.replace(ze,Ie).toLowerCase(),function(V){var z;do if(z=D?V.lang:V.getAttribute("xml:lang")||V.getAttribute("lang"))return z=z.toLowerCase(),z===I||z.indexOf(I+"-")===0;while((V=V.parentNode)&&V.nodeType===1);return!1}}),target:function(I){var V=e.location&&e.location.hash;return V&&V.slice(1)===I.id},root:function(I){return I===N},focus:function(I){return I===fr()&&T.hasFocus()&&!!(I.type||I.href||~I.tabIndex)},enabled:dh(!1),disabled:dh(!0),checked:function(I){return k(I,"input")&&!!I.checked||k(I,"option")&&!!I.selected},selected:function(I){return I.parentNode&&I.parentNode.selectedIndex,I.selected===!0},empty:function(I){for(I=I.firstChild;I;I=I.nextSibling)if(I.nodeType<6)return!1;return!0},parent:function(I){return!d.pseudos.empty(I)},header:function(I){return q.test(I.nodeName)},input:function(I){return H.test(I.nodeName)},button:function(I){return k(I,"input")&&I.type==="button"||k(I,"button")},text:function(I){var V;return k(I,"input")&&I.type==="text"&&((V=I.getAttribute("type"))==null||V.toLowerCase()==="text")},first:ti(function(){return[0]}),last:ti(function(I,V){return[V-1]}),eq:ti(function(I,V,z){return[z<0?z+V:z]}),even:ti(function(I,V){for(var z=0;z<V;z+=2)I.push(z);return I}),odd:ti(function(I,V){for(var z=1;z<V;z+=2)I.push(z);return I}),lt:ti(function(I,V,z){var $;for(z<0?$=z+V:z>V?$=V:$=z;--$>=0;)I.push($);return I}),gt:ti(function(I,V,z){for(var $=z<0?z+V:z;++$<V;)I.push($);return I})}},d.pseudos.nth=d.pseudos.eq;for(a in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[a]=v_(a);for(a in{submit:!0,reset:!0})d.pseudos[a]=y_(a);function hh(){}hh.prototype=d.filters=d.pseudos,d.setFilters=new hh;function Ks(I,V){var z,$,K,re,se,ue,oe,xe=ke[I+" "];if(xe)return V?0:xe.slice(0);for(se=I,ue=[],oe=d.preFilter;se;){(!z||($=Qe.exec(se)))&&($&&(se=se.slice($[0].length)||se),ue.push(K=[])),z=!1,($=Zt.exec(se))&&(z=$.shift(),K.push({value:z,type:$[0].replace(It," ")}),se=se.slice(z.length));for(re in d.filter)($=S[re].exec(se))&&(!oe[re]||($=oe[re]($)))&&(z=$.shift(),K.push({value:z,type:re,matches:$}),se=se.slice(z.length));if(!z)break}return V?se.length:se?Re.error(I):ke(I,ue).slice(0)}function ua(I){for(var V=0,z=I.length,$="";V<z;V++)$+=I[V].value;return $}function da(I,V,z){var $=V.dir,K=V.next,re=K||$,se=z&&re==="parentNode",ue=ee++;return V.first?function(oe,xe,be){for(;oe=oe[$];)if(oe.nodeType===1||se)return I(oe,xe,be);return!1}:function(oe,xe,be){var we,Pe,fe=[W,ue];if(be){for(;oe=oe[$];)if((oe.nodeType===1||se)&&I(oe,xe,be))return!0}else for(;oe=oe[$];)if(oe.nodeType===1||se)if(Pe=oe[Y]||(oe[Y]={}),K&&k(oe,K))oe=oe[$]||oe;else{if((we=Pe[re])&&we[0]===W&&we[1]===ue)return fe[2]=we[2];if(Pe[re]=fe,fe[2]=I(oe,xe,be))return!0}return!1}}function gc(I){return I.length>1?function(V,z,$){for(var K=I.length;K--;)if(!I[K](V,z,$))return!1;return!0}:I[0]}function __(I,V,z){for(var $=0,K=V.length;$<K;$++)Re(I,V[$],z);return z}function ha(I,V,z,$,K){for(var re,se=[],ue=0,oe=I.length,xe=V!=null;ue<oe;ue++)(re=I[ue])&&(!z||z(re,$,K))&&(se.push(re),xe&&V.push(ue));return se}function mc(I,V,z,$,K,re){return $&&!$[Y]&&($=mc($)),K&&!K[Y]&&(K=mc(K,re)),xt(function(se,ue,oe,xe){var be,we,Pe,fe,We=[],Vt=[],_t=ue.length,en=se||__(V||"*",oe.nodeType?[oe]:oe,[]),bn=I&&(se||!V)?ha(en,We,I,oe,xe):en;if(z?(fe=K||(se?I:_t||$)?[]:ue,z(bn,fe,oe,xe)):fe=bn,$)for(be=ha(fe,Vt),$(be,[],oe,xe),we=be.length;we--;)(Pe=be[we])&&(fe[Vt[we]]=!(bn[Vt[we]]=Pe));if(se){if(K||I){if(K){for(be=[],we=fe.length;we--;)(Pe=fe[we])&&be.push(bn[we]=Pe);K(null,fe=[],be,xe)}for(we=fe.length;we--;)(Pe=fe[we])&&(be=K?u.call(se,Pe):We[we])>-1&&(se[be]=!(ue[be]=Pe))}}else fe=ha(fe===ue?fe.splice(_t,fe.length):fe),K?K(null,ue,fe,xe):E.apply(ue,fe)})}function vc(I){for(var V,z,$,K=I.length,re=d.relative[I[0].type],se=re||d.relative[" "],ue=re?1:0,oe=da(function(we){return we===V},se,!0),xe=da(function(we){return u.call(V,we)>-1},se,!0),be=[function(we,Pe,fe){var We=!re&&(fe||Pe!=p)||((V=Pe).nodeType?oe(we,Pe,fe):xe(we,Pe,fe));return V=null,We}];ue<K;ue++)if(z=d.relative[I[ue].type])be=[da(gc(be),z)];else{if(z=d.filter[I[ue].type].apply(null,I[ue].matches),z[Y]){for($=++ue;$<K&&!d.relative[I[$].type];$++);return mc(ue>1&&gc(be),ue>1&&ua(I.slice(0,ue-1).concat({value:I[ue-2].type===" "?"*":""})).replace(It,"$1"),z,ue<$&&vc(I.slice(ue,$)),$<K&&vc(I=I.slice($)),$<K&&ua(I))}be.push(z)}return gc(be)}function E_(I,V){var z=V.length>0,$=I.length>0,K=function(re,se,ue,oe,xe){var be,we,Pe,fe=0,We="0",Vt=re&&[],_t=[],en=p,bn=re||$&&d.find.TAG("*",xe),Gi=W+=en==null?1:Math.random()||.1,Pt=bn.length;for(xe&&(p=se==T||se||xe);We!==Pt&&(be=bn[We])!=null;We++){if($&&be){for(we=0,!se&&be.ownerDocument!=T&&(pr(be),ue=!D);Pe=I[we++];)if(Pe(be,se||T,ue)){E.call(oe,be);break}xe&&(W=Gi)}z&&((be=!Pe&&be)&&fe--,re&&Vt.push(be))}if(fe+=We,z&&We!==fe){for(we=0;Pe=V[we++];)Pe(Vt,_t,se,ue);if(re){if(fe>0)for(;We--;)Vt[We]||_t[We]||(_t[We]=L.call(oe));_t=ha(_t)}E.apply(oe,_t),xe&&!re&&_t.length>0&&fe+V.length>1&&f.uniqueSort(oe)}return xe&&(W=Gi,p=en),Vt};return z?xt(K):K}function yc(I,V){var z,$=[],K=[],re=Ee[I+" "];if(!re){for(V||(V=Ks(I)),z=V.length;z--;)re=vc(V[z]),re[Y]?$.push(re):K.push(re);re=Ee(I,E_(K,$)),re.selector=I}return re}function fh(I,V,z,$){var K,re,se,ue,oe,xe=typeof I=="function"&&I,be=!$&&Ks(I=xe.selector||I);if(z=z||[],be.length===1){if(re=be[0]=be[0].slice(0),re.length>2&&(se=re[0]).type==="ID"&&V.nodeType===9&&D&&d.relative[re[1].type]){if(V=(d.find.ID(se.matches[0].replace(ze,Ie),V)||[])[0],V)xe&&(V=V.parentNode);else return z;I=I.slice(re.shift().value.length)}for(K=S.needsContext.test(I)?0:re.length;K--&&(se=re[K],!d.relative[ue=se.type]);)if((oe=d.find[ue])&&($=oe(se.matches[0].replace(ze,Ie),Ue.test(re[0].type)&&pc(V.parentNode)||V))){if(re.splice(K,1),I=$.length&&ua(re),!I)return E.apply(z,$),z;break}}return(xe||yc(I,be))($,V,!D,z,!V||Ue.test(I)&&pc(V.parentNode)||V),z}C.sortStable=Y.split("").sort(Ze).join("")===Y,pr(),C.sortDetached=$i(function(I){return I.compareDocumentPosition(T.createElement("fieldset"))&1}),f.find=Re,f.expr[":"]=f.expr.pseudos,f.unique=f.uniqueSort,Re.compile=yc,Re.select=fh,Re.setDocument=pr,Re.tokenize=Ks,Re.escape=f.escapeSelector,Re.getText=f.text,Re.isXML=f.isXMLDoc,Re.selectors=f.expr,Re.support=f.support,Re.uniqueSort=f.uniqueSort})();var hn=function(a,d,p){for(var v=[],_=p!==void 0;(a=a[d])&&a.nodeType!==9;)if(a.nodeType===1){if(_&&f(a).is(p))break;v.push(a)}return v},Ps=function(a,d){for(var p=[];a;a=a.nextSibling)a.nodeType===1&&a!==d&&p.push(a);return p},jo=f.expr.match.needsContext,nn=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function nt(a,d,p){return P(d)?f.grep(a,function(v,_){return!!d.call(v,_,v)!==p}):d.nodeType?f.grep(a,function(v){return v===d!==p}):typeof d!="string"?f.grep(a,function(v){return u.call(d,v)>-1!==p}):f.filter(d,a,p)}f.filter=function(a,d,p){var v=d[0];return p&&(a=":not("+a+")"),d.length===1&&v.nodeType===1?f.find.matchesSelector(v,a)?[v]:[]:f.find.matches(a,f.grep(d,function(_){return _.nodeType===1}))},f.fn.extend({find:function(a){var d,p,v=this.length,_=this;if(typeof a!="string")return this.pushStack(f(a).filter(function(){for(d=0;d<v;d++)if(f.contains(_[d],this))return!0}));for(p=this.pushStack([]),d=0;d<v;d++)f.find(a,_[d],p);return v>1?f.uniqueSort(p):p},filter:function(a){return this.pushStack(nt(this,a||[],!1))},not:function(a){return this.pushStack(nt(this,a||[],!0))},is:function(a){return!!nt(this,typeof a=="string"&&jo.test(a)?f(a):a||[],!1).length}});var zo,zr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,tc=f.fn.init=function(a,d,p){var v,_;if(!a)return this;if(p=p||zo,typeof a=="string")if(a[0]==="<"&&a[a.length-1]===">"&&a.length>=3?v=[null,a,null]:v=zr.exec(a),v&&(v[1]||!d))if(v[1]){if(d=d instanceof f?d[0]:d,f.merge(this,f.parseHTML(v[1],d&&d.nodeType?d.ownerDocument||d:U,!0)),nn.test(v[1])&&f.isPlainObject(d))for(v in d)P(this[v])?this[v](d[v]):this.attr(v,d[v]);return this}else return _=U.getElementById(v[2]),_&&(this[0]=_,this.length=1),this;else return!d||d.jquery?(d||p).find(a):this.constructor(d).find(a);else{if(a.nodeType)return this[0]=a,this.length=1,this;if(P(a))return p.ready!==void 0?p.ready(a):a(f)}return f.makeArray(a,this)};tc.prototype=f.fn,zo=f(U);var Ti=/^(?:parents|prev(?:Until|All))/,nc={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({has:function(a){var d=f(a,this),p=d.length;return this.filter(function(){for(var v=0;v<p;v++)if(f.contains(this,d[v]))return!0})},closest:function(a,d){var p,v=0,_=this.length,E=[],T=typeof a!="string"&&f(a);if(!jo.test(a)){for(;v<_;v++)for(p=this[v];p&&p!==d;p=p.parentNode)if(p.nodeType<11&&(T?T.index(p)>-1:p.nodeType===1&&f.find.matchesSelector(p,a))){E.push(p);break}}return this.pushStack(E.length>1?f.uniqueSort(E):E)},index:function(a){return a?typeof a=="string"?u.call(f(a),this[0]):u.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,d){return this.pushStack(f.uniqueSort(f.merge(this.get(),f(a,d))))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}});function Wo(a,d){for(;(a=a[d])&&a.nodeType!==1;);return a}f.each({parent:function(a){var d=a.parentNode;return d&&d.nodeType!==11?d:null},parents:function(a){return hn(a,"parentNode")},parentsUntil:function(a,d,p){return hn(a,"parentNode",p)},next:function(a){return Wo(a,"nextSibling")},prev:function(a){return Wo(a,"previousSibling")},nextAll:function(a){return hn(a,"nextSibling")},prevAll:function(a){return hn(a,"previousSibling")},nextUntil:function(a,d,p){return hn(a,"nextSibling",p)},prevUntil:function(a,d,p){return hn(a,"previousSibling",p)},siblings:function(a){return Ps((a.parentNode||{}).firstChild,a)},children:function(a){return Ps(a.firstChild)},contents:function(a){return a.contentDocument!=null&&i(a.contentDocument)?a.contentDocument:(k(a,"template")&&(a=a.content||a),f.merge([],a.childNodes))}},function(a,d){f.fn[a]=function(p,v){var _=f.map(this,d,p);return a.slice(-5)!=="Until"&&(v=p),v&&typeof v=="string"&&(_=f.filter(v,_)),this.length>1&&(nc[a]||f.uniqueSort(_),Ti.test(a)&&_.reverse()),this.pushStack(_)}});var Rt=/[^\x20\t\r\n\f]+/g;function Ai(a){var d={};return f.each(a.match(Rt)||[],function(p,v){d[v]=!0}),d}f.Callbacks=function(a){a=typeof a=="string"?Ai(a):f.extend({},a);var d,p,v,_,E=[],T=[],N=-1,D=function(){for(_=_||a.once,v=d=!0;T.length;N=-1)for(p=T.shift();++N<E.length;)E[N].apply(p[0],p[1])===!1&&a.stopOnFalse&&(N=E.length,p=!1);a.memory||(p=!1),d=!1,_&&(p?E=[]:E="")},F={add:function(){return E&&(p&&!d&&(N=E.length-1,T.push(p)),function Q(Y){f.each(Y,function(W,ee){P(ee)?(!a.unique||!F.has(ee))&&E.push(ee):ee&&ee.length&&ie(ee)!=="string"&&Q(ee)})}(arguments),p&&!d&&D()),this},remove:function(){return f.each(arguments,function(Q,Y){for(var W;(W=f.inArray(Y,E,W))>-1;)E.splice(W,1),W<=N&&N--}),this},has:function(Q){return Q?f.inArray(Q,E)>-1:E.length>0},empty:function(){return E&&(E=[]),this},disable:function(){return _=T=[],E=p="",this},disabled:function(){return!E},lock:function(){return _=T=[],!p&&!d&&(E=p=""),this},locked:function(){return!!_},fireWith:function(Q,Y){return _||(Y=Y||[],Y=[Q,Y.slice?Y.slice():Y],T.push(Y),d||D()),this},fire:function(){return F.fireWith(this,arguments),this},fired:function(){return!!v}};return F};function fn(a){return a}function ar(a){throw a}function Si(a,d,p,v){var _;try{a&&P(_=a.promise)?_.call(a).done(d).fail(p):a&&P(_=a.then)?_.call(a,d,p):d.apply(void 0,[a].slice(v))}catch(E){p.apply(void 0,[E])}}f.extend({Deferred:function(a){var d=[["notify","progress",f.Callbacks("memory"),f.Callbacks("memory"),2],["resolve","done",f.Callbacks("once memory"),f.Callbacks("once memory"),0,"resolved"],["reject","fail",f.Callbacks("once memory"),f.Callbacks("once memory"),1,"rejected"]],p="pending",v={state:function(){return p},always:function(){return _.done(arguments).fail(arguments),this},catch:function(E){return v.then(null,E)},pipe:function(){var E=arguments;return f.Deferred(function(T){f.each(d,function(N,D){var F=P(E[D[4]])&&E[D[4]];_[D[1]](function(){var Q=F&&F.apply(this,arguments);Q&&P(Q.promise)?Q.promise().progress(T.notify).done(T.resolve).fail(T.reject):T[D[0]+"With"](this,F?[Q]:arguments)})}),E=null}).promise()},then:function(E,T,N){var D=0;function F(Q,Y,W,ee){return function(){var me=this,ke=arguments,Ee=function(){var Ze,Ht;if(!(Q<D)){if(Ze=W.apply(me,ke),Ze===Y.promise())throw new TypeError("Thenable self-resolution");Ht=Ze&&(typeof Ze=="object"||typeof Ze=="function")&&Ze.then,P(Ht)?ee?Ht.call(Ze,F(D,Y,fn,ee),F(D,Y,ar,ee)):(D++,Ht.call(Ze,F(D,Y,fn,ee),F(D,Y,ar,ee),F(D,Y,fn,Y.notifyWith))):(W!==fn&&(me=void 0,ke=[Ze]),(ee||Y.resolveWith)(me,ke))}},rt=ee?Ee:function(){try{Ee()}catch(Ze){f.Deferred.exceptionHook&&f.Deferred.exceptionHook(Ze,rt.error),Q+1>=D&&(W!==ar&&(me=void 0,ke=[Ze]),Y.rejectWith(me,ke))}};Q?rt():(f.Deferred.getErrorHook?rt.error=f.Deferred.getErrorHook():f.Deferred.getStackHook&&(rt.error=f.Deferred.getStackHook()),e.setTimeout(rt))}}return f.Deferred(function(Q){d[0][3].add(F(0,Q,P(N)?N:fn,Q.notifyWith)),d[1][3].add(F(0,Q,P(E)?E:fn)),d[2][3].add(F(0,Q,P(T)?T:ar))}).promise()},promise:function(E){return E!=null?f.extend(E,v):v}},_={};return f.each(d,function(E,T){var N=T[2],D=T[5];v[T[1]]=N.add,D&&N.add(function(){p=D},d[3-E][2].disable,d[3-E][3].disable,d[0][2].lock,d[0][3].lock),N.add(T[3].fire),_[T[0]]=function(){return _[T[0]+"With"](this===_?void 0:this,arguments),this},_[T[0]+"With"]=N.fireWith}),v.promise(_),a&&a.call(_,_),_},when:function(a){var d=arguments.length,p=d,v=Array(p),_=s.call(arguments),E=f.Deferred(),T=function(N){return function(D){v[N]=this,_[N]=arguments.length>1?s.call(arguments):D,--d||E.resolveWith(v,_)}};if(d<=1&&(Si(a,E.done(T(p)).resolve,E.reject,!d),E.state()==="pending"||P(_[p]&&_[p].then)))return E.then();for(;p--;)Si(_[p],T(p),E.reject);return E.promise()}});var Ns=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;f.Deferred.exceptionHook=function(a,d){e.console&&e.console.warn&&a&&Ns.test(a.name)&&e.console.warn("jQuery.Deferred exception: "+a.message,a.stack,d)},f.readyException=function(a){e.setTimeout(function(){throw a})};var Ii=f.Deferred();f.fn.ready=function(a){return Ii.then(a).catch(function(d){f.readyException(d)}),this},f.extend({isReady:!1,readyWait:1,ready:function(a){(a===!0?--f.readyWait:f.isReady)||(f.isReady=!0,!(a!==!0&&--f.readyWait>0)&&Ii.resolveWith(U,[f]))}}),f.ready.then=Ii.then;function Ci(){U.removeEventListener("DOMContentLoaded",Ci),e.removeEventListener("load",Ci),f.ready()}U.readyState==="complete"||U.readyState!=="loading"&&!U.documentElement.doScroll?e.setTimeout(f.ready):(U.addEventListener("DOMContentLoaded",Ci),e.addEventListener("load",Ci));var rn=function(a,d,p,v,_,E,T){var N=0,D=a.length,F=p==null;if(ie(p)==="object"){_=!0;for(N in p)rn(a,d,N,p[N],!0,E,T)}else if(v!==void 0&&(_=!0,P(v)||(T=!0),F&&(T?(d.call(a,v),d=null):(F=d,d=function(Q,Y,W){return F.call(f(Q),W)})),d))for(;N<D;N++)d(a[N],p,T?v:v.call(a[N],N,d(a[N],p)));return _?a:F?d.call(a):D?d(a[0],p):E},qo=/^-ms-/,Ms=/-([a-z])/g;function $o(a,d){return d.toUpperCase()}function Gt(a){return a.replace(qo,"ms-").replace(Ms,$o)}var Mn=function(a){return a.nodeType===1||a.nodeType===9||!+a.nodeType};function On(){this.expando=f.expando+On.uid++}On.uid=1,On.prototype={cache:function(a){var d=a[this.expando];return d||(d={},Mn(a)&&(a.nodeType?a[this.expando]=d:Object.defineProperty(a,this.expando,{value:d,configurable:!0}))),d},set:function(a,d,p){var v,_=this.cache(a);if(typeof d=="string")_[Gt(d)]=p;else for(v in d)_[Gt(v)]=d[v];return _},get:function(a,d){return d===void 0?this.cache(a):a[this.expando]&&a[this.expando][Gt(d)]},access:function(a,d,p){return d===void 0||d&&typeof d=="string"&&p===void 0?this.get(a,d):(this.set(a,d,p),p!==void 0?p:d)},remove:function(a,d){var p,v=a[this.expando];if(v!==void 0){if(d!==void 0)for(Array.isArray(d)?d=d.map(Gt):(d=Gt(d),d=d in v?[d]:d.match(Rt)||[]),p=d.length;p--;)delete v[d[p]];(d===void 0||f.isEmptyObject(v))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var d=a[this.expando];return d!==void 0&&!f.isEmptyObject(d)}};var ce=new On,Fe=new On,pt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ri=/[A-Z]/g;function Go(a){return a==="true"?!0:a==="false"?!1:a==="null"?null:a===+a+""?+a:pt.test(a)?JSON.parse(a):a}function Os(a,d,p){var v;if(p===void 0&&a.nodeType===1)if(v="data-"+d.replace(Ri,"-$&").toLowerCase(),p=a.getAttribute(v),typeof p=="string"){try{p=Go(p)}catch{}Fe.set(a,d,p)}else p=void 0;return p}f.extend({hasData:function(a){return Fe.hasData(a)||ce.hasData(a)},data:function(a,d,p){return Fe.access(a,d,p)},removeData:function(a,d){Fe.remove(a,d)},_data:function(a,d,p){return ce.access(a,d,p)},_removeData:function(a,d){ce.remove(a,d)}}),f.fn.extend({data:function(a,d){var p,v,_,E=this[0],T=E&&E.attributes;if(a===void 0){if(this.length&&(_=Fe.get(E),E.nodeType===1&&!ce.get(E,"hasDataAttrs"))){for(p=T.length;p--;)T[p]&&(v=T[p].name,v.indexOf("data-")===0&&(v=Gt(v.slice(5)),Os(E,v,_[v])));ce.set(E,"hasDataAttrs",!0)}return _}return typeof a=="object"?this.each(function(){Fe.set(this,a)}):rn(this,function(N){var D;if(E&&N===void 0)return D=Fe.get(E,a),D!==void 0||(D=Os(E,a),D!==void 0)?D:void 0;this.each(function(){Fe.set(this,a,N)})},null,d,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){Fe.remove(this,a)})}}),f.extend({queue:function(a,d,p){var v;if(a)return d=(d||"fx")+"queue",v=ce.get(a,d),p&&(!v||Array.isArray(p)?v=ce.access(a,d,f.makeArray(p)):v.push(p)),v||[]},dequeue:function(a,d){d=d||"fx";var p=f.queue(a,d),v=p.length,_=p.shift(),E=f._queueHooks(a,d),T=function(){f.dequeue(a,d)};_==="inprogress"&&(_=p.shift(),v--),_&&(d==="fx"&&p.unshift("inprogress"),delete E.stop,_.call(a,T,E)),!v&&E&&E.empty.fire()},_queueHooks:function(a,d){var p=d+"queueHooks";return ce.get(a,p)||ce.access(a,p,{empty:f.Callbacks("once memory").add(function(){ce.remove(a,[d+"queue",p])})})}}),f.fn.extend({queue:function(a,d){var p=2;return typeof a!="string"&&(d=a,a="fx",p--),arguments.length<p?f.queue(this[0],a):d===void 0?this:this.each(function(){var v=f.queue(this,a,d);f._queueHooks(this,a),a==="fx"&&v[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,d){var p,v=1,_=f.Deferred(),E=this,T=this.length,N=function(){--v||_.resolveWith(E,[E])};for(typeof a!="string"&&(d=a,a=void 0),a=a||"fx";T--;)p=ce.get(E[T],a+"queueHooks"),p&&p.empty&&(v++,p.empty.add(N));return N(),_.promise(d)}});var Qo=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,sn=new RegExp("^(?:([+-])=|)("+Qo+")([a-z%]*)$","i"),Qt=["Top","Right","Bottom","Left"],pn=U.documentElement,gn=function(a){return f.contains(a.ownerDocument,a)},rc={composed:!0};pn.getRootNode&&(gn=function(a){return f.contains(a.ownerDocument,a)||a.getRootNode(rc)===a.ownerDocument});var Di=function(a,d){return a=d||a,a.style.display==="none"||a.style.display===""&&gn(a)&&f.css(a,"display")==="none"};function ki(a,d,p,v){var _,E,T=20,N=v?function(){return v.cur()}:function(){return f.css(a,d,"")},D=N(),F=p&&p[3]||(f.cssNumber[d]?"":"px"),Q=a.nodeType&&(f.cssNumber[d]||F!=="px"&&+D)&&sn.exec(f.css(a,d));if(Q&&Q[3]!==F){for(D=D/2,F=F||Q[3],Q=+D||1;T--;)f.style(a,d,Q+F),(1-E)*(1-(E=N()/D||.5))<=0&&(T=0),Q=Q/E;Q=Q*2,f.style(a,d,Q+F),p=p||[]}return p&&(Q=+Q||+D||0,_=p[1]?Q+(p[1]+1)*p[2]:+p[2],v&&(v.unit=F,v.start=Q,v.end=_)),_}var Vs={};function Yo(a){var d,p=a.ownerDocument,v=a.nodeName,_=Vs[v];return _||(d=p.body.appendChild(p.createElement(v)),_=f.css(d,"display"),d.parentNode.removeChild(d),_==="none"&&(_="block"),Vs[v]=_,_)}function Yt(a,d){for(var p,v,_=[],E=0,T=a.length;E<T;E++)v=a[E],v.style&&(p=v.style.display,d?(p==="none"&&(_[E]=ce.get(v,"display")||null,_[E]||(v.style.display="")),v.style.display===""&&Di(v)&&(_[E]=Yo(v))):p!=="none"&&(_[E]="none",ce.set(v,"display",p)));for(E=0;E<T;E++)_[E]!=null&&(a[E].style.display=_[E]);return a}f.fn.extend({show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(a){return typeof a=="boolean"?a?this.show():this.hide():this.each(function(){Di(this)?f(this).show():f(this).hide()})}});var Vn=/^(?:checkbox|radio)$/i,xi=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,mn=/^$|^module$|\/(?:java|ecma)script/i;(function(){var a=U.createDocumentFragment(),d=a.appendChild(U.createElement("div")),p=U.createElement("input");p.setAttribute("type","radio"),p.setAttribute("checked","checked"),p.setAttribute("name","t"),d.appendChild(p),C.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked,d.innerHTML="<textarea>x</textarea>",C.noCloneChecked=!!d.cloneNode(!0).lastChild.defaultValue,d.innerHTML="<option></option>",C.option=!!d.lastChild})();var Dt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Dt.tbody=Dt.tfoot=Dt.colgroup=Dt.caption=Dt.thead,Dt.th=Dt.td,C.option||(Dt.optgroup=Dt.option=[1,"<select multiple='multiple'>","</select>"]);function at(a,d){var p;return typeof a.getElementsByTagName<"u"?p=a.getElementsByTagName(d||"*"):typeof a.querySelectorAll<"u"?p=a.querySelectorAll(d||"*"):p=[],d===void 0||d&&k(a,d)?f.merge([a],p):p}function Pi(a,d){for(var p=0,v=a.length;p<v;p++)ce.set(a[p],"globalEval",!d||ce.get(d[p],"globalEval"))}var Wr=/<|&#?\w+;/;function Ls(a,d,p,v,_){for(var E,T,N,D,F,Q,Y=d.createDocumentFragment(),W=[],ee=0,me=a.length;ee<me;ee++)if(E=a[ee],E||E===0)if(ie(E)==="object")f.merge(W,E.nodeType?[E]:E);else if(!Wr.test(E))W.push(d.createTextNode(E));else{for(T=T||Y.appendChild(d.createElement("div")),N=(xi.exec(E)||["",""])[1].toLowerCase(),D=Dt[N]||Dt._default,T.innerHTML=D[1]+f.htmlPrefilter(E)+D[2],Q=D[0];Q--;)T=T.lastChild;f.merge(W,T.childNodes),T=Y.firstChild,T.textContent=""}for(Y.textContent="",ee=0;E=W[ee++];){if(v&&f.inArray(E,v)>-1){_&&_.push(E);continue}if(F=gn(E),T=at(Y.appendChild(E),"script"),F&&Pi(T),p)for(Q=0;E=T[Q++];)mn.test(E.type||"")&&p.push(E)}return Y}var ut=/^([^.]*)(?:\.(.+)|)/;function Ln(){return!0}function Kt(){return!1}function Fn(a,d,p,v,_,E){var T,N;if(typeof d=="object"){typeof p!="string"&&(v=v||p,p=void 0);for(N in d)Fn(a,N,p,v,d[N],E);return a}if(v==null&&_==null?(_=p,v=p=void 0):_==null&&(typeof p=="string"?(_=v,v=void 0):(_=v,v=p,p=void 0)),_===!1)_=Kt;else if(!_)return a;return E===1&&(T=_,_=function(D){return f().off(D),T.apply(this,arguments)},_.guid=T.guid||(T.guid=f.guid++)),a.each(function(){f.event.add(this,d,_,v,p)})}f.event={global:{},add:function(a,d,p,v,_){var E,T,N,D,F,Q,Y,W,ee,me,ke,Ee=ce.get(a);if(Mn(a))for(p.handler&&(E=p,p=E.handler,_=E.selector),_&&f.find.matchesSelector(pn,_),p.guid||(p.guid=f.guid++),(D=Ee.events)||(D=Ee.events=Object.create(null)),(T=Ee.handle)||(T=Ee.handle=function(rt){return typeof f<"u"&&f.event.triggered!==rt.type?f.event.dispatch.apply(a,arguments):void 0}),d=(d||"").match(Rt)||[""],F=d.length;F--;)N=ut.exec(d[F])||[],ee=ke=N[1],me=(N[2]||"").split(".").sort(),ee&&(Y=f.event.special[ee]||{},ee=(_?Y.delegateType:Y.bindType)||ee,Y=f.event.special[ee]||{},Q=f.extend({type:ee,origType:ke,data:v,handler:p,guid:p.guid,selector:_,needsContext:_&&f.expr.match.needsContext.test(_),namespace:me.join(".")},E),(W=D[ee])||(W=D[ee]=[],W.delegateCount=0,(!Y.setup||Y.setup.call(a,v,me,T)===!1)&&a.addEventListener&&a.addEventListener(ee,T)),Y.add&&(Y.add.call(a,Q),Q.handler.guid||(Q.handler.guid=p.guid)),_?W.splice(W.delegateCount++,0,Q):W.push(Q),f.event.global[ee]=!0)},remove:function(a,d,p,v,_){var E,T,N,D,F,Q,Y,W,ee,me,ke,Ee=ce.hasData(a)&&ce.get(a);if(!(!Ee||!(D=Ee.events))){for(d=(d||"").match(Rt)||[""],F=d.length;F--;){if(N=ut.exec(d[F])||[],ee=ke=N[1],me=(N[2]||"").split(".").sort(),!ee){for(ee in D)f.event.remove(a,ee+d[F],p,v,!0);continue}for(Y=f.event.special[ee]||{},ee=(v?Y.delegateType:Y.bindType)||ee,W=D[ee]||[],N=N[2]&&new RegExp("(^|\\.)"+me.join("\\.(?:.*\\.|)")+"(\\.|$)"),T=E=W.length;E--;)Q=W[E],(_||ke===Q.origType)&&(!p||p.guid===Q.guid)&&(!N||N.test(Q.namespace))&&(!v||v===Q.selector||v==="**"&&Q.selector)&&(W.splice(E,1),Q.selector&&W.delegateCount--,Y.remove&&Y.remove.call(a,Q));T&&!W.length&&((!Y.teardown||Y.teardown.call(a,me,Ee.handle)===!1)&&f.removeEvent(a,ee,Ee.handle),delete D[ee])}f.isEmptyObject(D)&&ce.remove(a,"handle events")}},dispatch:function(a){var d,p,v,_,E,T,N=new Array(arguments.length),D=f.event.fix(a),F=(ce.get(this,"events")||Object.create(null))[D.type]||[],Q=f.event.special[D.type]||{};for(N[0]=D,d=1;d<arguments.length;d++)N[d]=arguments[d];if(D.delegateTarget=this,!(Q.preDispatch&&Q.preDispatch.call(this,D)===!1)){for(T=f.event.handlers.call(this,D,F),d=0;(_=T[d++])&&!D.isPropagationStopped();)for(D.currentTarget=_.elem,p=0;(E=_.handlers[p++])&&!D.isImmediatePropagationStopped();)(!D.rnamespace||E.namespace===!1||D.rnamespace.test(E.namespace))&&(D.handleObj=E,D.data=E.data,v=((f.event.special[E.origType]||{}).handle||E.handler).apply(_.elem,N),v!==void 0&&(D.result=v)===!1&&(D.preventDefault(),D.stopPropagation()));return Q.postDispatch&&Q.postDispatch.call(this,D),D.result}},handlers:function(a,d){var p,v,_,E,T,N=[],D=d.delegateCount,F=a.target;if(D&&F.nodeType&&!(a.type==="click"&&a.button>=1)){for(;F!==this;F=F.parentNode||this)if(F.nodeType===1&&!(a.type==="click"&&F.disabled===!0)){for(E=[],T={},p=0;p<D;p++)v=d[p],_=v.selector+" ",T[_]===void 0&&(T[_]=v.needsContext?f(_,this).index(F)>-1:f.find(_,this,null,[F]).length),T[_]&&E.push(v);E.length&&N.push({elem:F,handlers:E})}}return F=this,D<d.length&&N.push({elem:F,handlers:d.slice(D)}),N},addProp:function(a,d){Object.defineProperty(f.Event.prototype,a,{enumerable:!0,configurable:!0,get:P(d)?function(){if(this.originalEvent)return d(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(p){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:p})}})},fix:function(a){return a[f.expando]?a:new f.Event(a)},special:{load:{noBubble:!0},click:{setup:function(a){var d=this||a;return Vn.test(d.type)&&d.click&&k(d,"input")&&Ni(d,"click",!0),!1},trigger:function(a){var d=this||a;return Vn.test(d.type)&&d.click&&k(d,"input")&&Ni(d,"click"),!0},_default:function(a){var d=a.target;return Vn.test(d.type)&&d.click&&k(d,"input")&&ce.get(d,"click")||k(d,"a")}},beforeunload:{postDispatch:function(a){a.result!==void 0&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}};function Ni(a,d,p){if(!p){ce.get(a,d)===void 0&&f.event.add(a,d,Ln);return}ce.set(a,d,!1),f.event.add(a,d,{namespace:!1,handler:function(v){var _,E=ce.get(this,d);if(v.isTrigger&1&&this[d]){if(E)(f.event.special[d]||{}).delegateType&&v.stopPropagation();else if(E=s.call(arguments),ce.set(this,d,E),this[d](),_=ce.get(this,d),ce.set(this,d,!1),E!==_)return v.stopImmediatePropagation(),v.preventDefault(),_}else E&&(ce.set(this,d,f.event.trigger(E[0],E.slice(1),this)),v.stopPropagation(),v.isImmediatePropagationStopped=Ln)}})}f.removeEvent=function(a,d,p){a.removeEventListener&&a.removeEventListener(d,p)},f.Event=function(a,d){if(!(this instanceof f.Event))return new f.Event(a,d);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.defaultPrevented===void 0&&a.returnValue===!1?Ln:Kt,this.target=a.target&&a.target.nodeType===3?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,d&&f.extend(this,d),this.timeStamp=a&&a.timeStamp||Date.now(),this[f.expando]=!0},f.Event.prototype={constructor:f.Event,isDefaultPrevented:Kt,isPropagationStopped:Kt,isImmediatePropagationStopped:Kt,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Ln,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Ln,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Ln,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},f.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},f.event.addProp),f.each({focus:"focusin",blur:"focusout"},function(a,d){function p(v){if(U.documentMode){var _=ce.get(this,"handle"),E=f.event.fix(v);E.type=v.type==="focusin"?"focus":"blur",E.isSimulated=!0,_(v),E.target===E.currentTarget&&_(E)}else f.event.simulate(d,v.target,f.event.fix(v))}f.event.special[a]={setup:function(){var v;if(Ni(this,a,!0),U.documentMode)v=ce.get(this,d),v||this.addEventListener(d,p),ce.set(this,d,(v||0)+1);else return!1},trigger:function(){return Ni(this,a),!0},teardown:function(){var v;if(U.documentMode)v=ce.get(this,d)-1,v?ce.set(this,d,v):(this.removeEventListener(d,p),ce.remove(this,d));else return!1},_default:function(v){return ce.get(v.target,a)},delegateType:d},f.event.special[d]={setup:function(){var v=this.ownerDocument||this.document||this,_=U.documentMode?this:v,E=ce.get(_,d);E||(U.documentMode?this.addEventListener(d,p):v.addEventListener(a,p,!0)),ce.set(_,d,(E||0)+1)},teardown:function(){var v=this.ownerDocument||this.document||this,_=U.documentMode?this:v,E=ce.get(_,d)-1;E?ce.set(_,d,E):(U.documentMode?this.removeEventListener(d,p):v.removeEventListener(a,p,!0),ce.remove(_,d))}}}),f.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,d){f.event.special[a]={delegateType:d,bindType:d,handle:function(p){var v,_=this,E=p.relatedTarget,T=p.handleObj;return(!E||E!==_&&!f.contains(_,E))&&(p.type=T.origType,v=T.handler.apply(this,arguments),p.type=d),v}}}),f.fn.extend({on:function(a,d,p,v){return Fn(this,a,d,p,v)},one:function(a,d,p,v){return Fn(this,a,d,p,v,1)},off:function(a,d,p){var v,_;if(a&&a.preventDefault&&a.handleObj)return v=a.handleObj,f(a.delegateTarget).off(v.namespace?v.origType+"."+v.namespace:v.origType,v.selector,v.handler),this;if(typeof a=="object"){for(_ in a)this.off(_,d,a[_]);return this}return(d===!1||typeof d=="function")&&(p=d,d=void 0),p===!1&&(p=Kt),this.each(function(){f.event.remove(this,a,p,d)})}});var ic=/<script|<style|<link/i,lr=/checked\s*(?:[^=]|=\s*.checked.)/i,sc=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ko(a,d){return k(a,"table")&&k(d.nodeType!==11?d:d.firstChild,"tr")&&f(a).children("tbody")[0]||a}function Mi(a){return a.type=(a.getAttribute("type")!==null)+"/"+a.type,a}function Xo(a){return(a.type||"").slice(0,5)==="true/"?a.type=a.type.slice(5):a.removeAttribute("type"),a}function Oi(a,d){var p,v,_,E,T,N,D;if(d.nodeType===1){if(ce.hasData(a)&&(E=ce.get(a),D=E.events,D)){ce.remove(d,"handle events");for(_ in D)for(p=0,v=D[_].length;p<v;p++)f.event.add(d,_,D[_][p])}Fe.hasData(a)&&(T=Fe.access(a),N=f.extend({},T),Fe.set(d,N))}}function Vi(a,d){var p=d.nodeName.toLowerCase();p==="input"&&Vn.test(a.type)?d.checked=a.checked:(p==="input"||p==="textarea")&&(d.defaultValue=a.defaultValue)}function kt(a,d,p,v){d=o(d);var _,E,T,N,D,F,Q=0,Y=a.length,W=Y-1,ee=d[0],me=P(ee);if(me||Y>1&&typeof ee=="string"&&!C.checkClone&&lr.test(ee))return a.each(function(ke){var Ee=a.eq(ke);me&&(d[0]=ee.call(this,ke,Ee.html())),kt(Ee,d,p,v)});if(Y&&(_=Ls(d,a[0].ownerDocument,!1,a,v),E=_.firstChild,_.childNodes.length===1&&(_=E),E||v)){for(T=f.map(at(_,"script"),Mi),N=T.length;Q<Y;Q++)D=_,Q!==W&&(D=f.clone(D,!0,!0),N&&f.merge(T,at(D,"script"))),p.call(a[Q],D,Q);if(N)for(F=T[T.length-1].ownerDocument,f.map(T,Xo),Q=0;Q<N;Q++)D=T[Q],mn.test(D.type||"")&&!ce.access(D,"globalEval")&&f.contains(F,D)&&(D.src&&(D.type||"").toLowerCase()!=="module"?f._evalUrl&&!D.noModule&&f._evalUrl(D.src,{nonce:D.nonce||D.getAttribute("nonce")},F):te(D.textContent.replace(sc,""),D,F))}return a}function Fs(a,d,p){for(var v,_=d?f.filter(d,a):a,E=0;(v=_[E])!=null;E++)!p&&v.nodeType===1&&f.cleanData(at(v)),v.parentNode&&(p&&gn(v)&&Pi(at(v,"script")),v.parentNode.removeChild(v));return a}f.extend({htmlPrefilter:function(a){return a},clone:function(a,d,p){var v,_,E,T,N=a.cloneNode(!0),D=gn(a);if(!C.noCloneChecked&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a))for(T=at(N),E=at(a),v=0,_=E.length;v<_;v++)Vi(E[v],T[v]);if(d)if(p)for(E=E||at(a),T=T||at(N),v=0,_=E.length;v<_;v++)Oi(E[v],T[v]);else Oi(a,N);return T=at(N,"script"),T.length>0&&Pi(T,!D&&at(a,"script")),N},cleanData:function(a){for(var d,p,v,_=f.event.special,E=0;(p=a[E])!==void 0;E++)if(Mn(p)){if(d=p[ce.expando]){if(d.events)for(v in d.events)_[v]?f.event.remove(p,v):f.removeEvent(p,v,d.handle);p[ce.expando]=void 0}p[Fe.expando]&&(p[Fe.expando]=void 0)}}}),f.fn.extend({detach:function(a){return Fs(this,a,!0)},remove:function(a){return Fs(this,a)},text:function(a){return rn(this,function(d){return d===void 0?f.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=d)})},null,a,arguments.length)},append:function(){return kt(this,arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var d=Ko(this,a);d.appendChild(a)}})},prepend:function(){return kt(this,arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var d=Ko(this,a);d.insertBefore(a,d.firstChild)}})},before:function(){return kt(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return kt(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,d=0;(a=this[d])!=null;d++)a.nodeType===1&&(f.cleanData(at(a,!1)),a.textContent="");return this},clone:function(a,d){return a=a??!1,d=d??a,this.map(function(){return f.clone(this,a,d)})},html:function(a){return rn(this,function(d){var p=this[0]||{},v=0,_=this.length;if(d===void 0&&p.nodeType===1)return p.innerHTML;if(typeof d=="string"&&!ic.test(d)&&!Dt[(xi.exec(d)||["",""])[1].toLowerCase()]){d=f.htmlPrefilter(d);try{for(;v<_;v++)p=this[v]||{},p.nodeType===1&&(f.cleanData(at(p,!1)),p.innerHTML=d);p=0}catch{}}p&&this.empty().append(d)},null,a,arguments.length)},replaceWith:function(){var a=[];return kt(this,arguments,function(d){var p=this.parentNode;f.inArray(this,a)<0&&(f.cleanData(at(this)),p&&p.replaceChild(d,this))},a)}}),f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,d){f.fn[a]=function(p){for(var v,_=[],E=f(p),T=E.length-1,N=0;N<=T;N++)v=N===T?this:this.clone(!0),f(E[N])[d](v),l.apply(_,v.get());return this.pushStack(_)}});var Li=new RegExp("^("+Qo+")(?!px)[a-z%]+$","i"),qr=/^--/,cr=function(a){var d=a.ownerDocument.defaultView;return(!d||!d.opener)&&(d=e),d.getComputedStyle(a)},Us=function(a,d,p){var v,_,E={};for(_ in d)E[_]=a.style[_],a.style[_]=d[_];v=p.call(a);for(_ in d)a.style[_]=E[_];return v},Jo=new RegExp(Qt.join("|"),"i");(function(){function a(){if(F){D.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",F.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",pn.appendChild(D).appendChild(F);var Q=e.getComputedStyle(F);p=Q.top!=="1%",N=d(Q.marginLeft)===12,F.style.right="60%",E=d(Q.right)===36,v=d(Q.width)===36,F.style.position="absolute",_=d(F.offsetWidth/3)===12,pn.removeChild(D),F=null}}function d(Q){return Math.round(parseFloat(Q))}var p,v,_,E,T,N,D=U.createElement("div"),F=U.createElement("div");F.style&&(F.style.backgroundClip="content-box",F.cloneNode(!0).style.backgroundClip="",C.clearCloneStyle=F.style.backgroundClip==="content-box",f.extend(C,{boxSizingReliable:function(){return a(),v},pixelBoxStyles:function(){return a(),E},pixelPosition:function(){return a(),p},reliableMarginLeft:function(){return a(),N},scrollboxSize:function(){return a(),_},reliableTrDimensions:function(){var Q,Y,W,ee;return T==null&&(Q=U.createElement("table"),Y=U.createElement("tr"),W=U.createElement("div"),Q.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Y.style.cssText="box-sizing:content-box;border:1px solid",Y.style.height="1px",W.style.height="9px",W.style.display="block",pn.appendChild(Q).appendChild(Y).appendChild(W),ee=e.getComputedStyle(Y),T=parseInt(ee.height,10)+parseInt(ee.borderTopWidth,10)+parseInt(ee.borderBottomWidth,10)===Y.offsetHeight,pn.removeChild(Q)),T}}))})();function $r(a,d,p){var v,_,E,T,N=qr.test(d),D=a.style;return p=p||cr(a),p&&(T=p.getPropertyValue(d)||p[d],N&&T&&(T=T.replace(It,"$1")||void 0),T===""&&!gn(a)&&(T=f.style(a,d)),!C.pixelBoxStyles()&&Li.test(T)&&Jo.test(d)&&(v=D.width,_=D.minWidth,E=D.maxWidth,D.minWidth=D.maxWidth=D.width=T,T=p.width,D.width=v,D.minWidth=_,D.maxWidth=E)),T!==void 0?T+"":T}function Gr(a,d){return{get:function(){if(a()){delete this.get;return}return(this.get=d).apply(this,arguments)}}}var Bs=["Webkit","Moz","ms"],Fi=U.createElement("div").style,ur={};function Un(a){for(var d=a[0].toUpperCase()+a.slice(1),p=Bs.length;p--;)if(a=Bs[p]+d,a in Fi)return a}function Qr(a){var d=f.cssProps[a]||ur[a];return d||(a in Fi?a:ur[a]=Un(a)||a)}var oc=/^(none|table(?!-c[ea]).+)/,Zo={position:"absolute",visibility:"hidden",display:"block"},Hs={letterSpacing:"0",fontWeight:"400"};function js(a,d,p){var v=sn.exec(d);return v?Math.max(0,v[2]-(p||0))+(v[3]||"px"):d}function Yr(a,d,p,v,_,E){var T=d==="width"?1:0,N=0,D=0,F=0;if(p===(v?"border":"content"))return 0;for(;T<4;T+=2)p==="margin"&&(F+=f.css(a,p+Qt[T],!0,_)),v?(p==="content"&&(D-=f.css(a,"padding"+Qt[T],!0,_)),p!=="margin"&&(D-=f.css(a,"border"+Qt[T]+"Width",!0,_))):(D+=f.css(a,"padding"+Qt[T],!0,_),p!=="padding"?D+=f.css(a,"border"+Qt[T]+"Width",!0,_):N+=f.css(a,"border"+Qt[T]+"Width",!0,_));return!v&&E>=0&&(D+=Math.max(0,Math.ceil(a["offset"+d[0].toUpperCase()+d.slice(1)]-E-D-N-.5))||0),D+F}function Ui(a,d,p){var v=cr(a),_=!C.boxSizingReliable()||p,E=_&&f.css(a,"boxSizing",!1,v)==="border-box",T=E,N=$r(a,d,v),D="offset"+d[0].toUpperCase()+d.slice(1);if(Li.test(N)){if(!p)return N;N="auto"}return(!C.boxSizingReliable()&&E||!C.reliableTrDimensions()&&k(a,"tr")||N==="auto"||!parseFloat(N)&&f.css(a,"display",!1,v)==="inline")&&a.getClientRects().length&&(E=f.css(a,"boxSizing",!1,v)==="border-box",T=D in a,T&&(N=a[D])),N=parseFloat(N)||0,N+Yr(a,d,p||(E?"border":"content"),T,v,N)+"px"}f.extend({cssHooks:{opacity:{get:function(a,d){if(d){var p=$r(a,"opacity");return p===""?"1":p}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(a,d,p,v){if(!(!a||a.nodeType===3||a.nodeType===8||!a.style)){var _,E,T,N=Gt(d),D=qr.test(d),F=a.style;if(D||(d=Qr(N)),T=f.cssHooks[d]||f.cssHooks[N],p!==void 0){if(E=typeof p,E==="string"&&(_=sn.exec(p))&&_[1]&&(p=ki(a,d,_),E="number"),p==null||p!==p)return;E==="number"&&!D&&(p+=_&&_[3]||(f.cssNumber[N]?"":"px")),!C.clearCloneStyle&&p===""&&d.indexOf("background")===0&&(F[d]="inherit"),(!T||!("set"in T)||(p=T.set(a,p,v))!==void 0)&&(D?F.setProperty(d,p):F[d]=p)}else return T&&"get"in T&&(_=T.get(a,!1,v))!==void 0?_:F[d]}},css:function(a,d,p,v){var _,E,T,N=Gt(d),D=qr.test(d);return D||(d=Qr(N)),T=f.cssHooks[d]||f.cssHooks[N],T&&"get"in T&&(_=T.get(a,!0,p)),_===void 0&&(_=$r(a,d,v)),_==="normal"&&d in Hs&&(_=Hs[d]),p===""||p?(E=parseFloat(_),p===!0||isFinite(E)?E||0:_):_}}),f.each(["height","width"],function(a,d){f.cssHooks[d]={get:function(p,v,_){if(v)return oc.test(f.css(p,"display"))&&(!p.getClientRects().length||!p.getBoundingClientRect().width)?Us(p,Zo,function(){return Ui(p,d,_)}):Ui(p,d,_)},set:function(p,v,_){var E,T=cr(p),N=!C.scrollboxSize()&&T.position==="absolute",D=N||_,F=D&&f.css(p,"boxSizing",!1,T)==="border-box",Q=_?Yr(p,d,_,F,T):0;return F&&N&&(Q-=Math.ceil(p["offset"+d[0].toUpperCase()+d.slice(1)]-parseFloat(T[d])-Yr(p,d,"border",!1,T)-.5)),Q&&(E=sn.exec(v))&&(E[3]||"px")!=="px"&&(p.style[d]=v,v=f.css(p,d)),js(p,v,Q)}}}),f.cssHooks.marginLeft=Gr(C.reliableMarginLeft,function(a,d){if(d)return(parseFloat($r(a,"marginLeft"))||a.getBoundingClientRect().left-Us(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),f.each({margin:"",padding:"",border:"Width"},function(a,d){f.cssHooks[a+d]={expand:function(p){for(var v=0,_={},E=typeof p=="string"?p.split(" "):[p];v<4;v++)_[a+Qt[v]+d]=E[v]||E[v-2]||E[0];return _}},a!=="margin"&&(f.cssHooks[a+d].set=js)}),f.fn.extend({css:function(a,d){return rn(this,function(p,v,_){var E,T,N={},D=0;if(Array.isArray(v)){for(E=cr(p),T=v.length;D<T;D++)N[v[D]]=f.css(p,v[D],!1,E);return N}return _!==void 0?f.style(p,v,_):f.css(p,v)},a,d,arguments.length>1)}});function gt(a,d,p,v,_){return new gt.prototype.init(a,d,p,v,_)}f.Tween=gt,gt.prototype={constructor:gt,init:function(a,d,p,v,_,E){this.elem=a,this.prop=p,this.easing=_||f.easing._default,this.options=d,this.start=this.now=this.cur(),this.end=v,this.unit=E||(f.cssNumber[p]?"":"px")},cur:function(){var a=gt.propHooks[this.prop];return a&&a.get?a.get(this):gt.propHooks._default.get(this)},run:function(a){var d,p=gt.propHooks[this.prop];return this.options.duration?this.pos=d=f.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=d=a,this.now=(this.end-this.start)*d+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),p&&p.set?p.set(this):gt.propHooks._default.set(this),this}},gt.prototype.init.prototype=gt.prototype,gt.propHooks={_default:{get:function(a){var d;return a.elem.nodeType!==1||a.elem[a.prop]!=null&&a.elem.style[a.prop]==null?a.elem[a.prop]:(d=f.css(a.elem,a.prop,""),!d||d==="auto"?0:d)},set:function(a){f.fx.step[a.prop]?f.fx.step[a.prop](a):a.elem.nodeType===1&&(f.cssHooks[a.prop]||a.elem.style[Qr(a.prop)]!=null)?f.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},gt.propHooks.scrollTop=gt.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},f.easing={linear:function(a){return a},swing:function(a){return .5-Math.cos(a*Math.PI)/2},_default:"swing"},f.fx=gt.prototype.init,f.fx.step={};var Bn,Bi,ac=/^(?:toggle|show|hide)$/,ea=/queueHooks$/;function Hi(){Bi&&(U.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(Hi):e.setTimeout(Hi,f.fx.interval),f.fx.tick())}function ta(){return e.setTimeout(function(){Bn=void 0}),Bn=Date.now()}function Xt(a,d){var p,v=0,_={height:a};for(d=d?1:0;v<4;v+=2-d)p=Qt[v],_["margin"+p]=_["padding"+p]=a;return d&&(_.opacity=_.width=a),_}function Jt(a,d,p){for(var v,_=(Ot.tweeners[d]||[]).concat(Ot.tweeners["*"]),E=0,T=_.length;E<T;E++)if(v=_[E].call(p,d,a))return v}function ji(a,d,p){var v,_,E,T,N,D,F,Q,Y="width"in d||"height"in d,W=this,ee={},me=a.style,ke=a.nodeType&&Di(a),Ee=ce.get(a,"fxshow");p.queue||(T=f._queueHooks(a,"fx"),T.unqueued==null&&(T.unqueued=0,N=T.empty.fire,T.empty.fire=function(){T.unqueued||N()}),T.unqueued++,W.always(function(){W.always(function(){T.unqueued--,f.queue(a,"fx").length||T.empty.fire()})}));for(v in d)if(_=d[v],ac.test(_)){if(delete d[v],E=E||_==="toggle",_===(ke?"hide":"show"))if(_==="show"&&Ee&&Ee[v]!==void 0)ke=!0;else continue;ee[v]=Ee&&Ee[v]||f.style(a,v)}if(D=!f.isEmptyObject(d),!(!D&&f.isEmptyObject(ee))){Y&&a.nodeType===1&&(p.overflow=[me.overflow,me.overflowX,me.overflowY],F=Ee&&Ee.display,F==null&&(F=ce.get(a,"display")),Q=f.css(a,"display"),Q==="none"&&(F?Q=F:(Yt([a],!0),F=a.style.display||F,Q=f.css(a,"display"),Yt([a]))),(Q==="inline"||Q==="inline-block"&&F!=null)&&f.css(a,"float")==="none"&&(D||(W.done(function(){me.display=F}),F==null&&(Q=me.display,F=Q==="none"?"":Q)),me.display="inline-block")),p.overflow&&(me.overflow="hidden",W.always(function(){me.overflow=p.overflow[0],me.overflowX=p.overflow[1],me.overflowY=p.overflow[2]})),D=!1;for(v in ee)D||(Ee?"hidden"in Ee&&(ke=Ee.hidden):Ee=ce.access(a,"fxshow",{display:F}),E&&(Ee.hidden=!ke),ke&&Yt([a],!0),W.done(function(){ke||Yt([a]),ce.remove(a,"fxshow");for(v in ee)f.style(a,v,ee[v])})),D=Jt(ke?Ee[v]:0,v,W),v in Ee||(Ee[v]=D.start,ke&&(D.end=D.start,D.start=0))}}function zi(a,d){var p,v,_,E,T;for(p in a)if(v=Gt(p),_=d[v],E=a[p],Array.isArray(E)&&(_=E[1],E=a[p]=E[0]),p!==v&&(a[v]=E,delete a[p]),T=f.cssHooks[v],T&&"expand"in T){E=T.expand(E),delete a[v];for(p in E)p in a||(a[p]=E[p],d[p]=_)}else d[v]=_}function Ot(a,d,p){var v,_,E=0,T=Ot.prefilters.length,N=f.Deferred().always(function(){delete D.elem}),D=function(){if(_)return!1;for(var Y=Bn||ta(),W=Math.max(0,F.startTime+F.duration-Y),ee=W/F.duration||0,me=1-ee,ke=0,Ee=F.tweens.length;ke<Ee;ke++)F.tweens[ke].run(me);return N.notifyWith(a,[F,me,W]),me<1&&Ee?W:(Ee||N.notifyWith(a,[F,1,0]),N.resolveWith(a,[F]),!1)},F=N.promise({elem:a,props:f.extend({},d),opts:f.extend(!0,{specialEasing:{},easing:f.easing._default},p),originalProperties:d,originalOptions:p,startTime:Bn||ta(),duration:p.duration,tweens:[],createTween:function(Y,W){var ee=f.Tween(a,F.opts,Y,W,F.opts.specialEasing[Y]||F.opts.easing);return F.tweens.push(ee),ee},stop:function(Y){var W=0,ee=Y?F.tweens.length:0;if(_)return this;for(_=!0;W<ee;W++)F.tweens[W].run(1);return Y?(N.notifyWith(a,[F,1,0]),N.resolveWith(a,[F,Y])):N.rejectWith(a,[F,Y]),this}}),Q=F.props;for(zi(Q,F.opts.specialEasing);E<T;E++)if(v=Ot.prefilters[E].call(F,a,Q,F.opts),v)return P(v.stop)&&(f._queueHooks(F.elem,F.opts.queue).stop=v.stop.bind(v)),v;return f.map(Q,Jt,F),P(F.opts.start)&&F.opts.start.call(a,F),F.progress(F.opts.progress).done(F.opts.done,F.opts.complete).fail(F.opts.fail).always(F.opts.always),f.fx.timer(f.extend(D,{elem:a,anim:F,queue:F.opts.queue})),F}f.Animation=f.extend(Ot,{tweeners:{"*":[function(a,d){var p=this.createTween(a,d);return ki(p.elem,a,sn.exec(d),p),p}]},tweener:function(a,d){P(a)?(d=a,a=["*"]):a=a.match(Rt);for(var p,v=0,_=a.length;v<_;v++)p=a[v],Ot.tweeners[p]=Ot.tweeners[p]||[],Ot.tweeners[p].unshift(d)},prefilters:[ji],prefilter:function(a,d){d?Ot.prefilters.unshift(a):Ot.prefilters.push(a)}}),f.speed=function(a,d,p){var v=a&&typeof a=="object"?f.extend({},a):{complete:p||!p&&d||P(a)&&a,duration:a,easing:p&&d||d&&!P(d)&&d};return f.fx.off?v.duration=0:typeof v.duration!="number"&&(v.duration in f.fx.speeds?v.duration=f.fx.speeds[v.duration]:v.duration=f.fx.speeds._default),(v.queue==null||v.queue===!0)&&(v.queue="fx"),v.old=v.complete,v.complete=function(){P(v.old)&&v.old.call(this),v.queue&&f.dequeue(this,v.queue)},v},f.fn.extend({fadeTo:function(a,d,p,v){return this.filter(Di).css("opacity",0).show().end().animate({opacity:d},a,p,v)},animate:function(a,d,p,v){var _=f.isEmptyObject(a),E=f.speed(d,p,v),T=function(){var N=Ot(this,f.extend({},a),E);(_||ce.get(this,"finish"))&&N.stop(!0)};return T.finish=T,_||E.queue===!1?this.each(T):this.queue(E.queue,T)},stop:function(a,d,p){var v=function(_){var E=_.stop;delete _.stop,E(p)};return typeof a!="string"&&(p=d,d=a,a=void 0),d&&this.queue(a||"fx",[]),this.each(function(){var _=!0,E=a!=null&&a+"queueHooks",T=f.timers,N=ce.get(this);if(E)N[E]&&N[E].stop&&v(N[E]);else for(E in N)N[E]&&N[E].stop&&ea.test(E)&&v(N[E]);for(E=T.length;E--;)T[E].elem===this&&(a==null||T[E].queue===a)&&(T[E].anim.stop(p),_=!1,T.splice(E,1));(_||!p)&&f.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var d,p=ce.get(this),v=p[a+"queue"],_=p[a+"queueHooks"],E=f.timers,T=v?v.length:0;for(p.finish=!0,f.queue(this,a,[]),_&&_.stop&&_.stop.call(this,!0),d=E.length;d--;)E[d].elem===this&&E[d].queue===a&&(E[d].anim.stop(!0),E.splice(d,1));for(d=0;d<T;d++)v[d]&&v[d].finish&&v[d].finish.call(this);delete p.finish})}}),f.each(["toggle","show","hide"],function(a,d){var p=f.fn[d];f.fn[d]=function(v,_,E){return v==null||typeof v=="boolean"?p.apply(this,arguments):this.animate(Xt(d,!0),v,_,E)}}),f.each({slideDown:Xt("show"),slideUp:Xt("hide"),slideToggle:Xt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,d){f.fn[a]=function(p,v,_){return this.animate(d,p,v,_)}}),f.timers=[],f.fx.tick=function(){var a,d=0,p=f.timers;for(Bn=Date.now();d<p.length;d++)a=p[d],!a()&&p[d]===a&&p.splice(d--,1);p.length||f.fx.stop(),Bn=void 0},f.fx.timer=function(a){f.timers.push(a),f.fx.start()},f.fx.interval=13,f.fx.start=function(){Bi||(Bi=!0,Hi())},f.fx.stop=function(){Bi=null},f.fx.speeds={slow:600,fast:200,_default:400},f.fn.delay=function(a,d){return a=f.fx&&f.fx.speeds[a]||a,d=d||"fx",this.queue(d,function(p,v){var _=e.setTimeout(p,a);v.stop=function(){e.clearTimeout(_)}})},function(){var a=U.createElement("input"),d=U.createElement("select"),p=d.appendChild(U.createElement("option"));a.type="checkbox",C.checkOn=a.value!=="",C.optSelected=p.selected,a=U.createElement("input"),a.value="t",a.type="radio",C.radioValue=a.value==="t"}();var je,vn=f.expr.attrHandle;f.fn.extend({attr:function(a,d){return rn(this,f.attr,a,d,arguments.length>1)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})}}),f.extend({attr:function(a,d,p){var v,_,E=a.nodeType;if(!(E===3||E===8||E===2)){if(typeof a.getAttribute>"u")return f.prop(a,d,p);if((E!==1||!f.isXMLDoc(a))&&(_=f.attrHooks[d.toLowerCase()]||(f.expr.match.bool.test(d)?je:void 0)),p!==void 0){if(p===null){f.removeAttr(a,d);return}return _&&"set"in _&&(v=_.set(a,p,d))!==void 0?v:(a.setAttribute(d,p+""),p)}return _&&"get"in _&&(v=_.get(a,d))!==null?v:(v=f.find.attr(a,d),v??void 0)}},attrHooks:{type:{set:function(a,d){if(!C.radioValue&&d==="radio"&&k(a,"input")){var p=a.value;return a.setAttribute("type",d),p&&(a.value=p),d}}}},removeAttr:function(a,d){var p,v=0,_=d&&d.match(Rt);if(_&&a.nodeType===1)for(;p=_[v++];)a.removeAttribute(p)}}),je={set:function(a,d,p){return d===!1?f.removeAttr(a,p):a.setAttribute(p,p),p}},f.each(f.expr.match.bool.source.match(/\w+/g),function(a,d){var p=vn[d]||f.find.attr;vn[d]=function(v,_,E){var T,N,D=_.toLowerCase();return E||(N=vn[D],vn[D]=T,T=p(v,_,E)!=null?D:null,vn[D]=N),T}});var Kr=/^(?:input|select|textarea|button)$/i,Xr=/^(?:a|area)$/i;f.fn.extend({prop:function(a,d){return rn(this,f.prop,a,d,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[f.propFix[a]||a]})}}),f.extend({prop:function(a,d,p){var v,_,E=a.nodeType;if(!(E===3||E===8||E===2))return(E!==1||!f.isXMLDoc(a))&&(d=f.propFix[d]||d,_=f.propHooks[d]),p!==void 0?_&&"set"in _&&(v=_.set(a,p,d))!==void 0?v:a[d]=p:_&&"get"in _&&(v=_.get(a,d))!==null?v:a[d]},propHooks:{tabIndex:{get:function(a){var d=f.find.attr(a,"tabindex");return d?parseInt(d,10):Kr.test(a.nodeName)||Xr.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),C.optSelected||(f.propHooks.selected={get:function(a){var d=a.parentNode;return d&&d.parentNode&&d.parentNode.selectedIndex,null},set:function(a){var d=a.parentNode;d&&(d.selectedIndex,d.parentNode&&d.parentNode.selectedIndex)}}),f.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){f.propFix[this.toLowerCase()]=this});function Hn(a){var d=a.match(Rt)||[];return d.join(" ")}function yn(a){return a.getAttribute&&a.getAttribute("class")||""}function zs(a){return Array.isArray(a)?a:typeof a=="string"?a.match(Rt)||[]:[]}f.fn.extend({addClass:function(a){var d,p,v,_,E,T;return P(a)?this.each(function(N){f(this).addClass(a.call(this,N,yn(this)))}):(d=zs(a),d.length?this.each(function(){if(v=yn(this),p=this.nodeType===1&&" "+Hn(v)+" ",p){for(E=0;E<d.length;E++)_=d[E],p.indexOf(" "+_+" ")<0&&(p+=_+" ");T=Hn(p),v!==T&&this.setAttribute("class",T)}}):this)},removeClass:function(a){var d,p,v,_,E,T;return P(a)?this.each(function(N){f(this).removeClass(a.call(this,N,yn(this)))}):arguments.length?(d=zs(a),d.length?this.each(function(){if(v=yn(this),p=this.nodeType===1&&" "+Hn(v)+" ",p){for(E=0;E<d.length;E++)for(_=d[E];p.indexOf(" "+_+" ")>-1;)p=p.replace(" "+_+" "," ");T=Hn(p),v!==T&&this.setAttribute("class",T)}}):this):this.attr("class","")},toggleClass:function(a,d){var p,v,_,E,T=typeof a,N=T==="string"||Array.isArray(a);return P(a)?this.each(function(D){f(this).toggleClass(a.call(this,D,yn(this),d),d)}):typeof d=="boolean"&&N?d?this.addClass(a):this.removeClass(a):(p=zs(a),this.each(function(){if(N)for(E=f(this),_=0;_<p.length;_++)v=p[_],E.hasClass(v)?E.removeClass(v):E.addClass(v);else(a===void 0||T==="boolean")&&(v=yn(this),v&&ce.set(this,"__className__",v),this.setAttribute&&this.setAttribute("class",v||a===!1?"":ce.get(this,"__className__")||""))}))},hasClass:function(a){var d,p,v=0;for(d=" "+a+" ";p=this[v++];)if(p.nodeType===1&&(" "+Hn(yn(p))+" ").indexOf(d)>-1)return!0;return!1}});var lc=/\r/g;f.fn.extend({val:function(a){var d,p,v,_=this[0];return arguments.length?(v=P(a),this.each(function(E){var T;this.nodeType===1&&(v?T=a.call(this,E,f(this).val()):T=a,T==null?T="":typeof T=="number"?T+="":Array.isArray(T)&&(T=f.map(T,function(N){return N==null?"":N+""})),d=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()],(!d||!("set"in d)||d.set(this,T,"value")===void 0)&&(this.value=T))})):_?(d=f.valHooks[_.type]||f.valHooks[_.nodeName.toLowerCase()],d&&"get"in d&&(p=d.get(_,"value"))!==void 0?p:(p=_.value,typeof p=="string"?p.replace(lc,""):p??"")):void 0}}),f.extend({valHooks:{option:{get:function(a){var d=f.find.attr(a,"value");return d??Hn(f.text(a))}},select:{get:function(a){var d,p,v,_=a.options,E=a.selectedIndex,T=a.type==="select-one",N=T?null:[],D=T?E+1:_.length;for(E<0?v=D:v=T?E:0;v<D;v++)if(p=_[v],(p.selected||v===E)&&!p.disabled&&(!p.parentNode.disabled||!k(p.parentNode,"optgroup"))){if(d=f(p).val(),T)return d;N.push(d)}return N},set:function(a,d){for(var p,v,_=a.options,E=f.makeArray(d),T=_.length;T--;)v=_[T],(v.selected=f.inArray(f.valHooks.option.get(v),E)>-1)&&(p=!0);return p||(a.selectedIndex=-1),E}}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]={set:function(a,d){if(Array.isArray(d))return a.checked=f.inArray(f(a).val(),d)>-1}},C.checkOn||(f.valHooks[this].get=function(a){return a.getAttribute("value")===null?"on":a.value})});var Jr=e.location,na={guid:Date.now()},jn=/\?/;f.parseXML=function(a){var d,p;if(!a||typeof a!="string")return null;try{d=new e.DOMParser().parseFromString(a,"text/xml")}catch{}return p=d&&d.getElementsByTagName("parsererror")[0],(!d||p)&&f.error("Invalid XML: "+(p?f.map(p.childNodes,function(v){return v.textContent}).join(`
`):a)),d};var on=/^(?:focusinfocus|focusoutblur)$/,Ws=function(a){a.stopPropagation()};f.extend(f.event,{trigger:function(a,d,p,v){var _,E,T,N,D,F,Q,Y,W=[p||U],ee=b.call(a,"type")?a.type:a,me=b.call(a,"namespace")?a.namespace.split("."):[];if(E=Y=T=p=p||U,!(p.nodeType===3||p.nodeType===8)&&!on.test(ee+f.event.triggered)&&(ee.indexOf(".")>-1&&(me=ee.split("."),ee=me.shift(),me.sort()),D=ee.indexOf(":")<0&&"on"+ee,a=a[f.expando]?a:new f.Event(ee,typeof a=="object"&&a),a.isTrigger=v?2:3,a.namespace=me.join("."),a.rnamespace=a.namespace?new RegExp("(^|\\.)"+me.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,a.target||(a.target=p),d=d==null?[a]:f.makeArray(d,[a]),Q=f.event.special[ee]||{},!(!v&&Q.trigger&&Q.trigger.apply(p,d)===!1))){if(!v&&!Q.noBubble&&!O(p)){for(N=Q.delegateType||ee,on.test(N+ee)||(E=E.parentNode);E;E=E.parentNode)W.push(E),T=E;T===(p.ownerDocument||U)&&W.push(T.defaultView||T.parentWindow||e)}for(_=0;(E=W[_++])&&!a.isPropagationStopped();)Y=E,a.type=_>1?N:Q.bindType||ee,F=(ce.get(E,"events")||Object.create(null))[a.type]&&ce.get(E,"handle"),F&&F.apply(E,d),F=D&&E[D],F&&F.apply&&Mn(E)&&(a.result=F.apply(E,d),a.result===!1&&a.preventDefault());return a.type=ee,!v&&!a.isDefaultPrevented()&&(!Q._default||Q._default.apply(W.pop(),d)===!1)&&Mn(p)&&D&&P(p[ee])&&!O(p)&&(T=p[D],T&&(p[D]=null),f.event.triggered=ee,a.isPropagationStopped()&&Y.addEventListener(ee,Ws),p[ee](),a.isPropagationStopped()&&Y.removeEventListener(ee,Ws),f.event.triggered=void 0,T&&(p[D]=T)),a.result}},simulate:function(a,d,p){var v=f.extend(new f.Event,p,{type:a,isSimulated:!0});f.event.trigger(v,null,d)}}),f.fn.extend({trigger:function(a,d){return this.each(function(){f.event.trigger(a,d,this)})},triggerHandler:function(a,d){var p=this[0];if(p)return f.event.trigger(a,d,p,!0)}});var ra=/\[\]$/,qs=/\r?\n/g,dr=/^(?:submit|button|image|reset|file)$/i,cc=/^(?:input|select|textarea|keygen)/i;function $s(a,d,p,v){var _;if(Array.isArray(d))f.each(d,function(E,T){p||ra.test(a)?v(a,T):$s(a+"["+(typeof T=="object"&&T!=null?E:"")+"]",T,p,v)});else if(!p&&ie(d)==="object")for(_ in d)$s(a+"["+_+"]",d[_],p,v);else v(a,d)}f.param=function(a,d){var p,v=[],_=function(E,T){var N=P(T)?T():T;v[v.length]=encodeURIComponent(E)+"="+encodeURIComponent(N??"")};if(a==null)return"";if(Array.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){_(this.name,this.value)});else for(p in a)$s(p,a[p],d,_);return v.join("&")},f.fn.extend({serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=f.prop(this,"elements");return a?f.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!f(this).is(":disabled")&&cc.test(this.nodeName)&&!dr.test(a)&&(this.checked||!Vn.test(a))}).map(function(a,d){var p=f(this).val();return p==null?null:Array.isArray(p)?f.map(p,function(v){return{name:d.name,value:v.replace(qs,`\r
`)}}):{name:d.name,value:p.replace(qs,`\r
`)}}).get()}});var uc=/%20/g,_n=/#.*$/,dc=/([?&])_=[^&]*/,hc=/^(.*?):[ \t]*([^\r\n]*)$/mg,Wi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,qi=/^(?:GET|HEAD)$/,ia=/^\/\//,hr={},zn={},Gs="*/".concat("*"),Zr=U.createElement("a");Zr.href=Jr.href;function Ge(a){return function(d,p){typeof d!="string"&&(p=d,d="*");var v,_=0,E=d.toLowerCase().match(Rt)||[];if(P(p))for(;v=E[_++];)v[0]==="+"?(v=v.slice(1)||"*",(a[v]=a[v]||[]).unshift(p)):(a[v]=a[v]||[]).push(p)}}function sa(a,d,p,v){var _={},E=a===zn;function T(N){var D;return _[N]=!0,f.each(a[N]||[],function(F,Q){var Y=Q(d,p,v);if(typeof Y=="string"&&!E&&!_[Y])return d.dataTypes.unshift(Y),T(Y),!1;if(E)return!(D=Y)}),D}return T(d.dataTypes[0])||!_["*"]&&T("*")}function Qs(a,d){var p,v,_=f.ajaxSettings.flatOptions||{};for(p in d)d[p]!==void 0&&((_[p]?a:v||(v={}))[p]=d[p]);return v&&f.extend(!0,a,v),a}function oa(a,d,p){for(var v,_,E,T,N=a.contents,D=a.dataTypes;D[0]==="*";)D.shift(),v===void 0&&(v=a.mimeType||d.getResponseHeader("Content-Type"));if(v){for(_ in N)if(N[_]&&N[_].test(v)){D.unshift(_);break}}if(D[0]in p)E=D[0];else{for(_ in p){if(!D[0]||a.converters[_+" "+D[0]]){E=_;break}T||(T=_)}E=E||T}if(E)return E!==D[0]&&D.unshift(E),p[E]}function aa(a,d,p,v){var _,E,T,N,D,F={},Q=a.dataTypes.slice();if(Q[1])for(T in a.converters)F[T.toLowerCase()]=a.converters[T];for(E=Q.shift();E;)if(a.responseFields[E]&&(p[a.responseFields[E]]=d),!D&&v&&a.dataFilter&&(d=a.dataFilter(d,a.dataType)),D=E,E=Q.shift(),E){if(E==="*")E=D;else if(D!=="*"&&D!==E){if(T=F[D+" "+E]||F["* "+E],!T){for(_ in F)if(N=_.split(" "),N[1]===E&&(T=F[D+" "+N[0]]||F["* "+N[0]],T)){T===!0?T=F[_]:F[_]!==!0&&(E=N[0],Q.unshift(N[1]));break}}if(T!==!0)if(T&&a.throws)d=T(d);else try{d=T(d)}catch(Y){return{state:"parsererror",error:T?Y:"No conversion from "+D+" to "+E}}}}return{state:"success",data:d}}f.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Jr.href,type:"GET",isLocal:Wi.test(Jr.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gs,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":f.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,d){return d?Qs(Qs(a,f.ajaxSettings),d):Qs(f.ajaxSettings,a)},ajaxPrefilter:Ge(hr),ajaxTransport:Ge(zn),ajax:function(a,d){typeof a=="object"&&(d=a,a=void 0),d=d||{};var p,v,_,E,T,N,D,F,Q,Y,W=f.ajaxSetup({},d),ee=W.context||W,me=W.context&&(ee.nodeType||ee.jquery)?f(ee):f.event,ke=f.Deferred(),Ee=f.Callbacks("once memory"),rt=W.statusCode||{},Ze={},Ht={},jt="canceled",Ce={readyState:0,getResponseHeader:function(Ne){var Qe;if(D){if(!E)for(E={};Qe=hc.exec(_);)E[Qe[1].toLowerCase()+" "]=(E[Qe[1].toLowerCase()+" "]||[]).concat(Qe[2]);Qe=E[Ne.toLowerCase()+" "]}return Qe==null?null:Qe.join(", ")},getAllResponseHeaders:function(){return D?_:null},setRequestHeader:function(Ne,Qe){return D==null&&(Ne=Ht[Ne.toLowerCase()]=Ht[Ne.toLowerCase()]||Ne,Ze[Ne]=Qe),this},overrideMimeType:function(Ne){return D==null&&(W.mimeType=Ne),this},statusCode:function(Ne){var Qe;if(Ne)if(D)Ce.always(Ne[Ce.status]);else for(Qe in Ne)rt[Qe]=[rt[Qe],Ne[Qe]];return this},abort:function(Ne){var Qe=Ne||jt;return p&&p.abort(Qe),et(0,Qe),this}};if(ke.promise(Ce),W.url=((a||W.url||Jr.href)+"").replace(ia,Jr.protocol+"//"),W.type=d.method||d.type||W.method||W.type,W.dataTypes=(W.dataType||"*").toLowerCase().match(Rt)||[""],W.crossDomain==null){N=U.createElement("a");try{N.href=W.url,N.href=N.href,W.crossDomain=Zr.protocol+"//"+Zr.host!=N.protocol+"//"+N.host}catch{W.crossDomain=!0}}if(W.data&&W.processData&&typeof W.data!="string"&&(W.data=f.param(W.data,W.traditional)),sa(hr,W,d,Ce),D)return Ce;F=f.event&&W.global,F&&f.active++===0&&f.event.trigger("ajaxStart"),W.type=W.type.toUpperCase(),W.hasContent=!qi.test(W.type),v=W.url.replace(_n,""),W.hasContent?W.data&&W.processData&&(W.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(W.data=W.data.replace(uc,"+")):(Y=W.url.slice(v.length),W.data&&(W.processData||typeof W.data=="string")&&(v+=(jn.test(v)?"&":"?")+W.data,delete W.data),W.cache===!1&&(v=v.replace(dc,"$1"),Y=(jn.test(v)?"&":"?")+"_="+na.guid+++Y),W.url=v+Y),W.ifModified&&(f.lastModified[v]&&Ce.setRequestHeader("If-Modified-Since",f.lastModified[v]),f.etag[v]&&Ce.setRequestHeader("If-None-Match",f.etag[v])),(W.data&&W.hasContent&&W.contentType!==!1||d.contentType)&&Ce.setRequestHeader("Content-Type",W.contentType),Ce.setRequestHeader("Accept",W.dataTypes[0]&&W.accepts[W.dataTypes[0]]?W.accepts[W.dataTypes[0]]+(W.dataTypes[0]!=="*"?", "+Gs+"; q=0.01":""):W.accepts["*"]);for(Q in W.headers)Ce.setRequestHeader(Q,W.headers[Q]);if(W.beforeSend&&(W.beforeSend.call(ee,Ce,W)===!1||D))return Ce.abort();if(jt="abort",Ee.add(W.complete),Ce.done(W.success),Ce.fail(W.error),p=sa(zn,W,d,Ce),!p)et(-1,"No Transport");else{if(Ce.readyState=1,F&&me.trigger("ajaxSend",[Ce,W]),D)return Ce;W.async&&W.timeout>0&&(T=e.setTimeout(function(){Ce.abort("timeout")},W.timeout));try{D=!1,p.send(Ze,et)}catch(Ne){if(D)throw Ne;et(-1,Ne)}}function et(Ne,Qe,Zt,c){var m,y,S,H,q,ne=Qe;D||(D=!0,T&&e.clearTimeout(T),p=void 0,_=c||"",Ce.readyState=Ne>0?4:0,m=Ne>=200&&Ne<300||Ne===304,Zt&&(H=oa(W,Ce,Zt)),!m&&f.inArray("script",W.dataTypes)>-1&&f.inArray("json",W.dataTypes)<0&&(W.converters["text script"]=function(){}),H=aa(W,H,Ce,m),m?(W.ifModified&&(q=Ce.getResponseHeader("Last-Modified"),q&&(f.lastModified[v]=q),q=Ce.getResponseHeader("etag"),q&&(f.etag[v]=q)),Ne===204||W.type==="HEAD"?ne="nocontent":Ne===304?ne="notmodified":(ne=H.state,y=H.data,S=H.error,m=!S)):(S=ne,(Ne||!ne)&&(ne="error",Ne<0&&(Ne=0))),Ce.status=Ne,Ce.statusText=(Qe||ne)+"",m?ke.resolveWith(ee,[y,ne,Ce]):ke.rejectWith(ee,[Ce,ne,S]),Ce.statusCode(rt),rt=void 0,F&&me.trigger(m?"ajaxSuccess":"ajaxError",[Ce,W,m?y:S]),Ee.fireWith(ee,[Ce,ne]),F&&(me.trigger("ajaxComplete",[Ce,W]),--f.active||f.event.trigger("ajaxStop")))}return Ce},getJSON:function(a,d,p){return f.get(a,d,p,"json")},getScript:function(a,d){return f.get(a,void 0,d,"script")}}),f.each(["get","post"],function(a,d){f[d]=function(p,v,_,E){return P(v)&&(E=E||_,_=v,v=void 0),f.ajax(f.extend({url:p,type:d,dataType:E,data:v,success:_},f.isPlainObject(p)&&p))}}),f.ajaxPrefilter(function(a){var d;for(d in a.headers)d.toLowerCase()==="content-type"&&(a.contentType=a.headers[d]||"")}),f._evalUrl=function(a,d,p){return f.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(v){f.globalEval(v,d,p)}})},f.fn.extend({wrapAll:function(a){var d;return this[0]&&(P(a)&&(a=a.call(this[0])),d=f(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var p=this;p.firstElementChild;)p=p.firstElementChild;return p}).append(this)),this},wrapInner:function(a){return P(a)?this.each(function(d){f(this).wrapInner(a.call(this,d))}):this.each(function(){var d=f(this),p=d.contents();p.length?p.wrapAll(a):d.append(a)})},wrap:function(a){var d=P(a);return this.each(function(p){f(this).wrapAll(d?a.call(this,p):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){f(this).replaceWith(this.childNodes)}),this}}),f.expr.pseudos.hidden=function(a){return!f.expr.pseudos.visible(a)},f.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},f.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var la={0:200,1223:204},En=f.ajaxSettings.xhr();C.cors=!!En&&"withCredentials"in En,C.ajax=En=!!En,f.ajaxTransport(function(a){var d,p;if(C.cors||En&&!a.crossDomain)return{send:function(v,_){var E,T=a.xhr();if(T.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(E in a.xhrFields)T[E]=a.xhrFields[E];a.mimeType&&T.overrideMimeType&&T.overrideMimeType(a.mimeType),!a.crossDomain&&!v["X-Requested-With"]&&(v["X-Requested-With"]="XMLHttpRequest");for(E in v)T.setRequestHeader(E,v[E]);d=function(N){return function(){d&&(d=p=T.onload=T.onerror=T.onabort=T.ontimeout=T.onreadystatechange=null,N==="abort"?T.abort():N==="error"?typeof T.status!="number"?_(0,"error"):_(T.status,T.statusText):_(la[T.status]||T.status,T.statusText,(T.responseType||"text")!=="text"||typeof T.responseText!="string"?{binary:T.response}:{text:T.responseText},T.getAllResponseHeaders()))}},T.onload=d(),p=T.onerror=T.ontimeout=d("error"),T.onabort!==void 0?T.onabort=p:T.onreadystatechange=function(){T.readyState===4&&e.setTimeout(function(){d&&p()})},d=d("abort");try{T.send(a.hasContent&&a.data||null)}catch(N){if(d)throw N}},abort:function(){d&&d()}}}),f.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return f.globalEval(a),a}}}),f.ajaxPrefilter("script",function(a){a.cache===void 0&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),f.ajaxTransport("script",function(a){if(a.crossDomain||a.scriptAttrs){var d,p;return{send:function(v,_){d=f("<script>").attr(a.scriptAttrs||{}).prop({charset:a.scriptCharset,src:a.url}).on("load error",p=function(E){d.remove(),p=null,E&&_(E.type==="error"?404:200,E.type)}),U.head.appendChild(d[0])},abort:function(){p&&p()}}}});var Ys=[],Bt=/(=)\?(?=&|$)|\?\?/;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ys.pop()||f.expando+"_"+na.guid++;return this[a]=!0,a}}),f.ajaxPrefilter("json jsonp",function(a,d,p){var v,_,E,T=a.jsonp!==!1&&(Bt.test(a.url)?"url":typeof a.data=="string"&&(a.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Bt.test(a.data)&&"data");if(T||a.dataTypes[0]==="jsonp")return v=a.jsonpCallback=P(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,T?a[T]=a[T].replace(Bt,"$1"+v):a.jsonp!==!1&&(a.url+=(jn.test(a.url)?"&":"?")+a.jsonp+"="+v),a.converters["script json"]=function(){return E||f.error(v+" was not called"),E[0]},a.dataTypes[0]="json",_=e[v],e[v]=function(){E=arguments},p.always(function(){_===void 0?f(e).removeProp(v):e[v]=_,a[v]&&(a.jsonpCallback=d.jsonpCallback,Ys.push(v)),E&&P(_)&&_(E[0]),E=_=void 0}),"script"}),C.createHTMLDocument=function(){var a=U.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",a.childNodes.length===2}(),f.parseHTML=function(a,d,p){if(typeof a!="string")return[];typeof d=="boolean"&&(p=d,d=!1);var v,_,E;return d||(C.createHTMLDocument?(d=U.implementation.createHTMLDocument(""),v=d.createElement("base"),v.href=U.location.href,d.head.appendChild(v)):d=U),_=nn.exec(a),E=!p&&[],_?[d.createElement(_[1])]:(_=Ls([a],d,E),E&&E.length&&f(E).remove(),f.merge([],_.childNodes))},f.fn.load=function(a,d,p){var v,_,E,T=this,N=a.indexOf(" ");return N>-1&&(v=Hn(a.slice(N)),a=a.slice(0,N)),P(d)?(p=d,d=void 0):d&&typeof d=="object"&&(_="POST"),T.length>0&&f.ajax({url:a,type:_||"GET",dataType:"html",data:d}).done(function(D){E=arguments,T.html(v?f("<div>").append(f.parseHTML(D)).find(v):D)}).always(p&&function(D,F){T.each(function(){p.apply(this,E||[D.responseText,F,D])})}),this},f.expr.pseudos.animated=function(a){return f.grep(f.timers,function(d){return a===d.elem}).length},f.offset={setOffset:function(a,d,p){var v,_,E,T,N,D,F,Q=f.css(a,"position"),Y=f(a),W={};Q==="static"&&(a.style.position="relative"),N=Y.offset(),E=f.css(a,"top"),D=f.css(a,"left"),F=(Q==="absolute"||Q==="fixed")&&(E+D).indexOf("auto")>-1,F?(v=Y.position(),T=v.top,_=v.left):(T=parseFloat(E)||0,_=parseFloat(D)||0),P(d)&&(d=d.call(a,p,f.extend({},N))),d.top!=null&&(W.top=d.top-N.top+T),d.left!=null&&(W.left=d.left-N.left+_),"using"in d?d.using.call(a,W):Y.css(W)}},f.fn.extend({offset:function(a){if(arguments.length)return a===void 0?this:this.each(function(_){f.offset.setOffset(this,a,_)});var d,p,v=this[0];if(v)return v.getClientRects().length?(d=v.getBoundingClientRect(),p=v.ownerDocument.defaultView,{top:d.top+p.pageYOffset,left:d.left+p.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var a,d,p,v=this[0],_={top:0,left:0};if(f.css(v,"position")==="fixed")d=v.getBoundingClientRect();else{for(d=this.offset(),p=v.ownerDocument,a=v.offsetParent||p.documentElement;a&&(a===p.body||a===p.documentElement)&&f.css(a,"position")==="static";)a=a.parentNode;a&&a!==v&&a.nodeType===1&&(_=f(a).offset(),_.top+=f.css(a,"borderTopWidth",!0),_.left+=f.css(a,"borderLeftWidth",!0))}return{top:d.top-_.top-f.css(v,"marginTop",!0),left:d.left-_.left-f.css(v,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&f.css(a,"position")==="static";)a=a.offsetParent;return a||pn})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,d){var p=d==="pageYOffset";f.fn[a]=function(v){return rn(this,function(_,E,T){var N;if(O(_)?N=_:_.nodeType===9&&(N=_.defaultView),T===void 0)return N?N[d]:_[E];N?N.scrollTo(p?N.pageXOffset:T,p?T:N.pageYOffset):_[E]=T},a,v,arguments.length)}}),f.each(["top","left"],function(a,d){f.cssHooks[d]=Gr(C.pixelPosition,function(p,v){if(v)return v=$r(p,d),Li.test(v)?f(p).position()[d]+"px":v})}),f.each({Height:"height",Width:"width"},function(a,d){f.each({padding:"inner"+a,content:d,"":"outer"+a},function(p,v){f.fn[v]=function(_,E){var T=arguments.length&&(p||typeof _!="boolean"),N=p||(_===!0||E===!0?"margin":"border");return rn(this,function(D,F,Q){var Y;return O(D)?v.indexOf("outer")===0?D["inner"+a]:D.document.documentElement["client"+a]:D.nodeType===9?(Y=D.documentElement,Math.max(D.body["scroll"+a],Y["scroll"+a],D.body["offset"+a],Y["offset"+a],Y["client"+a])):Q===void 0?f.css(D,F,N):f.style(D,F,Q,N)},d,T?_:void 0,T)}})}),f.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,d){f.fn[d]=function(p){return this.on(d,p)}}),f.fn.extend({bind:function(a,d,p){return this.on(a,null,d,p)},unbind:function(a,d){return this.off(a,null,d)},delegate:function(a,d,p,v){return this.on(d,a,p,v)},undelegate:function(a,d,p){return arguments.length===1?this.off(a,"**"):this.off(d,a||"**",p)},hover:function(a,d){return this.on("mouseenter",a).on("mouseleave",d||a)}}),f.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,d){f.fn[d]=function(p,v){return arguments.length>0?this.on(d,null,p,v):this.trigger(d)}});var ca=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;f.proxy=function(a,d){var p,v,_;if(typeof d=="string"&&(p=a[d],d=a,a=p),!!P(a))return v=s.call(arguments,2),_=function(){return a.apply(d||this,v.concat(s.call(arguments)))},_.guid=a.guid=a.guid||f.guid++,_},f.holdReady=function(a){a?f.readyWait++:f.ready(!0)},f.isArray=Array.isArray,f.parseJSON=JSON.parse,f.nodeName=k,f.isFunction=P,f.isWindow=O,f.camelCase=Gt,f.type=ie,f.now=Date.now,f.isNumeric=function(a){var d=f.type(a);return(d==="number"||d==="string")&&!isNaN(a-parseFloat(a))},f.trim=function(a){return a==null?"":(a+"").replace(ca,"$1")};var fc=e.jQuery,ei=e.$;return f.noConflict=function(a){return e.$===f&&(e.$=ei),a&&e.jQuery===f&&(e.jQuery=fc),f},typeof t>"u"&&(e.jQuery=e.$=f),f})}(Ca)),Ca.exports}var A_=T_();const ve=b_(A_),S_=()=>{};var gh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},I_=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],l=n[t++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Yp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,l=o?n[i+1]:0,u=i+2<n.length,h=u?n[i+2]:0,g=s>>2,b=(s&3)<<4|l>>4;let w=(l&15)<<2|h>>6,A=h&63;u||(A=64,o||(w=64)),r.push(t[g],t[b],t[w],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Qp(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):I_(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],l=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const b=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||l==null||h==null||b==null)throw new C_;const w=s<<2|l>>4;if(r.push(w),h!==64){const A=l<<4&240|h>>2;if(r.push(A),b!==64){const C=h<<6&192|b;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class C_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const R_=function(n){const e=Qp(n);return Yp.encodeByteArray(e,!0)},za=function(n){return R_(n).replace(/\./g,"")},Kp=function(n){try{return Yp.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=()=>D_().__FIREBASE_DEFAULTS__,x_=()=>{if(typeof process>"u"||typeof gh>"u")return;const n=gh.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},P_=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Kp(n[1]);return e&&JSON.parse(e)},Sl=()=>{try{return S_()||k_()||x_()||P_()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Xp=n=>{var e,t;return(t=(e=Sl())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},N_=n=>{const e=Xp(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Jp=()=>{var n;return(n=Sl())===null||n===void 0?void 0:n.config},Zp=n=>{var e;return(e=Sl())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(n){return n.endsWith(".cloudworkstations.dev")}async function eg(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[za(JSON.stringify(t)),za(JSON.stringify(o)),""].join(".")}const io={};function V_(){const n={prod:[],emulator:[]};for(const e of Object.keys(io))io[e]?n.emulator.push(e):n.prod.push(e);return n}function L_(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let mh=!1;function tg(n,e){if(typeof window>"u"||typeof document>"u"||!Io(window.location.host)||io[n]===e||io[n]||mh)return;io[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",s=V_().prod.length>0;function o(){const w=document.getElementById(r);w&&w.remove()}function l(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function u(w,A){w.setAttribute("width","24"),w.setAttribute("id",A),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function h(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{mh=!0,o()},w}function g(w,A){w.setAttribute("id",A),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function b(){const w=L_(r),A=t("text"),C=document.getElementById(A)||document.createElement("span"),P=t("learnmore"),O=document.getElementById(P)||document.createElement("a"),U=t("preprendIcon"),X=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const te=w.element;l(te),g(O,P);const ie=h();u(X,U),te.append(X,C,O,ie),document.body.appendChild(te)}s?(C.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function F_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function U_(){var n;const e=(n=Sl())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function B_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function H_(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function j_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function z_(){const n=St();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function W_(){return!U_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q_(){try{return typeof indexedDB=="object"}catch{return!1}}function $_(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="FirebaseError";class rr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=G_,Object.setPrototypeOf(this,rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Co.prototype.create)}}class Co{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Q_(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new rr(i,l,r)}}function Q_(n,e){return n.replace(Y_,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Y_=/\{\$([^}]+)}/g;function K_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ci(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(vh(s)&&vh(o)){if(!ci(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function vh(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Js(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Zs(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function X_(n,e){const t=new J_(n,e);return t.subscribe.bind(t)}class J_{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Z_(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=_c),i.error===void 0&&(i.error=_c),i.complete===void 0&&(i.complete=_c);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Z_(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function _c(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(n){return n&&n._delegate?n._delegate:n}class ui{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new M_;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nE(e))try{this.getOrInitializeService({instanceIdentifier:ni})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ni){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ni){return this.instances.has(e)}getOptions(e=ni){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tE(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ni){return this.component?this.component.multipleInstances?e:ni:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tE(n){return n===ni?void 0:n}function nE(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new eE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const iE={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},sE=Me.INFO,oE={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},aE=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=oE[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vu{constructor(e){this.name=e,this._logLevel=sE,this._logHandler=aE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const lE=(n,e)=>e.some(t=>n instanceof t);let yh,_h;function cE(){return yh||(yh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uE(){return _h||(_h=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ng=new WeakMap,Qc=new WeakMap,rg=new WeakMap,Ec=new WeakMap,Lu=new WeakMap;function dE(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ar(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&ng.set(t,n)}).catch(()=>{}),Lu.set(e,n),e}function hE(n){if(Qc.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Qc.set(n,e)}let Yc={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Qc.get(n);if(e==="objectStoreNames")return n.objectStoreNames||rg.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ar(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function fE(n){Yc=n(Yc)}function pE(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(bc(this),e,...t);return rg.set(r,e.sort?e.sort():[e]),Ar(r)}:uE().includes(n)?function(...e){return n.apply(bc(this),e),Ar(ng.get(this))}:function(...e){return Ar(n.apply(bc(this),e))}}function gE(n){return typeof n=="function"?pE(n):(n instanceof IDBTransaction&&hE(n),lE(n,cE())?new Proxy(n,Yc):n)}function Ar(n){if(n instanceof IDBRequest)return dE(n);if(Ec.has(n))return Ec.get(n);const e=gE(n);return e!==n&&(Ec.set(n,e),Lu.set(e,n)),e}const bc=n=>Lu.get(n);function mE(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),l=Ar(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ar(o.result),u.oldVersion,u.newVersion,Ar(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const vE=["get","getKey","getAll","getAllKeys","count"],yE=["put","add","delete","clear"],wc=new Map;function Eh(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(wc.get(e))return wc.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=yE.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||vE.includes(t)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[t](...l),i&&u.done]))[0]};return wc.set(e,s),s}fE(n=>({...n,get:(e,t,r)=>Eh(e,t)||n.get(e,t,r),has:(e,t)=>!!Eh(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(EE(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function EE(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kc="@firebase/app",bh="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn=new Vu("@firebase/app"),bE="@firebase/app-compat",wE="@firebase/analytics-compat",TE="@firebase/analytics",AE="@firebase/app-check-compat",SE="@firebase/app-check",IE="@firebase/auth",CE="@firebase/auth-compat",RE="@firebase/database",DE="@firebase/data-connect",kE="@firebase/database-compat",xE="@firebase/functions",PE="@firebase/functions-compat",NE="@firebase/installations",ME="@firebase/installations-compat",OE="@firebase/messaging",VE="@firebase/messaging-compat",LE="@firebase/performance",FE="@firebase/performance-compat",UE="@firebase/remote-config",BE="@firebase/remote-config-compat",HE="@firebase/storage",jE="@firebase/storage-compat",zE="@firebase/firestore",WE="@firebase/ai",qE="@firebase/firestore-compat",$E="firebase",GE="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc="[DEFAULT]",QE={[Kc]:"fire-core",[bE]:"fire-core-compat",[TE]:"fire-analytics",[wE]:"fire-analytics-compat",[SE]:"fire-app-check",[AE]:"fire-app-check-compat",[IE]:"fire-auth",[CE]:"fire-auth-compat",[RE]:"fire-rtdb",[DE]:"fire-data-connect",[kE]:"fire-rtdb-compat",[xE]:"fire-fn",[PE]:"fire-fn-compat",[NE]:"fire-iid",[ME]:"fire-iid-compat",[OE]:"fire-fcm",[VE]:"fire-fcm-compat",[LE]:"fire-perf",[FE]:"fire-perf-compat",[UE]:"fire-rc",[BE]:"fire-rc-compat",[HE]:"fire-gcs",[jE]:"fire-gcs-compat",[zE]:"fire-fst",[qE]:"fire-fst-compat",[WE]:"fire-vertex","fire-js":"fire-js",[$E]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=new Map,YE=new Map,Jc=new Map;function wh(n,e){try{n.container.addComponent(e)}catch(t){Xn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function cs(n){const e=n.name;if(Jc.has(e))return Xn.debug(`There were multiple attempts to register component ${e}.`),!1;Jc.set(e,n);for(const t of Wa.values())wh(t,n);for(const t of YE.values())wh(t,n);return!0}function Fu(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new Co("app","Firebase",KE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=GE;function ig(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xc,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Sr.create("bad-app-name",{appName:String(i)});if(t||(t=Jp()),!t)throw Sr.create("no-options");const s=Wa.get(i);if(s){if(ci(t,s.options)&&ci(r,s.config))return s;throw Sr.create("duplicate-app",{appName:i})}const o=new rE(i);for(const u of Jc.values())o.addComponent(u);const l=new XE(t,r,o);return Wa.set(i,l),l}function sg(n=Xc){const e=Wa.get(n);if(!e&&n===Xc&&Jp())return ig();if(!e)throw Sr.create("no-app",{appName:n});return e}function Ir(n,e,t){var r;let i=(r=QE[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xn.warn(l.join(" "));return}cs(new ui(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="firebase-heartbeat-database",ZE=1,po="firebase-heartbeat-store";let Tc=null;function og(){return Tc||(Tc=mE(JE,ZE,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(po)}catch(t){console.warn(t)}}}}).catch(n=>{throw Sr.create("idb-open",{originalErrorMessage:n.message})})),Tc}async function eb(n){try{const t=(await og()).transaction(po),r=await t.objectStore(po).get(ag(n));return await t.done,r}catch(e){if(e instanceof rr)Xn.warn(e.message);else{const t=Sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xn.warn(t.message)}}}async function Th(n,e){try{const r=(await og()).transaction(po,"readwrite");await r.objectStore(po).put(e,ag(n)),await r.done}catch(t){if(t instanceof rr)Xn.warn(t.message);else{const r=Sr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Xn.warn(r.message)}}}function ag(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=1024,nb=30;class rb{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sb(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ah();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>nb){const o=ob(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ah(),{heartbeatsToSend:r,unsentEntries:i}=ib(this._heartbeatsCache.heartbeats),s=za(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Xn.warn(t),""}}}function Ah(){return new Date().toISOString().substring(0,10)}function ib(n,e=tb){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Sh(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Sh(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class sb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return q_()?$_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eb(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Th(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Th(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Sh(n){return za(JSON.stringify({version:2,heartbeats:n})).length}function ob(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(n){cs(new ui("platform-logger",e=>new _E(e),"PRIVATE")),cs(new ui("heartbeat",e=>new rb(e),"PRIVATE")),Ir(Kc,bh,n),Ir(Kc,bh,"esm2017"),Ir("fire-js","")}ab("");var lb="firebase",cb="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir(lb,cb,"app");function Uu(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function lg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ub=lg,cg=new Co("auth","Firebase",lg());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=new Vu("@firebase/auth");function db(n,...e){qa.logLevel<=Me.WARN&&qa.warn(`Auth (${ws}): ${n}`,...e)}function Ra(n,...e){qa.logLevel<=Me.ERROR&&qa.error(`Auth (${ws}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(n,...e){throw Bu(n,...e)}function An(n,...e){return Bu(n,...e)}function ug(n,e,t){const r=Object.assign(Object.assign({},ub()),{[e]:t});return new Co("auth","Firebase",r).create(e,{appName:n.name})}function Qn(n){return ug(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bu(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return cg.create(n,...e)}function ye(n,e,...t){if(!n)throw Bu(e,...t)}function qn(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ra(e),new Error(e)}function Jn(n,e){n||qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function hb(){return Ih()==="http:"||Ih()==="https:"}function Ih(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hb()||H_()||"connection"in navigator)?navigator.onLine:!0}function pb(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,t){this.shortDelay=e,this.longDelay=t,Jn(t>e,"Short delay should be less than long delay!"),this.isMobile=F_()||j_()}get(){return fb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(n,e){Jn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vb=new Do(3e4,6e4);function ir(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function xn(n,e,t,r,i={}){return hg(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=Ro(Object.assign({key:n.config.apiKey},o)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const h=Object.assign({method:e,headers:u},s);return B_()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Io(n.emulatorConfig.host)&&(h.credentials="include"),dg.fetch()(await fg(n,n.config.apiHost,t,l),h)})}async function hg(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},gb),e);try{const i=new _b(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw fa(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw fa(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw fa(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw fa(n,"user-disabled",o);const g=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ug(n,g,h);un(n,g)}}catch(i){if(i instanceof rr)throw i;un(n,"network-request-failed",{message:String(i)})}}async function ko(n,e,t,r,i={}){const s=await xn(n,e,t,r,i);return"mfaPendingCredential"in s&&un(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function fg(n,e,t,r){const i=`${e}${t}?${r}`,s=n,o=s.config.emulator?Hu(n.config,i):`${n.config.apiScheme}://${i}`;return mb.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function yb(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _b{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(An(this.auth,"network-request-failed")),vb.get())})}}function fa(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=An(n,e,r);return i.customData._tokenResponse=t,i}function Ch(n){return n!==void 0&&n.enterprise!==void 0}class Eb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return yb(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function bb(n,e){return xn(n,"GET","/v2/recaptchaConfig",ir(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wb(n,e){return xn(n,"POST","/v1/accounts:delete",e)}async function $a(n,e){return xn(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Tb(n,e=!1){const t=ot(n),r=await t.getIdToken(e),i=ju(r);ye(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:so(Ac(i.auth_time)),issuedAtTime:so(Ac(i.iat)),expirationTime:so(Ac(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ac(n){return Number(n)*1e3}function ju(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ra("JWT malformed, contained fewer than 3 sections"),null;try{const i=Kp(t);return i?JSON.parse(i):(Ra("Failed to decode base64 JWT payload"),null)}catch(i){return Ra("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Rh(n){const e=ju(n);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function us(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof rr&&Ab(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Ab({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=so(this.lastLoginAt),this.creationTime=so(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(n){var e;const t=n.auth,r=await n.getIdToken(),i=await us(n,$a(t,{idToken:r}));ye(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?pg(s.providerUserInfo):[],l=Cb(n.providerData,o),u=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),g=u?h:!1,b={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new eu(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,b)}async function Ib(n){const e=ot(n);await Ga(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Cb(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function pg(n){return n.map(e=>{var{providerId:t}=e,r=Uu(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rb(n,e){const t=await hg(n,{},async()=>{const r=Ro({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await fg(n,i,"/v1/token",`key=${s}`),l=await n._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",dg.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Db(n,e){return xn(n,"POST","/v2/accounts:revokeToken",ir(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const t=Rh(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await Rb(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new ns;return r&&(ye(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ye(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ye(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ns,this.toJSON())}_performRefresh(){return qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(n,e){ye(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class an{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Uu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Sb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new eu(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await us(this,this.stsTokenManager.getToken(this.auth,e));return ye(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Tb(this,e)}reload(){return Ib(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new an(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ga(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tn(this.auth.app))return Promise.reject(Qn(this.auth));const e=await this.getIdToken();return await us(this,wb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,l,u,h,g;const b=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(i=t.email)!==null&&i!==void 0?i:void 0,A=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=t.photoURL)!==null&&o!==void 0?o:void 0,P=(l=t.tenantId)!==null&&l!==void 0?l:void 0,O=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,U=(h=t.createdAt)!==null&&h!==void 0?h:void 0,X=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:te,emailVerified:ie,isAnonymous:Se,providerData:de,stsTokenManager:f}=t;ye(te&&f,e,"internal-error");const R=ns.fromJSON(this.name,f);ye(typeof te=="string",e,"internal-error"),gr(b,e.name),gr(w,e.name),ye(typeof ie=="boolean",e,"internal-error"),ye(typeof Se=="boolean",e,"internal-error"),gr(A,e.name),gr(C,e.name),gr(P,e.name),gr(O,e.name),gr(U,e.name),gr(X,e.name);const k=new an({uid:te,auth:e,email:w,emailVerified:ie,displayName:b,isAnonymous:Se,photoURL:C,phoneNumber:A,tenantId:P,stsTokenManager:R,createdAt:U,lastLoginAt:X});return de&&Array.isArray(de)&&(k.providerData=de.map(L=>Object.assign({},L))),O&&(k._redirectEventId=O),k}static async _fromIdTokenResponse(e,t,r=!1){const i=new ns;i.updateFromServerResponse(t);const s=new an({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ga(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ye(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?pg(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new ns;l.updateFromIdToken(r);const u=new an({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new eu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new Map;function $n(n){Jn(n instanceof Function,"Expected a class definition");let e=Dh.get(n);return e?(Jn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Dh.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}gg.type="NONE";const kh=gg;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(n,e,t){return`firebase:${n}:${e}:${t}`}class rs{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Da(this.userKey,i.apiKey,s),this.fullPersistenceKey=Da("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await $a(this.auth,{idToken:e}).catch(()=>{});return t?an._fromGetAccountInfoResponse(this.auth,t,e):null}return an._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new rs($n(kh),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||$n(kh);const o=Da(r,e.config.apiKey,e.name);let l=null;for(const h of t)try{const g=await h._get(o);if(g){let b;if(typeof g=="string"){const w=await $a(e,{idToken:g}).catch(()=>{});if(!w)break;b=await an._fromGetAccountInfoResponse(e,w,g)}else b=an._fromJSON(e,g);h!==s&&(l=b),s=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new rs(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new rs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_g(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bg(e))return"Blackberry";if(wg(e))return"Webos";if(vg(e))return"Safari";if((e.includes("chrome/")||yg(e))&&!e.includes("edge/"))return"Chrome";if(Eg(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function mg(n=St()){return/firefox\//i.test(n)}function vg(n=St()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yg(n=St()){return/crios\//i.test(n)}function _g(n=St()){return/iemobile/i.test(n)}function Eg(n=St()){return/android/i.test(n)}function bg(n=St()){return/blackberry/i.test(n)}function wg(n=St()){return/webos/i.test(n)}function zu(n=St()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function kb(n=St()){var e;return zu(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xb(){return z_()&&document.documentMode===10}function Tg(n=St()){return zu(n)||Eg(n)||wg(n)||bg(n)||/windows phone/i.test(n)||_g(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(n,e=[]){let t;switch(n){case"Browser":t=xh(St());break;case"Worker":t=`${xh(St())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ws}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nb(n,e={}){return xn(n,"GET","/v2/passwordPolicy",ir(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=6;class Ob{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Mb,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ph(this),this.idTokenSubscription=new Ph(this),this.beforeStateQueue=new Pb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$n(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await rs.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await $a(this,{idToken:e}),r=await an._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(tn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ga(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tn(this.app))return Promise.reject(Qn(this));const t=e?ot(e):null;return t&&ye(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tn(this.app)?Promise.reject(Qn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tn(this.app)?Promise.reject(Qn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($n(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Nb(this),t=new Ob(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Co("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Db(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&$n(e)||this._popupRedirectResolver;ye(t,this,"argument-error"),this.redirectPersistenceManager=await rs.create(this,[$n(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(t);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ag(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&db(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Fr(n){return ot(n)}class Ph{constructor(e){this.auth=e,this.observer=null,this.addObserver=X_(t=>this.observer=t)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Il={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Lb(n){Il=n}function Sg(n){return Il.loadJS(n)}function Fb(){return Il.recaptchaEnterpriseScript}function Ub(){return Il.gapiScript}function Bb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Hb{constructor(){this.enterprise=new jb}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class jb{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const zb="recaptcha-enterprise",Ig="NO_RECAPTCHA";class Wb{constructor(e){this.type=zb,this.auth=Fr(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{bb(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new Eb(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;Ch(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(Ig)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Hb().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(l=>{if(!t&&Ch(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Fb();u.length!==0&&(u+=l),Sg(u).then(()=>{i(l,s,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function Nh(n,e,t,r=!1,i=!1){const s=new Wb(n);let o;if(i)o=Ig;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const l=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Qa(n,e,t,r,i){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Nh(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Nh(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(n,e){const t=Fu(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(ci(s,e??{}))return i;un(i,"already-initialized")}return t.initialize({options:e})}function $b(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map($n);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Gb(n,e,t){const r=Fr(n);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Cg(e),{host:o,port:l}=Qb(e),u=l===null?"":`:${l}`,h={url:`${s}//${o}${u}/`},g=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(ci(h,r.config.emulator)&&ci(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Io(o)?(eg(`${s}//${o}${u}`),tg("Auth",!0)):Yb()}function Cg(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Qb(n){const e=Cg(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Mh(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Mh(o)}}}function Mh(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Yb(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qn("not implemented")}_getIdTokenResponse(e){return qn("not implemented")}_linkToIdToken(e,t){return qn("not implemented")}_getReauthenticationResolver(e){return qn("not implemented")}}async function Kb(n,e){return xn(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb(n,e){return ko(n,"POST","/v1/accounts:signInWithPassword",ir(n,e))}async function Rg(n,e){return xn(n,"POST","/v1/accounts:sendOobCode",ir(n,e))}async function Jb(n,e){return Rg(n,e)}async function Zb(n,e){return Rg(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ew(n,e){return ko(n,"POST","/v1/accounts:signInWithEmailLink",ir(n,e))}async function tw(n,e){return ko(n,"POST","/v1/accounts:signInWithEmailLink",ir(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go extends Wu{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new go(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new go(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qa(e,t,"signInWithPassword",Xb);case"emailLink":return ew(e,{email:this._email,oobCode:this._password});default:un(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qa(e,r,"signUpPassword",Kb);case"emailLink":return tw(e,{idToken:t,email:this._email,oobCode:this._password});default:un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function is(n,e){return ko(n,"POST","/v1/accounts:signInWithIdp",ir(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="http://localhost";class di extends Wu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new di(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):un("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Uu(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new di(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return is(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,is(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,is(e,t)}buildRequest(){const e={requestUri:nw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ro(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iw(n){const e=Js(Zs(n)).link,t=e?Js(Zs(e)).deep_link_id:null,r=Js(Zs(n)).deep_link_id;return(r?Js(Zs(r)).link:null)||r||t||e||n}class qu{constructor(e){var t,r,i,s,o,l;const u=Js(Zs(e)),h=(t=u.apiKey)!==null&&t!==void 0?t:null,g=(r=u.oobCode)!==null&&r!==void 0?r:null,b=rw((i=u.mode)!==null&&i!==void 0?i:null);ye(h&&g&&b,"argument-error"),this.apiKey=h,this.operation=b,this.code=g,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const t=iw(e);try{return new qu(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this.providerId=Ts.PROVIDER_ID}static credential(e,t){return go._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=qu.parseLink(t);return ye(r,"argument-error"),go._fromEmailAndCode(e,r.code,r.tenantId)}}Ts.PROVIDER_ID="password";Ts.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ts.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends Dg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends xo{constructor(){super("facebook.com")}static credential(e){return di._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends xo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return di._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return vr.credential(t,r)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends xo{constructor(){super("github.com")}static credential(e){return di._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends xo{constructor(){super("twitter.com")}static credential(e,t){return di._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return _r.credential(t,r)}catch{return null}}}_r.TWITTER_SIGN_IN_METHOD="twitter.com";_r.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sw(n,e){return ko(n,"POST","/v1/accounts:signUp",ir(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await an._fromIdTokenResponse(e,r,i),o=Oh(r);return new hi({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Oh(r);return new hi({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Oh(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends rr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ya.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Ya(e,t,r,i)}}function kg(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ya._fromErrorAndOperation(n,s,e,r):s})}async function ow(n,e,t=!1){const r=await us(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return hi._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aw(n,e,t=!1){const{auth:r}=n;if(tn(r.app))return Promise.reject(Qn(r));const i="reauthenticate";try{const s=await us(n,kg(r,i,e,n),t);ye(s.idToken,r,"internal-error");const o=ju(s.idToken);ye(o,r,"internal-error");const{sub:l}=o;return ye(n.uid===l,r,"user-mismatch"),hi._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&un(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xg(n,e,t=!1){if(tn(n.app))return Promise.reject(Qn(n));const r="signIn",i=await kg(n,r,e),s=await hi._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function lw(n,e){return xg(Fr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pg(n){const e=Fr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _P(n,e,t){const r=Fr(n);await Qa(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Zb)}async function EP(n,e,t){if(tn(n.app))return Promise.reject(Qn(n));const r=Fr(n),o=await Qa(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sw).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Pg(n),u}),l=await hi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function bP(n,e,t){return tn(n.app)?Promise.reject(Qn(n)):lw(ot(n),Ts.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Pg(n),r})}async function wP(n,e){const t=ot(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:s}=await Jb(t.auth,i);s!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cw(n,e){return xn(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TP(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=ot(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await us(r,cw(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function uw(n,e,t,r){return ot(n).onIdTokenChanged(e,t,r)}function dw(n,e,t){return ot(n).beforeAuthStateChanged(e,t)}function AP(n,e,t,r){return ot(n).onAuthStateChanged(e,t,r)}function SP(n){return ot(n).signOut()}const Ka="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ka,"1"),this.storage.removeItem(Ka),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=1e3,fw=10;class Mg extends Ng{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);xb()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,fw):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},hw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Mg.type="LOCAL";const pw=Mg;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og extends Ng{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Og.type="SESSION";const Vg=Og;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Cl(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async h=>h(t.origin,s)),u=await gw(l);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const h=$u("",20);i.port1.start();const g=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(b){const w=b;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(g),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(w.data.response);break;default:clearTimeout(g),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return window}function vw(n){Sn().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(){return typeof Sn().WorkerGlobalScope<"u"&&typeof Sn().importScripts=="function"}async function yw(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _w(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Ew(){return Lg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="firebaseLocalStorageDb",bw=1,Xa="firebaseLocalStorage",Ug="fbase_key";class Po{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Rl(n,e){return n.transaction([Xa],e?"readwrite":"readonly").objectStore(Xa)}function ww(){const n=indexedDB.deleteDatabase(Fg);return new Po(n).toPromise()}function tu(){const n=indexedDB.open(Fg,bw);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Xa,{keyPath:Ug})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Xa)?e(r):(r.close(),await ww(),e(await tu()))})})}async function Vh(n,e,t){const r=Rl(n,!0).put({[Ug]:e,value:t});return new Po(r).toPromise()}async function Tw(n,e){const t=Rl(n,!1).get(e),r=await new Po(t).toPromise();return r===void 0?null:r.value}function Lh(n,e){const t=Rl(n,!0).delete(e);return new Po(t).toPromise()}const Aw=800,Sw=3;class Bg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tu(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Sw)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cl._getInstance(Ew()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await yw(),!this.activeServiceWorker)return;this.sender=new mw(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_w()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tu();return await Vh(e,Ka,"1"),await Lh(e,Ka),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Vh(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Tw(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Lh(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Rl(i,!1).getAll();return new Po(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Aw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bg.type="LOCAL";const Iw=Bg;new Do(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(n,e){return e?$n(e):(ye(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends Wu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return is(e,this._buildIdpRequest())}_linkToIdToken(e,t){return is(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return is(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Rw(n){return xg(n.auth,new Gu(n),n.bypassAuthState)}function Dw(n){const{auth:e,user:t}=n;return ye(t,e,"internal-error"),aw(t,new Gu(n),n.bypassAuthState)}async function kw(n){const{auth:e,user:t}=n;return ye(t,e,"internal-error"),ow(t,new Gu(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Rw;case"linkViaPopup":case"linkViaRedirect":return kw;case"reauthViaPopup":case"reauthViaRedirect":return Dw;default:un(this.auth,"internal-error")}}resolve(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=new Do(2e3,1e4);class es extends Hg{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,es.currentPopupAction&&es.currentPopupAction.cancel(),es.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Jn(this.filter.length===1,"Popup operations only handle one event");const e=$u();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(An(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(An(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,es.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(An(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xw.get())};e()}}es.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="pendingRedirect",ka=new Map;class Nw extends Hg{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ka.get(this.auth._key());if(!e){try{const r=await Mw(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ka.set(this.auth._key(),e)}return this.bypassAuthState||ka.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Mw(n,e){const t=Lw(e),r=Vw(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function Ow(n,e){ka.set(n._key(),e)}function Vw(n){return $n(n._redirectPersistence)}function Lw(n){return Da(Pw,n.config.apiKey,n.name)}async function Fw(n,e,t=!1){if(tn(n.app))return Promise.reject(Qn(n));const r=Fr(n),i=Cw(r,e),o=await new Nw(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=10*60*1e3;class Bw{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Hw(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!jg(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(An(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Uw&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fh(e))}saveEventToCache(e){this.cachedEventUids.add(Fh(e)),this.lastProcessedEventTime=Date.now()}}function Fh(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function jg({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Hw(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jg(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(n,e={}){return xn(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ww=/^https?/;async function qw(n){if(n.config.emulator)return;const{authorizedDomains:e}=await jw(n);for(const t of e)try{if($w(t))return}catch{}un(n,"unauthorized-domain")}function $w(n){const e=Zc(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!Ww.test(t))return!1;if(zw.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=new Do(3e4,6e4);function Uh(){const n=Sn().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Qw(n){return new Promise((e,t)=>{var r,i,s;function o(){Uh(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Uh(),t(An(n,"network-request-failed"))},timeout:Gw.get()})}if(!((i=(r=Sn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Sn().gapi)===null||s===void 0)&&s.load)o();else{const l=Bb("iframefcb");return Sn()[l]=()=>{gapi.load?o():t(An(n,"network-request-failed"))},Sg(`${Ub()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw xa=null,e})}let xa=null;function Yw(n){return xa=xa||Qw(n),xa}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=new Do(5e3,15e3),Xw="__/auth/iframe",Jw="emulator/auth/iframe",Zw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tT(n){const e=n.config;ye(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Hu(e,Jw):`https://${n.config.authDomain}/${Xw}`,r={apiKey:e.apiKey,appName:n.name,v:ws},i=eT.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ro(r).slice(1)}`}async function nT(n){const e=await Yw(n),t=Sn().gapi;return ye(t,n,"internal-error"),e.open({where:document.body,url:tT(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zw,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=An(n,"network-request-failed"),l=Sn().setTimeout(()=>{s(o)},Kw.get());function u(){Sn().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iT=500,sT=600,oT="_blank",aT="http://localhost";class Bh{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lT(n,e,t,r=iT,i=sT){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},rT),{width:r.toString(),height:i.toString(),top:s,left:o}),h=St().toLowerCase();t&&(l=yg(h)?oT:t),mg(h)&&(e=e||aT,u.scrollbars="yes");const g=Object.entries(u).reduce((w,[A,C])=>`${w}${A}=${C},`,"");if(kb(h)&&l!=="_self")return cT(e||"",l),new Bh(null);const b=window.open(e||"",l,g);ye(b,n,"popup-blocked");try{b.focus()}catch{}return new Bh(b)}function cT(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="__/auth/handler",dT="emulator/auth/handler",hT=encodeURIComponent("fac");async function Hh(n,e,t,r,i,s){ye(n.config.authDomain,n,"auth-domain-config-required"),ye(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ws,eventId:i};if(e instanceof Dg){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",K_(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,b]of Object.entries({}))o[g]=b}if(e instanceof xo){const g=e.getScopes().filter(b=>b!=="");g.length>0&&(o.scopes=g.join(","))}n.tenantId&&(o.tid=n.tenantId);const l=o;for(const g of Object.keys(l))l[g]===void 0&&delete l[g];const u=await n._getAppCheckToken(),h=u?`#${hT}=${encodeURIComponent(u)}`:"";return`${fT(n)}?${Ro(l).slice(1)}${h}`}function fT({config:n}){return n.emulator?Hu(n,dT):`https://${n.authDomain}/${uT}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc="webStorageSupport";class pT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vg,this._completeRedirectFn=Fw,this._overrideRedirectResult=Ow}async _openPopup(e,t,r,i){var s;Jn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Hh(e,t,r,Zc(),i);return lT(e,o,$u())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await Hh(e,t,r,Zc(),i);return vw(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Jn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await nT(e),r=new Bw(e);return t.register("authEvent",i=>(ye(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sc,{type:Sc},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Sc];o!==void 0&&t(!!o),un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=qw(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Tg()||vg()||zu()}}const gT=pT;var jh="@firebase/auth",zh="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yT(n){cs(new ui("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ag(n)},h=new Vb(r,i,s,u);return $b(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),cs(new ui("auth-internal",e=>{const t=Fr(e.getProvider("auth").getImmediate());return(r=>new mT(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ir(jh,zh,vT(n)),Ir(jh,zh,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=5*60,ET=Zp("authIdTokenMaxAge")||_T;let Wh=null;const bT=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>ET)return;const i=t==null?void 0:t.token;Wh!==i&&(Wh=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function wT(n=sg()){const e=Fu(n,"auth");if(e.isInitialized())return e.getImmediate();const t=qb(n,{popupRedirectResolver:gT,persistence:[Iw,pw,Vg]}),r=Zp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=bT(s.toString());dw(t,o,()=>o(t.currentUser)),uw(t,l=>o(l))}}const i=Xp("auth");return i&&Gb(t,`http://${i}`),t}function TT(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Lb({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=An("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",TT().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yT("Browser");var qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cr,zg;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(f,R){function k(){}k.prototype=R.prototype,f.D=R.prototype,f.prototype=new k,f.prototype.constructor=f,f.C=function(L,B,j){for(var x=Array(arguments.length-2),It=2;It<arguments.length;It++)x[It-2]=arguments[It];return R.prototype[B].apply(L,x)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(f,R,k){k||(k=0);var L=Array(16);if(typeof R=="string")for(var B=0;16>B;++B)L[B]=R.charCodeAt(k++)|R.charCodeAt(k++)<<8|R.charCodeAt(k++)<<16|R.charCodeAt(k++)<<24;else for(B=0;16>B;++B)L[B]=R[k++]|R[k++]<<8|R[k++]<<16|R[k++]<<24;R=f.g[0],k=f.g[1],B=f.g[2];var j=f.g[3],x=R+(j^k&(B^j))+L[0]+3614090360&4294967295;R=k+(x<<7&4294967295|x>>>25),x=j+(B^R&(k^B))+L[1]+3905402710&4294967295,j=R+(x<<12&4294967295|x>>>20),x=B+(k^j&(R^k))+L[2]+606105819&4294967295,B=j+(x<<17&4294967295|x>>>15),x=k+(R^B&(j^R))+L[3]+3250441966&4294967295,k=B+(x<<22&4294967295|x>>>10),x=R+(j^k&(B^j))+L[4]+4118548399&4294967295,R=k+(x<<7&4294967295|x>>>25),x=j+(B^R&(k^B))+L[5]+1200080426&4294967295,j=R+(x<<12&4294967295|x>>>20),x=B+(k^j&(R^k))+L[6]+2821735955&4294967295,B=j+(x<<17&4294967295|x>>>15),x=k+(R^B&(j^R))+L[7]+4249261313&4294967295,k=B+(x<<22&4294967295|x>>>10),x=R+(j^k&(B^j))+L[8]+1770035416&4294967295,R=k+(x<<7&4294967295|x>>>25),x=j+(B^R&(k^B))+L[9]+2336552879&4294967295,j=R+(x<<12&4294967295|x>>>20),x=B+(k^j&(R^k))+L[10]+4294925233&4294967295,B=j+(x<<17&4294967295|x>>>15),x=k+(R^B&(j^R))+L[11]+2304563134&4294967295,k=B+(x<<22&4294967295|x>>>10),x=R+(j^k&(B^j))+L[12]+1804603682&4294967295,R=k+(x<<7&4294967295|x>>>25),x=j+(B^R&(k^B))+L[13]+4254626195&4294967295,j=R+(x<<12&4294967295|x>>>20),x=B+(k^j&(R^k))+L[14]+2792965006&4294967295,B=j+(x<<17&4294967295|x>>>15),x=k+(R^B&(j^R))+L[15]+1236535329&4294967295,k=B+(x<<22&4294967295|x>>>10),x=R+(B^j&(k^B))+L[1]+4129170786&4294967295,R=k+(x<<5&4294967295|x>>>27),x=j+(k^B&(R^k))+L[6]+3225465664&4294967295,j=R+(x<<9&4294967295|x>>>23),x=B+(R^k&(j^R))+L[11]+643717713&4294967295,B=j+(x<<14&4294967295|x>>>18),x=k+(j^R&(B^j))+L[0]+3921069994&4294967295,k=B+(x<<20&4294967295|x>>>12),x=R+(B^j&(k^B))+L[5]+3593408605&4294967295,R=k+(x<<5&4294967295|x>>>27),x=j+(k^B&(R^k))+L[10]+38016083&4294967295,j=R+(x<<9&4294967295|x>>>23),x=B+(R^k&(j^R))+L[15]+3634488961&4294967295,B=j+(x<<14&4294967295|x>>>18),x=k+(j^R&(B^j))+L[4]+3889429448&4294967295,k=B+(x<<20&4294967295|x>>>12),x=R+(B^j&(k^B))+L[9]+568446438&4294967295,R=k+(x<<5&4294967295|x>>>27),x=j+(k^B&(R^k))+L[14]+3275163606&4294967295,j=R+(x<<9&4294967295|x>>>23),x=B+(R^k&(j^R))+L[3]+4107603335&4294967295,B=j+(x<<14&4294967295|x>>>18),x=k+(j^R&(B^j))+L[8]+1163531501&4294967295,k=B+(x<<20&4294967295|x>>>12),x=R+(B^j&(k^B))+L[13]+2850285829&4294967295,R=k+(x<<5&4294967295|x>>>27),x=j+(k^B&(R^k))+L[2]+4243563512&4294967295,j=R+(x<<9&4294967295|x>>>23),x=B+(R^k&(j^R))+L[7]+1735328473&4294967295,B=j+(x<<14&4294967295|x>>>18),x=k+(j^R&(B^j))+L[12]+2368359562&4294967295,k=B+(x<<20&4294967295|x>>>12),x=R+(k^B^j)+L[5]+4294588738&4294967295,R=k+(x<<4&4294967295|x>>>28),x=j+(R^k^B)+L[8]+2272392833&4294967295,j=R+(x<<11&4294967295|x>>>21),x=B+(j^R^k)+L[11]+1839030562&4294967295,B=j+(x<<16&4294967295|x>>>16),x=k+(B^j^R)+L[14]+4259657740&4294967295,k=B+(x<<23&4294967295|x>>>9),x=R+(k^B^j)+L[1]+2763975236&4294967295,R=k+(x<<4&4294967295|x>>>28),x=j+(R^k^B)+L[4]+1272893353&4294967295,j=R+(x<<11&4294967295|x>>>21),x=B+(j^R^k)+L[7]+4139469664&4294967295,B=j+(x<<16&4294967295|x>>>16),x=k+(B^j^R)+L[10]+3200236656&4294967295,k=B+(x<<23&4294967295|x>>>9),x=R+(k^B^j)+L[13]+681279174&4294967295,R=k+(x<<4&4294967295|x>>>28),x=j+(R^k^B)+L[0]+3936430074&4294967295,j=R+(x<<11&4294967295|x>>>21),x=B+(j^R^k)+L[3]+3572445317&4294967295,B=j+(x<<16&4294967295|x>>>16),x=k+(B^j^R)+L[6]+76029189&4294967295,k=B+(x<<23&4294967295|x>>>9),x=R+(k^B^j)+L[9]+3654602809&4294967295,R=k+(x<<4&4294967295|x>>>28),x=j+(R^k^B)+L[12]+3873151461&4294967295,j=R+(x<<11&4294967295|x>>>21),x=B+(j^R^k)+L[15]+530742520&4294967295,B=j+(x<<16&4294967295|x>>>16),x=k+(B^j^R)+L[2]+3299628645&4294967295,k=B+(x<<23&4294967295|x>>>9),x=R+(B^(k|~j))+L[0]+4096336452&4294967295,R=k+(x<<6&4294967295|x>>>26),x=j+(k^(R|~B))+L[7]+1126891415&4294967295,j=R+(x<<10&4294967295|x>>>22),x=B+(R^(j|~k))+L[14]+2878612391&4294967295,B=j+(x<<15&4294967295|x>>>17),x=k+(j^(B|~R))+L[5]+4237533241&4294967295,k=B+(x<<21&4294967295|x>>>11),x=R+(B^(k|~j))+L[12]+1700485571&4294967295,R=k+(x<<6&4294967295|x>>>26),x=j+(k^(R|~B))+L[3]+2399980690&4294967295,j=R+(x<<10&4294967295|x>>>22),x=B+(R^(j|~k))+L[10]+4293915773&4294967295,B=j+(x<<15&4294967295|x>>>17),x=k+(j^(B|~R))+L[1]+2240044497&4294967295,k=B+(x<<21&4294967295|x>>>11),x=R+(B^(k|~j))+L[8]+1873313359&4294967295,R=k+(x<<6&4294967295|x>>>26),x=j+(k^(R|~B))+L[15]+4264355552&4294967295,j=R+(x<<10&4294967295|x>>>22),x=B+(R^(j|~k))+L[6]+2734768916&4294967295,B=j+(x<<15&4294967295|x>>>17),x=k+(j^(B|~R))+L[13]+1309151649&4294967295,k=B+(x<<21&4294967295|x>>>11),x=R+(B^(k|~j))+L[4]+4149444226&4294967295,R=k+(x<<6&4294967295|x>>>26),x=j+(k^(R|~B))+L[11]+3174756917&4294967295,j=R+(x<<10&4294967295|x>>>22),x=B+(R^(j|~k))+L[2]+718787259&4294967295,B=j+(x<<15&4294967295|x>>>17),x=k+(j^(B|~R))+L[9]+3951481745&4294967295,f.g[0]=f.g[0]+R&4294967295,f.g[1]=f.g[1]+(B+(x<<21&4294967295|x>>>11))&4294967295,f.g[2]=f.g[2]+B&4294967295,f.g[3]=f.g[3]+j&4294967295}r.prototype.u=function(f,R){R===void 0&&(R=f.length);for(var k=R-this.blockSize,L=this.B,B=this.h,j=0;j<R;){if(B==0)for(;j<=k;)i(this,f,j),j+=this.blockSize;if(typeof f=="string"){for(;j<R;)if(L[B++]=f.charCodeAt(j++),B==this.blockSize){i(this,L),B=0;break}}else for(;j<R;)if(L[B++]=f[j++],B==this.blockSize){i(this,L),B=0;break}}this.h=B,this.o+=R},r.prototype.v=function(){var f=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);f[0]=128;for(var R=1;R<f.length-8;++R)f[R]=0;var k=8*this.o;for(R=f.length-8;R<f.length;++R)f[R]=k&255,k/=256;for(this.u(f),f=Array(16),R=k=0;4>R;++R)for(var L=0;32>L;L+=8)f[k++]=this.g[R]>>>L&255;return f};function s(f,R){var k=l;return Object.prototype.hasOwnProperty.call(k,f)?k[f]:k[f]=R(f)}function o(f,R){this.h=R;for(var k=[],L=!0,B=f.length-1;0<=B;B--){var j=f[B]|0;L&&j==R||(k[B]=j,L=!1)}this.g=k}var l={};function u(f){return-128<=f&&128>f?s(f,function(R){return new o([R|0],0>R?-1:0)}):new o([f|0],0>f?-1:0)}function h(f){if(isNaN(f)||!isFinite(f))return b;if(0>f)return O(h(-f));for(var R=[],k=1,L=0;f>=k;L++)R[L]=f/k|0,k*=4294967296;return new o(R,0)}function g(f,R){if(f.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(f.charAt(0)=="-")return O(g(f.substring(1),R));if(0<=f.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=h(Math.pow(R,8)),L=b,B=0;B<f.length;B+=8){var j=Math.min(8,f.length-B),x=parseInt(f.substring(B,B+j),R);8>j?(j=h(Math.pow(R,j)),L=L.j(j).add(h(x))):(L=L.j(k),L=L.add(h(x)))}return L}var b=u(0),w=u(1),A=u(16777216);n=o.prototype,n.m=function(){if(P(this))return-O(this).m();for(var f=0,R=1,k=0;k<this.g.length;k++){var L=this.i(k);f+=(0<=L?L:4294967296+L)*R,R*=4294967296}return f},n.toString=function(f){if(f=f||10,2>f||36<f)throw Error("radix out of range: "+f);if(C(this))return"0";if(P(this))return"-"+O(this).toString(f);for(var R=h(Math.pow(f,6)),k=this,L="";;){var B=ie(k,R).g;k=U(k,B.j(R));var j=((0<k.g.length?k.g[0]:k.h)>>>0).toString(f);if(k=B,C(k))return j+L;for(;6>j.length;)j="0"+j;L=j+L}},n.i=function(f){return 0>f?0:f<this.g.length?this.g[f]:this.h};function C(f){if(f.h!=0)return!1;for(var R=0;R<f.g.length;R++)if(f.g[R]!=0)return!1;return!0}function P(f){return f.h==-1}n.l=function(f){return f=U(this,f),P(f)?-1:C(f)?0:1};function O(f){for(var R=f.g.length,k=[],L=0;L<R;L++)k[L]=~f.g[L];return new o(k,~f.h).add(w)}n.abs=function(){return P(this)?O(this):this},n.add=function(f){for(var R=Math.max(this.g.length,f.g.length),k=[],L=0,B=0;B<=R;B++){var j=L+(this.i(B)&65535)+(f.i(B)&65535),x=(j>>>16)+(this.i(B)>>>16)+(f.i(B)>>>16);L=x>>>16,j&=65535,x&=65535,k[B]=x<<16|j}return new o(k,k[k.length-1]&-2147483648?-1:0)};function U(f,R){return f.add(O(R))}n.j=function(f){if(C(this)||C(f))return b;if(P(this))return P(f)?O(this).j(O(f)):O(O(this).j(f));if(P(f))return O(this.j(O(f)));if(0>this.l(A)&&0>f.l(A))return h(this.m()*f.m());for(var R=this.g.length+f.g.length,k=[],L=0;L<2*R;L++)k[L]=0;for(L=0;L<this.g.length;L++)for(var B=0;B<f.g.length;B++){var j=this.i(L)>>>16,x=this.i(L)&65535,It=f.i(B)>>>16,jr=f.i(B)&65535;k[2*L+2*B]+=x*jr,X(k,2*L+2*B),k[2*L+2*B+1]+=j*jr,X(k,2*L+2*B+1),k[2*L+2*B+1]+=x*It,X(k,2*L+2*B+1),k[2*L+2*B+2]+=j*It,X(k,2*L+2*B+2)}for(L=0;L<R;L++)k[L]=k[2*L+1]<<16|k[2*L];for(L=R;L<2*R;L++)k[L]=0;return new o(k,0)};function X(f,R){for(;(f[R]&65535)!=f[R];)f[R+1]+=f[R]>>>16,f[R]&=65535,R++}function te(f,R){this.g=f,this.h=R}function ie(f,R){if(C(R))throw Error("division by zero");if(C(f))return new te(b,b);if(P(f))return R=ie(O(f),R),new te(O(R.g),O(R.h));if(P(R))return R=ie(f,O(R)),new te(O(R.g),R.h);if(30<f.g.length){if(P(f)||P(R))throw Error("slowDivide_ only works with positive integers.");for(var k=w,L=R;0>=L.l(f);)k=Se(k),L=Se(L);var B=de(k,1),j=de(L,1);for(L=de(L,2),k=de(k,2);!C(L);){var x=j.add(L);0>=x.l(f)&&(B=B.add(k),j=x),L=de(L,1),k=de(k,1)}return R=U(f,B.j(R)),new te(B,R)}for(B=b;0<=f.l(R);){for(k=Math.max(1,Math.floor(f.m()/R.m())),L=Math.ceil(Math.log(k)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),j=h(k),x=j.j(R);P(x)||0<x.l(f);)k-=L,j=h(k),x=j.j(R);C(j)&&(j=w),B=B.add(j),f=U(f,x)}return new te(B,f)}n.A=function(f){return ie(this,f).h},n.and=function(f){for(var R=Math.max(this.g.length,f.g.length),k=[],L=0;L<R;L++)k[L]=this.i(L)&f.i(L);return new o(k,this.h&f.h)},n.or=function(f){for(var R=Math.max(this.g.length,f.g.length),k=[],L=0;L<R;L++)k[L]=this.i(L)|f.i(L);return new o(k,this.h|f.h)},n.xor=function(f){for(var R=Math.max(this.g.length,f.g.length),k=[],L=0;L<R;L++)k[L]=this.i(L)^f.i(L);return new o(k,this.h^f.h)};function Se(f){for(var R=f.g.length+1,k=[],L=0;L<R;L++)k[L]=f.i(L)<<1|f.i(L-1)>>>31;return new o(k,f.h)}function de(f,R){var k=R>>5;R%=32;for(var L=f.g.length-k,B=[],j=0;j<L;j++)B[j]=0<R?f.i(j+k)>>>R|f.i(j+k+1)<<32-R:f.i(j+k);return new o(B,f.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,zg=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=g,Cr=o}).apply(typeof qh<"u"?qh:typeof self<"u"?self:typeof window<"u"?window:{});var pa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wg,eo,qg,Pa,nu,$g,Gg,Qg;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,y){return c==Array.prototype||c==Object.prototype||(c[m]=y.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof pa=="object"&&pa];for(var m=0;m<c.length;++m){var y=c[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(c,m){if(m)e:{var y=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var H=c[S];if(!(H in y))break e;y=y[H]}c=c[c.length-1],S=y[c],m=m(S),m!=S&&m!=null&&e(y,c,{configurable:!0,writable:!0,value:m})}}function s(c,m){c instanceof String&&(c+="");var y=0,S=!1,H={next:function(){if(!S&&y<c.length){var q=y++;return{value:m(q,c[q]),done:!1}}return S=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}i("Array.prototype.values",function(c){return c||function(){return s(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function h(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function g(c,m,y){return c.call.apply(c.bind,arguments)}function b(c,m,y){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,S),c.apply(m,H)}}return function(){return c.apply(m,arguments)}}function w(c,m,y){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:b,w.apply(null,arguments)}function A(c,m){var y=Array.prototype.slice.call(arguments,1);return function(){var S=y.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function C(c,m){function y(){}y.prototype=m.prototype,c.aa=m.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(S,H,q){for(var ne=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)ne[Ue-2]=arguments[Ue];return m.prototype[H].apply(S,ne)}}function P(c){const m=c.length;if(0<m){const y=Array(m);for(let S=0;S<m;S++)y[S]=c[S];return y}return[]}function O(c,m){for(let y=1;y<arguments.length;y++){const S=arguments[y];if(u(S)){const H=c.length||0,q=S.length||0;c.length=H+q;for(let ne=0;ne<q;ne++)c[H+ne]=S[ne]}else c.push(S)}}class U{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function X(c){return/^[\s\xa0]*$/.test(c)}function te(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function ie(c){return ie[" "](c),c}ie[" "]=function(){};var Se=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function de(c,m,y){for(const S in c)m.call(y,c[S],S,c)}function f(c,m){for(const y in c)m.call(void 0,c[y],y,c)}function R(c){const m={};for(const y in c)m[y]=c[y];return m}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(c,m){let y,S;for(let H=1;H<arguments.length;H++){S=arguments[H];for(y in S)c[y]=S[y];for(let q=0;q<k.length;q++)y=k[q],Object.prototype.hasOwnProperty.call(S,y)&&(c[y]=S[y])}}function B(c){var m=1;c=c.split(":");const y=[];for(;0<m&&c.length;)y.push(c.shift()),m--;return c.length&&y.push(c.join(":")),y}function j(c){l.setTimeout(()=>{throw c},0)}function x(){var c=hn;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class It{constructor(){this.h=this.g=null}add(m,y){const S=jr.get();S.set(m,y),this.h?this.h.next=S:this.g=S,this.h=S}}var jr=new U(()=>new ec,c=>c.reset());class ec{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Ct,Nn=!1,hn=new It,Ps=()=>{const c=l.Promise.resolve(void 0);Ct=()=>{c.then(jo)}};var jo=()=>{for(var c;c=x();){try{c.h.call(c.g)}catch(y){j(y)}var m=jr;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}Nn=!1};function nn(){this.s=this.s,this.C=this.C}nn.prototype.s=!1,nn.prototype.ma=function(){this.s||(this.s=!0,this.N())},nn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function nt(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}nt.prototype.h=function(){this.defaultPrevented=!0};var zo=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};l.addEventListener("test",y,m),l.removeEventListener("test",y,m)}catch{}return c}();function zr(c,m){if(nt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(Se){e:{try{ie(m.nodeName);var H=!0;break e}catch{}H=!1}H||(m=null)}}else y=="mouseover"?m=c.fromElement:y=="mouseout"&&(m=c.toElement);this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:tc[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&zr.aa.h.call(this)}}C(zr,nt);var tc={2:"touch",3:"pen",4:"mouse"};zr.prototype.h=function(){zr.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ti="closure_listenable_"+(1e6*Math.random()|0),nc=0;function Wo(c,m,y,S,H){this.listener=c,this.proxy=null,this.src=m,this.type=y,this.capture=!!S,this.ha=H,this.key=++nc,this.da=this.fa=!1}function Rt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ai(c){this.src=c,this.g={},this.h=0}Ai.prototype.add=function(c,m,y,S,H){var q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);var ne=ar(c,m,S,H);return-1<ne?(m=c[ne],y||(m.fa=!1)):(m=new Wo(m,this.src,q,!!S,H),m.fa=y,c.push(m)),m};function fn(c,m){var y=m.type;if(y in c.g){var S=c.g[y],H=Array.prototype.indexOf.call(S,m,void 0),q;(q=0<=H)&&Array.prototype.splice.call(S,H,1),q&&(Rt(m),c.g[y].length==0&&(delete c.g[y],c.h--))}}function ar(c,m,y,S){for(var H=0;H<c.length;++H){var q=c[H];if(!q.da&&q.listener==m&&q.capture==!!y&&q.ha==S)return H}return-1}var Si="closure_lm_"+(1e6*Math.random()|0),Ns={};function Ii(c,m,y,S,H){if(Array.isArray(m)){for(var q=0;q<m.length;q++)Ii(c,m[q],y,S,H);return null}return y=ce(y),c&&c[Ti]?c.K(m,y,h(S)?!!S.capture:!1,H):Ci(c,m,y,!1,S,H)}function Ci(c,m,y,S,H,q){if(!m)throw Error("Invalid event type");var ne=h(H)?!!H.capture:!!H,Ue=Mn(c);if(Ue||(c[Si]=Ue=new Ai(c)),y=Ue.add(m,y,S,ne,q),y.proxy)return y;if(S=rn(),y.proxy=S,S.src=c,S.listener=y,c.addEventListener)zo||(H=ne),H===void 0&&(H=!1),c.addEventListener(m.toString(),S,H);else if(c.attachEvent)c.attachEvent($o(m.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return y}function rn(){function c(y){return m.call(c.src,c.listener,y)}const m=Gt;return c}function qo(c,m,y,S,H){if(Array.isArray(m))for(var q=0;q<m.length;q++)qo(c,m[q],y,S,H);else S=h(S)?!!S.capture:!!S,y=ce(y),c&&c[Ti]?(c=c.i,m=String(m).toString(),m in c.g&&(q=c.g[m],y=ar(q,y,S,H),-1<y&&(Rt(q[y]),Array.prototype.splice.call(q,y,1),q.length==0&&(delete c.g[m],c.h--)))):c&&(c=Mn(c))&&(m=c.g[m.toString()],c=-1,m&&(c=ar(m,y,S,H)),(y=-1<c?m[c]:null)&&Ms(y))}function Ms(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[Ti])fn(m.i,c);else{var y=c.type,S=c.proxy;m.removeEventListener?m.removeEventListener(y,S,c.capture):m.detachEvent?m.detachEvent($o(y),S):m.addListener&&m.removeListener&&m.removeListener(S),(y=Mn(m))?(fn(y,c),y.h==0&&(y.src=null,m[Si]=null)):Rt(c)}}}function $o(c){return c in Ns?Ns[c]:Ns[c]="on"+c}function Gt(c,m){if(c.da)c=!0;else{m=new zr(m,this);var y=c.listener,S=c.ha||c.src;c.fa&&Ms(c),c=y.call(S,m)}return c}function Mn(c){return c=c[Si],c instanceof Ai?c:null}var On="__closure_events_fn_"+(1e9*Math.random()>>>0);function ce(c){return typeof c=="function"?c:(c[On]||(c[On]=function(m){return c.handleEvent(m)}),c[On])}function Fe(){nn.call(this),this.i=new Ai(this),this.M=this,this.F=null}C(Fe,nn),Fe.prototype[Ti]=!0,Fe.prototype.removeEventListener=function(c,m,y,S){qo(this,c,m,y,S)};function pt(c,m){var y,S=c.F;if(S)for(y=[];S;S=S.F)y.push(S);if(c=c.M,S=m.type||m,typeof m=="string")m=new nt(m,c);else if(m instanceof nt)m.target=m.target||c;else{var H=m;m=new nt(S,c),L(m,H)}if(H=!0,y)for(var q=y.length-1;0<=q;q--){var ne=m.g=y[q];H=Ri(ne,S,!0,m)&&H}if(ne=m.g=c,H=Ri(ne,S,!0,m)&&H,H=Ri(ne,S,!1,m)&&H,y)for(q=0;q<y.length;q++)ne=m.g=y[q],H=Ri(ne,S,!1,m)&&H}Fe.prototype.N=function(){if(Fe.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var y=c.g[m],S=0;S<y.length;S++)Rt(y[S]);delete c.g[m],c.h--}}this.F=null},Fe.prototype.K=function(c,m,y,S){return this.i.add(String(c),m,!1,y,S)},Fe.prototype.L=function(c,m,y,S){return this.i.add(String(c),m,!0,y,S)};function Ri(c,m,y,S){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var H=!0,q=0;q<m.length;++q){var ne=m[q];if(ne&&!ne.da&&ne.capture==y){var Ue=ne.listener,ze=ne.ha||ne.src;ne.fa&&fn(c.i,ne),H=Ue.call(ze,S)!==!1&&H}}return H&&!S.defaultPrevented}function Go(c,m,y){if(typeof c=="function")y&&(c=w(c,y));else if(c&&typeof c.handleEvent=="function")c=w(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:l.setTimeout(c,m||0)}function Os(c){c.g=Go(()=>{c.g=null,c.i&&(c.i=!1,Os(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Qo extends nn{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Os(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sn(c){nn.call(this),this.h=c,this.g={}}C(sn,nn);var Qt=[];function pn(c){de(c.g,function(m,y){this.g.hasOwnProperty(y)&&Ms(m)},c),c.g={}}sn.prototype.N=function(){sn.aa.N.call(this),pn(this)},sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gn=l.JSON.stringify,rc=l.JSON.parse,Di=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function ki(){}ki.prototype.h=null;function Vs(c){return c.h||(c.h=c.i())}function Yo(){}var Yt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vn(){nt.call(this,"d")}C(Vn,nt);function xi(){nt.call(this,"c")}C(xi,nt);var mn={},Dt=null;function at(){return Dt=Dt||new Fe}mn.La="serverreachability";function Pi(c){nt.call(this,mn.La,c)}C(Pi,nt);function Wr(c){const m=at();pt(m,new Pi(m))}mn.STAT_EVENT="statevent";function Ls(c,m){nt.call(this,mn.STAT_EVENT,c),this.stat=m}C(Ls,nt);function ut(c){const m=at();pt(m,new Ls(m,c))}mn.Ma="timingevent";function Ln(c,m){nt.call(this,mn.Ma,c),this.size=m}C(Ln,nt);function Kt(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},m)}function Fn(){this.g=!0}Fn.prototype.xa=function(){this.g=!1};function Ni(c,m,y,S,H,q){c.info(function(){if(c.g)if(q)for(var ne="",Ue=q.split("&"),ze=0;ze<Ue.length;ze++){var Ie=Ue[ze].split("=");if(1<Ie.length){var dt=Ie[0];Ie=Ie[1];var ht=dt.split("_");ne=2<=ht.length&&ht[1]=="type"?ne+(dt+"="+Ie+"&"):ne+(dt+"=redacted&")}}else ne=null;else ne=q;return"XMLHTTP REQ ("+S+") [attempt "+H+"]: "+m+`
`+y+`
`+ne})}function ic(c,m,y,S,H,q,ne){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+H+"]: "+m+`
`+y+`
`+q+" "+ne})}function lr(c,m,y,S){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ko(c,y)+(S?" "+S:"")})}function sc(c,m){c.info(function(){return"TIMEOUT: "+m})}Fn.prototype.info=function(){};function Ko(c,m){if(!c.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var S=y[c];if(!(2>S.length)){var H=S[1];if(Array.isArray(H)&&!(1>H.length)){var q=H[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ne=1;ne<H.length;ne++)H[ne]=""}}}}return gn(y)}catch{return m}}var Mi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Oi;function Vi(){}C(Vi,ki),Vi.prototype.g=function(){return new XMLHttpRequest},Vi.prototype.i=function(){return{}},Oi=new Vi;function kt(c,m,y,S){this.j=c,this.i=m,this.l=y,this.R=S||1,this.U=new sn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fs}function Fs(){this.i=null,this.g="",this.h=!1}var Li={},qr={};function cr(c,m,y){c.L=1,c.v=vn(Jt(m)),c.m=y,c.P=!0,Us(c,null)}function Us(c,m){c.F=Date.now(),Gr(c),c.A=Jt(c.v);var y=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),qs(y.i,"t",S),c.C=0,y=c.j.J,c.h=new Fs,c.g=Ht(c.j,y?m:null,!c.m),0<c.O&&(c.M=new Qo(w(c.Y,c,c.g),c.O)),m=c.U,y=c.g,S=c.ca;var H="readystatechange";Array.isArray(H)||(H&&(Qt[0]=H.toString()),H=Qt);for(var q=0;q<H.length;q++){var ne=Ii(y,H[q],S||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),Wr(),Ni(c.i,c.u,c.A,c.l,c.R,c.m)}kt.prototype.ca=function(c){c=c.target;const m=this.M;m&&Bt(c)==3?m.j():this.Y(c)},kt.prototype.Y=function(c){try{if(c==this.g)e:{const ht=Bt(this.g);var m=this.g.Ba();const fr=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||ca(this.g)))){this.J||ht!=4||m==7||(m==8||0>=fr?Wr(3):Wr(2)),Fi(this);var y=this.g.Z();this.X=y;t:if(Jo(this)){var S=ca(this.g);c="";var H=S.length,q=Bt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Un(this),ur(this);var ne="";break t}this.h.i=new l.TextDecoder}for(m=0;m<H;m++)this.h.h=!0,c+=this.h.i.decode(S[m],{stream:!(q&&m==H-1)});S.length=0,this.h.g+=c,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=y==200,ic(this.i,this.u,this.A,this.l,this.R,ht,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,ze=this.g;if((Ue=ze.g?ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Ue)){var Ie=Ue;break t}}Ie=null}if(y=Ie)lr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qr(this,y);else{this.o=!1,this.s=3,ut(12),Un(this),ur(this);break e}}if(this.P){y=!0;let Re;for(;!this.J&&this.C<ne.length;)if(Re=$r(this,ne),Re==qr){ht==4&&(this.s=4,ut(14),y=!1),lr(this.i,this.l,null,"[Incomplete Response]");break}else if(Re==Li){this.s=4,ut(15),lr(this.i,this.l,ne,"[Invalid Chunk]"),y=!1;break}else lr(this.i,this.l,Re,null),Qr(this,Re);if(Jo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||ne.length!=0||this.h.h||(this.s=1,ut(16),y=!1),this.o=this.o&&y,!y)lr(this.i,this.l,ne,"[Invalid Chunked Response]"),Un(this),ur(this);else if(0<ne.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),Y(dt),dt.M=!0,ut(11))}}else lr(this.i,this.l,ne,null),Qr(this,ne);ht==4&&Un(this),this.o&&!this.J&&(ht==4?me(this.j,this):(this.o=!1,Gr(this)))}else fc(this.g),y==400&&0<ne.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),Un(this),ur(this)}}}catch{}finally{}};function Jo(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function $r(c,m){var y=c.C,S=m.indexOf(`
`,y);return S==-1?qr:(y=Number(m.substring(y,S)),isNaN(y)?Li:(S+=1,S+y>m.length?qr:(m=m.slice(S,S+y),c.C=S+y,m)))}kt.prototype.cancel=function(){this.J=!0,Un(this)};function Gr(c){c.S=Date.now()+c.I,Bs(c,c.I)}function Bs(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Kt(w(c.ba,c),m)}function Fi(c){c.B&&(l.clearTimeout(c.B),c.B=null)}kt.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(sc(this.i,this.A),this.L!=2&&(Wr(),ut(17)),Un(this),this.s=2,ur(this)):Bs(this,this.S-c)};function ur(c){c.j.G==0||c.J||me(c.j,c)}function Un(c){Fi(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,pn(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function Qr(c,m){try{var y=c.j;if(y.G!=0&&(y.g==c||Yr(y.h,c))){if(!c.K&&Yr(y.h,c)&&y.G==3){try{var S=y.Da.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var H=S;if(H[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)ee(y),p(y);else break e;Q(y),ut(18)}}else y.za=H[1],0<y.za-y.T&&37500>H[2]&&y.F&&y.v==0&&!y.C&&(y.C=Kt(w(y.Za,y),6e3));if(1>=js(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Ee(y,11)}else if((c.K||y.g==c)&&ee(y),!X(m))for(H=y.Da.g.parse(m),m=0;m<H.length;m++){let Ie=H[m];if(y.T=Ie[0],Ie=Ie[1],y.G==2)if(Ie[0]=="c"){y.K=Ie[1],y.ia=Ie[2];const dt=Ie[3];dt!=null&&(y.la=dt,y.j.info("VER="+y.la));const ht=Ie[4];ht!=null&&(y.Aa=ht,y.j.info("SVER="+y.Aa));const fr=Ie[5];fr!=null&&typeof fr=="number"&&0<fr&&(S=1.5*fr,y.L=S,y.j.info("backChannelRequestTimeoutMs_="+S)),S=y;const Re=c.g;if(Re){const Wn=Re.g?Re.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wn){var q=S.h;q.g||Wn.indexOf("spdy")==-1&&Wn.indexOf("quic")==-1&&Wn.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Ui(q,q.h),q.h=null))}if(S.D){const xt=Re.g?Re.g.getResponseHeader("X-HTTP-Session-Id"):null;xt&&(S.ya=xt,je(S.I,S.D,xt))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),S=y;var ne=c;if(S.qa=Ze(S,S.J?S.ia:null,S.W),ne.K){gt(S.h,ne);var Ue=ne,ze=S.L;ze&&(Ue.I=ze),Ue.B&&(Fi(Ue),Gr(Ue)),S.g=ne}else F(S);0<y.i.length&&_(y)}else Ie[0]!="stop"&&Ie[0]!="close"||Ee(y,7);else y.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?Ee(y,7):d(y):Ie[0]!="noop"&&y.l&&y.l.ta(Ie),y.v=0)}}Wr(4)}catch{}}var oc=class{constructor(c,m){this.g=c,this.map=m}};function Zo(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hs(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function js(c){return c.h?1:c.g?c.g.size:0}function Yr(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Ui(c,m){c.g?c.g.add(m):c.h=m}function gt(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Zo.prototype.cancel=function(){if(this.i=Bn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Bn(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const y of c.g.values())m=m.concat(y.D);return m}return P(c.i)}function Bi(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var m=[],y=c.length,S=0;S<y;S++)m.push(c[S]);return m}m=[],y=0;for(S in c)m[y++]=c[S];return m}function ac(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var m=[];c=c.length;for(var y=0;y<c;y++)m.push(y);return m}m=[],y=0;for(const S in c)m[y++]=S;return m}}}function ea(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var y=ac(c),S=Bi(c),H=S.length,q=0;q<H;q++)m.call(void 0,S[q],y&&y[q],c)}var Hi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ta(c,m){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var S=c[y].indexOf("="),H=null;if(0<=S){var q=c[y].substring(0,S);H=c[y].substring(S+1)}else q=c[y];m(q,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Xt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Xt){this.h=c.h,ji(this,c.j),this.o=c.o,this.g=c.g,zi(this,c.s),this.l=c.l;var m=c.i,y=new jn;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Ot(this,y),this.m=c.m}else c&&(m=String(c).match(Hi))?(this.h=!1,ji(this,m[1]||"",!0),this.o=Kr(m[2]||""),this.g=Kr(m[3]||"",!0),zi(this,m[4]),this.l=Kr(m[5]||"",!0),Ot(this,m[6]||"",!0),this.m=Kr(m[7]||"")):(this.h=!1,this.i=new jn(null,this.h))}Xt.prototype.toString=function(){var c=[],m=this.j;m&&c.push(Xr(m,yn,!0),":");var y=this.g;return(y||m=="file")&&(c.push("//"),(m=this.o)&&c.push(Xr(m,yn,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(Xr(y,y.charAt(0)=="/"?lc:zs,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",Xr(y,na)),c.join("")};function Jt(c){return new Xt(c)}function ji(c,m,y){c.j=y?Kr(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function zi(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function Ot(c,m,y){m instanceof jn?(c.i=m,cc(c.i,c.h)):(y||(m=Xr(m,Jr)),c.i=new jn(m,c.h))}function je(c,m,y){c.i.set(m,y)}function vn(c){return je(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Kr(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Xr(c,m,y){return typeof c=="string"?(c=encodeURI(c).replace(m,Hn),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Hn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var yn=/[#\/\?@]/g,zs=/[#\?:]/g,lc=/[#\?]/g,Jr=/[#\?@]/g,na=/#/g;function jn(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function on(c){c.g||(c.g=new Map,c.h=0,c.i&&ta(c.i,function(m,y){c.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}n=jn.prototype,n.add=function(c,m){on(this),this.i=null,c=dr(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(m),this.h+=1,this};function Ws(c,m){on(c),m=dr(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function ra(c,m){return on(c),m=dr(c,m),c.g.has(m)}n.forEach=function(c,m){on(this),this.g.forEach(function(y,S){y.forEach(function(H){c.call(m,H,S,this)},this)},this)},n.na=function(){on(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let S=0;S<m.length;S++){const H=c[S];for(let q=0;q<H.length;q++)y.push(m[S])}return y},n.V=function(c){on(this);let m=[];if(typeof c=="string")ra(this,c)&&(m=m.concat(this.g.get(dr(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)m=m.concat(c[y])}return m},n.set=function(c,m){return on(this),this.i=null,c=dr(this,c),ra(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},n.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function qs(c,m,y){Ws(c,m),0<y.length&&(c.i=null,c.g.set(dr(c,m),P(y)),c.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var S=m[y];const q=encodeURIComponent(String(S)),ne=this.V(S);for(S=0;S<ne.length;S++){var H=q;ne[S]!==""&&(H+="="+encodeURIComponent(String(ne[S]))),c.push(H)}}return this.i=c.join("&")};function dr(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function cc(c,m){m&&!c.j&&(on(c),c.i=null,c.g.forEach(function(y,S){var H=S.toLowerCase();S!=H&&(Ws(this,S),qs(this,H,y))},c)),c.j=m}function $s(c,m){const y=new Fn;if(l.Image){const S=new Image;S.onload=A(_n,y,"TestLoadImage: loaded",!0,m,S),S.onerror=A(_n,y,"TestLoadImage: error",!1,m,S),S.onabort=A(_n,y,"TestLoadImage: abort",!1,m,S),S.ontimeout=A(_n,y,"TestLoadImage: timeout",!1,m,S),l.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else m(!1)}function uc(c,m){const y=new Fn,S=new AbortController,H=setTimeout(()=>{S.abort(),_n(y,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:S.signal}).then(q=>{clearTimeout(H),q.ok?_n(y,"TestPingServer: ok",!0,m):_n(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(H),_n(y,"TestPingServer: error",!1,m)})}function _n(c,m,y,S,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),S(y)}catch{}}function dc(){this.g=new Di}function hc(c,m,y){const S=y||"";try{ea(c,function(H,q){let ne=H;h(H)&&(ne=gn(H)),m.push(S+q+"="+encodeURIComponent(ne))})}catch(H){throw m.push(S+"type="+encodeURIComponent("_badmap")),H}}function Wi(c){this.l=c.Ub||null,this.j=c.eb||!1}C(Wi,ki),Wi.prototype.g=function(){return new qi(this.l,this.j)},Wi.prototype.i=function(c){return function(){return c}}({});function qi(c,m){Fe.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(qi,Fe),n=qi.prototype,n.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,zn(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||l).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hr(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,zn(this)),this.g&&(this.readyState=3,zn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ia(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ia(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?hr(this):zn(this),this.readyState==3&&ia(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,hr(this))},n.Qa=function(c){this.g&&(this.response=c,hr(this))},n.ga=function(){this.g&&hr(this)};function hr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,zn(c)}n.setRequestHeader=function(c,m){this.u.append(c,m)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=m.next();return c.join(`\r
`)};function zn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Gs(c){let m="";return de(c,function(y,S){m+=S,m+=":",m+=y,m+=`\r
`}),m}function Zr(c,m,y){e:{for(S in y){var S=!1;break e}S=!0}S||(y=Gs(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):je(c,m,y))}function Ge(c){Fe.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ge,Fe);var sa=/^https?$/i,Qs=["POST","PUT"];n=Ge.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,m,y,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oi.g(),this.v=this.o?Vs(this.o):Vs(Oi),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(q){oa(this,q);return}if(c=y||"",y=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var H in S)y.set(H,S[H]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const q of S.keys())y.set(q,S.get(q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(y.keys()).find(q=>q.toLowerCase()=="content-type"),H=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Qs,m,void 0))||S||H||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ne]of y)this.g.setRequestHeader(q,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ys(this),this.u=!0,this.g.send(c),this.u=!1}catch(q){oa(this,q)}};function oa(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,aa(c),En(c)}function aa(c){c.A||(c.A=!0,pt(c,"complete"),pt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,pt(this,"complete"),pt(this,"abort"),En(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),En(this,!0)),Ge.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?la(this):this.bb())},n.bb=function(){la(this)};function la(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Bt(c)!=4||c.Z()!=2)){if(c.u&&Bt(c)==4)Go(c.Ea,0,c);else if(pt(c,"readystatechange"),Bt(c)==4){c.h=!1;try{const ne=c.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var S;if(S=ne===0){var H=String(c.D).match(Hi)[1]||null;!H&&l.self&&l.self.location&&(H=l.self.location.protocol.slice(0,-1)),S=!sa.test(H?H.toLowerCase():"")}y=S}if(y)pt(c,"complete"),pt(c,"success");else{c.m=6;try{var q=2<Bt(c)?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.Z()+"]",aa(c)}}finally{En(c)}}}}function En(c,m){if(c.g){Ys(c);const y=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||pt(c,"ready");try{y.onreadystatechange=S}catch{}}}function Ys(c){c.I&&(l.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Bt(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Bt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),rc(m)}};function ca(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function fc(c){const m={};c=(c.g&&2<=Bt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(X(c[S]))continue;var y=B(c[S]);const H=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const q=m[H]||[];m[H]=q,q.push(y)}f(m,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ei(c,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||m}function a(c){this.Aa=0,this.i=[],this.j=new Fn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ei("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ei("baseRetryDelayMs",5e3,c),this.cb=ei("retryDelaySeedMs",1e4,c),this.Wa=ei("forwardChannelMaxRetries",2,c),this.wa=ei("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Zo(c&&c.concurrentRequestLimit),this.Da=new dc,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=a.prototype,n.la=8,n.G=1,n.connect=function(c,m,y,S){ut(0),this.W=c,this.H=m||{},y&&S!==void 0&&(this.H.OSID=y,this.H.OAID=S),this.F=this.X,this.I=Ze(this,null,this.W),_(this)};function d(c){if(v(c),c.G==3){var m=c.U++,y=Jt(c.I);if(je(y,"SID",c.K),je(y,"RID",m),je(y,"TYPE","terminate"),N(c,y),m=new kt(c,c.j,m),m.L=2,m.v=vn(Jt(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&l.Image&&(new Image().src=m.v,y=!0),y||(m.g=Ht(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Gr(m)}rt(c)}function p(c){c.g&&(Y(c),c.g.cancel(),c.g=null)}function v(c){p(c),c.u&&(l.clearTimeout(c.u),c.u=null),ee(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function _(c){if(!Hs(c.h)&&!c.s){c.s=!0;var m=c.Ga;Ct||Ps(),Nn||(Ct(),Nn=!0),hn.add(m,c),c.B=0}}function E(c,m){return js(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Kt(w(c.Ga,c,m),ke(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const H=new kt(this,this.j,c);let q=this.o;if(this.S&&(q?(q=R(q),L(q,this.S)):q=this.S),this.m!==null||this.O||(H.H=q,q=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var S=this.i[y];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=D(this,H,m),y=Jt(this.I),je(y,"RID",c),je(y,"CVER",22),this.D&&je(y,"X-HTTP-Session-Id",this.D),N(this,y),q&&(this.O?m="headers="+encodeURIComponent(String(Gs(q)))+"&"+m:this.m&&Zr(y,this.m,q)),Ui(this.h,H),this.Ua&&je(y,"TYPE","init"),this.P?(je(y,"$req",m),je(y,"SID","null"),H.T=!0,cr(H,y,null)):cr(H,y,m),this.G=2}}else this.G==3&&(c?T(this,c):this.i.length==0||Hs(this.h)||T(this))};function T(c,m){var y;m?y=m.l:y=c.U++;const S=Jt(c.I);je(S,"SID",c.K),je(S,"RID",y),je(S,"AID",c.T),N(c,S),c.m&&c.o&&Zr(S,c.m,c.o),y=new kt(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),m&&(c.i=m.D.concat(c.i)),m=D(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ui(c.h,y),cr(y,S,m)}function N(c,m){c.H&&de(c.H,function(y,S){je(m,S,y)}),c.l&&ea({},function(y,S){je(m,S,y)})}function D(c,m,y){y=Math.min(c.i.length,y);var S=c.l?w(c.l.Na,c.l,c):null;e:{var H=c.i;let q=-1;for(;;){const ne=["count="+y];q==-1?0<y?(q=H[0].g,ne.push("ofs="+q)):q=0:ne.push("ofs="+q);let Ue=!0;for(let ze=0;ze<y;ze++){let Ie=H[ze].g;const dt=H[ze].map;if(Ie-=q,0>Ie)q=Math.max(0,H[ze].g-100),Ue=!1;else try{hc(dt,ne,"req"+Ie+"_")}catch{S&&S(dt)}}if(Ue){S=ne.join("&");break e}}}return c=c.i.splice(0,y),m.D=c,S}function F(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;Ct||Ps(),Nn||(Ct(),Nn=!0),hn.add(m,c),c.v=0}}function Q(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Kt(w(c.Fa,c),ke(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,W(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Kt(w(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),p(this),W(this))};function Y(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function W(c){c.g=new kt(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=Jt(c.qa);je(m,"RID","rpc"),je(m,"SID",c.K),je(m,"AID",c.T),je(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&je(m,"TO",c.ja),je(m,"TYPE","xmlhttp"),N(c,m),c.m&&c.o&&Zr(m,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=vn(Jt(m)),y.m=null,y.P=!0,Us(y,c)}n.Za=function(){this.C!=null&&(this.C=null,p(this),Q(this),ut(19))};function ee(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function me(c,m){var y=null;if(c.g==m){ee(c),Y(c),c.g=null;var S=2}else if(Yr(c.h,m))y=m.D,gt(c.h,m),S=1;else return;if(c.G!=0){if(m.o)if(S==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var H=c.B;S=at(),pt(S,new Ln(S,y)),_(c)}else F(c);else if(H=m.s,H==3||H==0&&0<m.X||!(S==1&&E(c,m)||S==2&&Q(c)))switch(y&&0<y.length&&(m=c.h,m.i=m.i.concat(y)),H){case 1:Ee(c,5);break;case 4:Ee(c,10);break;case 3:Ee(c,6);break;default:Ee(c,2)}}}function ke(c,m){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*m}function Ee(c,m){if(c.j.info("Error code "+m),m==2){var y=w(c.fb,c),S=c.Xa;const H=!S;S=new Xt(S||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ji(S,"https"),vn(S),H?$s(S.toString(),y):uc(S.toString(),y)}else ut(2);c.G=0,c.l&&c.l.sa(m),rt(c),v(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function rt(c){if(c.G=0,c.ka=[],c.l){const m=Bn(c.h);(m.length!=0||c.i.length!=0)&&(O(c.ka,m),O(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function Ze(c,m,y){var S=y instanceof Xt?Jt(y):new Xt(y);if(S.g!="")m&&(S.g=m+"."+S.g),zi(S,S.s);else{var H=l.location;S=H.protocol,m=m?m+"."+H.hostname:H.hostname,H=+H.port;var q=new Xt(null);S&&ji(q,S),m&&(q.g=m),H&&zi(q,H),y&&(q.l=y),S=q}return y=c.D,m=c.ya,y&&m&&je(S,y,m),je(S,"VER",c.la),N(c,S),S}function Ht(c,m,y){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new Ge(new Wi({eb:y})):new Ge(c.pa),m.Ha(c.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function jt(){}n=jt.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ce(){}Ce.prototype.g=function(c,m){return new et(c,m)};function et(c,m){Fe.call(this),this.g=new a(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!X(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!X(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Zt(this)}C(et,Fe),et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},et.prototype.close=function(){d(this.g)},et.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=gn(c),c=y);m.i.push(new oc(m.Ya++,c)),m.G==3&&_(m)},et.prototype.N=function(){this.g.l=null,delete this.j,d(this.g),delete this.g,et.aa.N.call(this)};function Ne(c){Vn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const y in m){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}C(Ne,Vn);function Qe(){xi.call(this),this.status=1}C(Qe,xi);function Zt(c){this.g=c}C(Zt,jt),Zt.prototype.ua=function(){pt(this.g,"a")},Zt.prototype.ta=function(c){pt(this.g,new Ne(c))},Zt.prototype.sa=function(c){pt(this.g,new Qe)},Zt.prototype.ra=function(){pt(this.g,"b")},Ce.prototype.createWebChannel=Ce.prototype.g,et.prototype.send=et.prototype.o,et.prototype.open=et.prototype.m,et.prototype.close=et.prototype.close,Qg=function(){return new Ce},Gg=function(){return at()},$g=mn,nu={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mi.NO_ERROR=0,Mi.TIMEOUT=8,Mi.HTTP_ERROR=6,Pa=Mi,Xo.COMPLETE="complete",qg=Xo,Yo.EventType=Yt,Yt.OPEN="a",Yt.CLOSE="b",Yt.ERROR="c",Yt.MESSAGE="d",Fe.prototype.listen=Fe.prototype.K,eo=Yo,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,Wg=Ge}).apply(typeof pa<"u"?pa:typeof self<"u"?self:typeof window<"u"?window:{});const $h="@firebase/firestore",Gh="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let As="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new Vu("@firebase/firestore");function Yi(){return fi.logLevel}function ae(n,...e){if(fi.logLevel<=Me.DEBUG){const t=e.map(Qu);fi.debug(`Firestore (${As}): ${n}`,...t)}}function Zn(n,...e){if(fi.logLevel<=Me.ERROR){const t=e.map(Qu);fi.error(`Firestore (${As}): ${n}`,...t)}}function ds(n,...e){if(fi.logLevel<=Me.WARN){const t=e.map(Qu);fi.warn(`Firestore (${As}): ${n}`,...t)}}function Qu(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Yg(n,r,t)}function Yg(n,e,t){let r=`FIRESTORE (${As}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Zn(r),new Error(r)}function Be(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Yg(e,i,r)}function Ae(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends rr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bt.UNAUTHENTICATED))}shutdown(){}}class ST{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class IT{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let s=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yn)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Be(typeof r.accessToken=="string",31837,{l:r}),new Kg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new bt(e)}}class CT{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class RT{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new CT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DT{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Be(this.o===void 0,3512);const r=s=>{s.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Qh(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Qh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=kT(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function De(n,e){return n<e?-1:n>e?1:0}function ru(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return De(r,i);{const s=Xg(),o=xT(s.encode(Yh(n,t)),s.encode(Yh(e,t)));return o!==0?o:De(r,i)}}t+=r>65535?2:1}return De(n.length,e.length)}function Yh(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function xT(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return De(n[t],e[t]);return De(n.length,e.length)}function hs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=-62135596800,Xh=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Xh);return new lt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Kh)throw new le(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xh}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Kh;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new lt(0,0))}static max(){return new Te(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="__name__";class wn{constructor(e,t,r){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&_e(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return wn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wn?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=wn.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return De(e.length,t.length)}static compareSegments(e,t){const r=wn.isNumericId(e),i=wn.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?wn.extractNumericId(e).compare(wn.extractNumericId(t)):ru(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cr.fromString(e.substring(4,e.length-2))}}class Ye extends wn{construct(e,t,r){return new Ye(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ye(t)}static emptyPath(){return new Ye([])}}const PT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vt extends wn{construct(e,t,r){return new vt(e,t,r)}static isValidIdentifier(e){return PT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jh}static keyField(){return new vt([Jh])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new le(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new le(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new le(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new le(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vt(t)}static emptyPath(){return new vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Ye.fromString(e))}static fromName(e){return new he(Ye.fromString(e).popFirst(5))}static empty(){return new he(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Ye(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=-1;function NT(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Te.fromTimestamp(r===1e9?new lt(t+1,0):new lt(t,r));return new kr(i,he.empty(),e)}function MT(n){return new kr(n.readTime,n.key,mo)}class kr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new kr(Te.min(),he.empty(),mo)}static max(){return new kr(Te.max(),he.empty(),mo)}}function OT(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:De(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ss(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==VT)throw n;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,r)=>{t(e)})}static reject(e){return new J((t,r)=>{r(e)})}static waitFor(e){return new J((t,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=J.resolve(!1);for(const r of e)t=t.next(i=>i?J.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new J((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;t(e[h]).next(g=>{o[h]=g,++l,l===s&&r(o)},g=>i(g))}})}static doWhile(e,t){return new J((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function FT(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Is(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Dl.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=-1;function kl(n){return n==null}function Ja(n){return n===0&&1/n==-1/0}function UT(n){return typeof n=="number"&&Number.isInteger(n)&&!Ja(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="";function BT(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Zh(e)),e=HT(n.get(t),e);return Zh(e)}function HT(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case Zg:t+="";break;default:t+=s}}return t}function Zh(n){return n+Zg+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ur(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function em(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,t){this.comparator=e,this.root=t||mt.EMPTY}insert(e,t){return new Je(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ga(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ga(this.root,e,this.comparator,!1)}getReverseIterator(){return new ga(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ga(this.root,e,this.comparator,!0)}}class ga{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??mt.RED,this.left=i??mt.EMPTY,this.right=s??mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new mt(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return mt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1;mt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new mt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tf(this.data.getIterator())}getIteratorFrom(e){return new tf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ct(this.comparator);return t.data=e,t}}class tf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new zt([])}unionWith(e){let t=new ct(vt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new zt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hs(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new tm("Invalid base64 string: "+s):s}}(e);return new yt(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new yt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const jT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(n){if(Be(!!n,39018),typeof n=="string"){let e=0;const t=jT.exec(n);if(Be(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(n.seconds),nanos:tt(n.nanos)}}function tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Pr(n){return typeof n=="string"?yt.fromBase64String(n):yt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="server_timestamp",rm="__type__",im="__previous_value__",sm="__local_write_time__";function Ku(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[rm])===null||t===void 0?void 0:t.stringValue)===nm}function xl(n){const e=n.mapValue.fields[im];return Ku(e)?xl(e):e}function vo(n){const e=xr(n.mapValue.fields[sm].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,t,r,i,s,o,l,u,h,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=g}}const Za="(default)";class yo{constructor(e,t){this.projectId=e,this.database=t||Za}static empty(){return new yo("","")}get isDefaultDatabase(){return this.database===Za}isEqual(e){return e instanceof yo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="__type__",WT="__max__",ma={mapValue:{}},am="__vector__",el="value";function Nr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ku(n)?4:$T(n)?9007199254740991:qT(n)?10:11:_e(28295,{value:n})}function Rn(n,e){if(n===e)return!0;const t=Nr(n);if(t!==Nr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vo(n).isEqual(vo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=xr(i.timestampValue),l=xr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Pr(i.bytesValue).isEqual(Pr(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return tt(i.geoPointValue.latitude)===tt(s.geoPointValue.latitude)&&tt(i.geoPointValue.longitude)===tt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return tt(i.integerValue)===tt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=tt(i.doubleValue),l=tt(s.doubleValue);return o===l?Ja(o)===Ja(l):isNaN(o)&&isNaN(l)}return!1}(n,e);case 9:return hs(n.arrayValue.values||[],e.arrayValue.values||[],Rn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(ef(o)!==ef(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Rn(o[u],l[u])))return!1;return!0}(n,e);default:return _e(52216,{left:n})}}function _o(n,e){return(n.values||[]).find(t=>Rn(t,e))!==void 0}function fs(n,e){if(n===e)return 0;const t=Nr(n),r=Nr(e);if(t!==r)return De(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,e.booleanValue);case 2:return function(s,o){const l=tt(s.integerValue||s.doubleValue),u=tt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(n,e);case 3:return nf(n.timestampValue,e.timestampValue);case 4:return nf(vo(n),vo(e));case 5:return ru(n.stringValue,e.stringValue);case 6:return function(s,o){const l=Pr(s),u=Pr(o);return l.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const g=De(l[h],u[h]);if(g!==0)return g}return De(l.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const l=De(tt(s.latitude),tt(o.latitude));return l!==0?l:De(tt(s.longitude),tt(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return rf(n.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,h,g;const b=s.fields||{},w=o.fields||{},A=(l=b[el])===null||l===void 0?void 0:l.arrayValue,C=(u=w[el])===null||u===void 0?void 0:u.arrayValue,P=De(((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0,((g=C==null?void 0:C.values)===null||g===void 0?void 0:g.length)||0);return P!==0?P:rf(A,C)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===ma.mapValue&&o===ma.mapValue)return 0;if(s===ma.mapValue)return 1;if(o===ma.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},g=Object.keys(h);u.sort(),g.sort();for(let b=0;b<u.length&&b<g.length;++b){const w=ru(u[b],g[b]);if(w!==0)return w;const A=fs(l[u[b]],h[g[b]]);if(A!==0)return A}return De(u.length,g.length)}(n.mapValue,e.mapValue);default:throw _e(23264,{Pe:t})}}function nf(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return De(n,e);const t=xr(n),r=xr(e),i=De(t.seconds,r.seconds);return i!==0?i:De(t.nanos,r.nanos)}function rf(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=fs(t[i],r[i]);if(s)return s}return De(t.length,r.length)}function ps(n){return iu(n)}function iu(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=xr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Pr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return he.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=iu(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${iu(t.fields[o])}`;return i+"}"}(n.mapValue):_e(61005,{value:n})}function Na(n){switch(Nr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xl(n);return e?16+Na(e):16;case 5:return 2*n.stringValue.length;case 6:return Pr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Na(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ur(r.fields,(s,o)=>{i+=s.length+Na(o)}),i}(n.mapValue);default:throw _e(13486,{value:n})}}function sf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function su(n){return!!n&&"integerValue"in n}function Xu(n){return!!n&&"arrayValue"in n}function of(n){return!!n&&"nullValue"in n}function af(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ma(n){return!!n&&"mapValue"in n}function qT(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[om])===null||t===void 0?void 0:t.stringValue)===am}function oo(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ur(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=oo(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oo(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $T(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===WT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.value=e}static empty(){return new Ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ma(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oo(t)}setAll(e){let t=vt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!t.isImmediateParentOf(l)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=l.popLast()}o?r[l.lastSegment()]=oo(o):i.push(l.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Ma(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ma(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ur(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ft(oo(this.value))}}function lm(n){const e=[];return Ur(n.fields,(t,r)=>{const i=new vt([t]);if(Ma(r)){const s=lm(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,t,r,i,s,o,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new wt(e,0,Te.min(),Te.min(),Te.min(),Ft.empty(),0)}static newFoundDocument(e,t,r,i){return new wt(e,1,t,Te.min(),r,i,0)}static newNoDocument(e,t){return new wt(e,2,t,Te.min(),Te.min(),Ft.empty(),0)}static newUnknownDocument(e,t){return new wt(e,3,t,Te.min(),Te.min(),Ft.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,t){this.position=e,this.inclusive=t}}function lf(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),t.key):r=fs(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function cf(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Rn(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,t="asc"){this.field=e,this.dir=t}}function GT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{}class st extends cm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new YT(e,t,r):t==="array-contains"?new JT(e,r):t==="in"?new ZT(e,r):t==="not-in"?new eA(e,r):t==="array-contains-any"?new tA(e,r):new st(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new KT(e,r):new XT(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fs(t,this.value)):t!==null&&Nr(this.value)===Nr(t)&&this.matchesComparison(fs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dn extends cm{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new dn(e,t)}matches(e){return um(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function um(n){return n.op==="and"}function dm(n){return QT(n)&&um(n)}function QT(n){for(const e of n.filters)if(e instanceof dn)return!1;return!0}function ou(n){if(n instanceof st)return n.field.canonicalString()+n.op.toString()+ps(n.value);if(dm(n))return n.filters.map(e=>ou(e)).join(",");{const e=n.filters.map(t=>ou(t)).join(",");return`${n.op}(${e})`}}function hm(n,e){return n instanceof st?function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&Rn(r.value,i.value)}(n,e):n instanceof dn?function(r,i){return i instanceof dn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&hm(o,i.filters[l]),!0):!1}(n,e):void _e(19439)}function fm(n){return n instanceof st?function(t){return`${t.field.canonicalString()} ${t.op} ${ps(t.value)}`}(n):n instanceof dn?function(t){return t.op.toString()+" {"+t.getFilters().map(fm).join(" ,")+"}"}(n):"Filter"}class YT extends st{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class KT extends st{constructor(e,t){super(e,"in",t),this.keys=pm("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class XT extends st{constructor(e,t){super(e,"not-in",t),this.keys=pm("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function pm(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>he.fromName(r.referenceValue))}class JT extends st{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xu(t)&&_o(t.arrayValue,this.value)}}class ZT extends st{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_o(this.value.arrayValue,t)}}class eA extends st{constructor(e,t){super(e,"not-in",t)}matches(e){if(_o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_o(this.value.arrayValue,t)}}class tA extends st{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_o(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,t=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Ie=null}}function uf(n,e=null,t=[],r=[],i=null,s=null,o=null){return new nA(n,e,t,r,i,s,o)}function Ju(n){const e=Ae(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ou(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),kl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ps(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ps(r)).join(",")),e.Ie=t}return e.Ie}function Zu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!GT(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!hm(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!cf(n.startAt,e.startAt)&&cf(n.endAt,e.endAt)}function au(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,t=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function rA(n,e,t,r,i,s,o,l){return new No(n,e,t,r,i,s,o,l)}function ed(n){return new No(n)}function df(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gm(n){return n.collectionGroup!==null}function ao(n){const e=Ae(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ct(vt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new nl(s,r))}),t.has(vt.keyField().canonicalString())||e.Ee.push(new nl(vt.keyField(),r))}return e.Ee}function In(n){const e=Ae(n);return e.de||(e.de=iA(e,ao(n))),e.de}function iA(n,e){if(n.limitType==="F")return uf(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new nl(i.field,s)});const t=n.endAt?new tl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new tl(n.startAt.position,n.startAt.inclusive):null;return uf(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function lu(n,e){const t=n.filters.concat([e]);return new No(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function cu(n,e,t){return new No(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Pl(n,e){return Zu(In(n),In(e))&&n.limitType===e.limitType}function mm(n){return`${Ju(In(n))}|lt:${n.limitType}`}function Ki(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>fm(i)).join(", ")}]`),kl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ps(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ps(i)).join(",")),`Target(${r})`}(In(n))}; limitType=${n.limitType})`}function Nl(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):he.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of ao(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=lf(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,ao(r),i)||r.endAt&&!function(o,l,u){const h=lf(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,ao(r),i))}(n,e)}function sA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vm(n){return(e,t)=>{let r=!1;for(const i of ao(n)){const s=oA(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function oA(n,e,t){const r=n.field.isKeyField()?he.comparator(e.key,t.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?fs(u,h):_e(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ur(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return em(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=new Je(he.comparator);function er(){return aA}const ym=new Je(he.comparator);function to(...n){let e=ym;for(const t of n)e=e.insert(t.key,t);return e}function _m(n){let e=ym;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function oi(){return lo()}function Em(){return lo()}function lo(){return new yi(n=>n.toString(),(n,e)=>n.isEqual(e))}const lA=new Je(he.comparator),cA=new ct(he.comparator);function Oe(...n){let e=cA;for(const t of n)e=e.add(t);return e}const uA=new ct(De);function dA(){return uA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ja(e)?"-0":e}}function bm(n){return{integerValue:""+n}}function hA(n,e){return UT(e)?bm(e):td(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this._=void 0}}function fA(n,e,t){return n instanceof Eo?function(i,s){const o={fields:{[rm]:{stringValue:nm},[sm]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ku(s)&&(s=xl(s)),s&&(o.fields[im]=s),{mapValue:o}}(t,e):n instanceof bo?Tm(n,e):n instanceof wo?Am(n,e):function(i,s){const o=wm(i,s),l=hf(o)+hf(i.Re);return su(o)&&su(i.Re)?bm(l):td(i.serializer,l)}(n,e)}function pA(n,e,t){return n instanceof bo?Tm(n,e):n instanceof wo?Am(n,e):t}function wm(n,e){return n instanceof rl?function(r){return su(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Eo extends Ml{}class bo extends Ml{constructor(e){super(),this.elements=e}}function Tm(n,e){const t=Sm(e);for(const r of n.elements)t.some(i=>Rn(i,r))||t.push(r);return{arrayValue:{values:t}}}class wo extends Ml{constructor(e){super(),this.elements=e}}function Am(n,e){let t=Sm(e);for(const r of n.elements)t=t.filter(i=>!Rn(i,r));return{arrayValue:{values:t}}}class rl extends Ml{constructor(e,t){super(),this.serializer=e,this.Re=t}}function hf(n){return tt(n.integerValue||n.doubleValue)}function Sm(n){return Xu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,t){this.field=e,this.transform=t}}function mA(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof bo&&i instanceof bo||r instanceof wo&&i instanceof wo?hs(r.elements,i.elements,Rn):r instanceof rl&&i instanceof rl?Rn(r.Re,i.Re):r instanceof Eo&&i instanceof Eo}(n.transform,e.transform)}class vA{constructor(e,t){this.version=e,this.transformResults=t}}class cn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cn}static exists(e){return new cn(void 0,e)}static updateTime(e){return new cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oa(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ol{}function Im(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new nd(n.key,cn.none()):new Mo(n.key,n.data,cn.none());{const t=n.data,r=Ft.empty();let i=new ct(vt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Br(n.key,r,new zt(i.toArray()),cn.none())}}function yA(n,e,t){n instanceof Mo?function(i,s,o){const l=i.value.clone(),u=pf(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Br?function(i,s,o){if(!Oa(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=pf(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(Cm(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function co(n,e,t,r){return n instanceof Mo?function(s,o,l,u){if(!Oa(s.precondition,o))return l;const h=s.value.clone(),g=gf(s.fieldTransforms,u,o);return h.setAll(g),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof Br?function(s,o,l,u){if(!Oa(s.precondition,o))return l;const h=gf(s.fieldTransforms,u,o),g=o.data;return g.setAll(Cm(s)),g.setAll(h),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(b=>b.field))}(n,e,t,r):function(s,o,l){return Oa(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(n,e,t)}function _A(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=wm(r.transform,i||null);s!=null&&(t===null&&(t=Ft.empty()),t.set(r.field,s))}return t||null}function ff(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&hs(r,i,(s,o)=>mA(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Mo extends Ol{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Br extends Ol{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Cm(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function pf(n,e,t){const r=new Map;Be(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,pA(o,l,t[i]))}return r}function gf(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,fA(s,o,e))}return r}class nd extends Ol{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EA extends Ol{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&yA(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=co(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=co(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Em();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=t.has(i.key)?null:l;const u=Im(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Oe())}isEqual(e){return this.batchId===e.batchId&&hs(this.mutations,e.mutations,(t,r)=>ff(t,r))&&hs(this.baseMutations,e.baseMutations,(t,r)=>ff(t,r))}}class rd{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Be(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return lA}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new rd(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,Le;function AA(n){switch(n){case Z.OK:return _e(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return _e(15467,{code:n})}}function Rm(n){if(n===void 0)return Zn("GRPC error has no .code"),Z.UNKNOWN;switch(n){case it.OK:return Z.OK;case it.CANCELLED:return Z.CANCELLED;case it.UNKNOWN:return Z.UNKNOWN;case it.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case it.INTERNAL:return Z.INTERNAL;case it.UNAVAILABLE:return Z.UNAVAILABLE;case it.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case it.NOT_FOUND:return Z.NOT_FOUND;case it.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case it.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case it.ABORTED:return Z.ABORTED;case it.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case it.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case it.DATA_LOSS:return Z.DATA_LOSS;default:return _e(39323,{code:n})}}(Le=it||(it={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=new Cr([4294967295,4294967295],0);function mf(n){const e=Xg().encode(n),t=new zg;return t.update(e),new Uint8Array(t.digest())}function vf(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Cr([t,r],0),new Cr([i,s],0)]}class id{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new no(`Invalid padding: ${t}`);if(r<0)throw new no(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new no(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new no(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Cr.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(Cr.fromNumber(r)));return i.compare(SA)===1&&(i=new Cr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=mf(e),[r,i]=vf(t);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);if(!this.Se(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new id(s,i,t);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const t=mf(e),[r,i]=vf(t);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);this.be(o)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class no extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Oo.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Vl(Te.min(),i,new Je(De),er(),Oe())}}class Oo{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Oo(r,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class Dm{constructor(e,t){this.targetId=e,this.Ce=t}}class km{constructor(e,t,r=yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class yf{constructor(){this.Fe=0,this.Me=_f(),this.xe=yt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Oe(),t=Oe(),r=Oe();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:_e(38017,{changeType:s})}}),new Oo(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=_f()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Be(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class IA{constructor(e){this.ze=e,this.je=new Map,this.He=er(),this.Je=va(),this.Ye=va(),this.Ze=new Je(De)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const s=i.target;if(au(s))if(r===0){const o=new he(s.path);this.tt(t,o,wt.newNoDocument(o,Te.min()))}else Be(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const l=this.ct(e),u=l?this.lt(l,e,o):1;if(u!==0){this.st(t);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,l;try{o=Pr(r).toUint8Array()}catch(u){if(u instanceof tm)return ds("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new id(o,i,s)}catch(u){return ds(u instanceof no?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.pe===0?null:l}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.tt(t,s,null),i++)}),i}It(e){const t=new Map;this.je.forEach((s,o)=>{const l=this._t(o);if(l){if(s.current&&au(l.target)){const u=new he(l.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,wt.newNoDocument(u,e))}s.Le&&(t.set(o,s.qe()),s.Qe())}});let r=Oe();this.Ye.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this._t(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.He.forEach((s,o)=>o.setReadTime(e));const i=new Vl(e,t,this.Ze,this.He,r);return this.He=er(),this.Je=va(),this.Ye=va(),this.Ze=new Je(De),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new yf,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new ct(De),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new ct(De),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||ae("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new yf),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function va(){return new Je(he.comparator)}function _f(){return new Je(he.comparator)}const CA={asc:"ASCENDING",desc:"DESCENDING"},RA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DA={and:"AND",or:"OR"};class kA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function uu(n,e){return n.useProto3Json||kl(e)?e:{value:e}}function il(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xm(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function xA(n,e){return il(n,e.toTimestamp())}function Cn(n){return Be(!!n,49232),Te.fromTimestamp(function(t){const r=xr(t);return new lt(r.seconds,r.nanos)}(n))}function sd(n,e){return du(n,e).canonicalString()}function du(n,e){const t=function(i){return new Ye(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Pm(n){const e=Ye.fromString(n);return Be(Lm(e),10190,{key:e.toString()}),e}function hu(n,e){return sd(n.databaseId,e.path)}function Ic(n,e){const t=Pm(e);if(t.get(1)!==n.databaseId.projectId)throw new le(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(Mm(t))}function Nm(n,e){return sd(n.databaseId,e)}function PA(n){const e=Pm(n);return e.length===4?Ye.emptyPath():Mm(e)}function fu(n){return new Ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Mm(n){return Be(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Ef(n,e,t){return{name:hu(n,e),fields:t.value.mapValue.fields}}function NA(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:_e(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,g){return h.useProto3Json?(Be(g===void 0||typeof g=="string",58123),yt.fromBase64String(g||"")):(Be(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),yt.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const g=h.code===void 0?Z.UNKNOWN:Rm(h.code);return new le(g,h.message||"")}(o);t=new km(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ic(n,r.document.name),s=Cn(r.document.updateTime),o=r.document.createTime?Cn(r.document.createTime):Te.min(),l=new Ft({mapValue:{fields:r.document.fields}}),u=wt.newFoundDocument(i,s,o,l),h=r.targetIds||[],g=r.removedTargetIds||[];t=new Va(h,g,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ic(n,r.document),s=r.readTime?Cn(r.readTime):Te.min(),o=wt.newNoDocument(i,s),l=r.removedTargetIds||[];t=new Va([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ic(n,r.document),s=r.removedTargetIds||[];t=new Va([],s,i,null)}else{if(!("filter"in e))return _e(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new TA(i,s),l=r.targetId;t=new Dm(l,o)}}return t}function MA(n,e){let t;if(e instanceof Mo)t={update:Ef(n,e.key,e.value)};else if(e instanceof nd)t={delete:hu(n,e.key)};else if(e instanceof Br)t={update:Ef(n,e.key,e.data),updateMask:zA(e.fieldMask)};else{if(!(e instanceof EA))return _e(16599,{ft:e.type});t={verify:hu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Eo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof bo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof wo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof rl)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw _e(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:xA(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:_e(27497)}(n,e.precondition)),t}function OA(n,e){return n&&n.length>0?(Be(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?Cn(i.updateTime):Cn(s);return o.isEqual(Te.min())&&(o=Cn(s)),new vA(o,i.transformResults||[])}(t,e))):[]}function VA(n,e){return{documents:[Nm(n,e.path)]}}function LA(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Nm(n,i);const s=function(h){if(h.length!==0)return Vm(dn.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(g=>function(w){return{field:Xi(w.field),direction:BA(w.dir)}}(g))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=uu(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{gt:t,parent:i}}function FA(n){let e=PA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Be(r===1,65062);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let s=[];t.where&&(s=function(b){const w=Om(b);return w instanceof dn&&dm(w)?w.getFilters():[w]}(t.where));let o=[];t.orderBy&&(o=function(b){return b.map(w=>function(C){return new nl(Ji(C.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(w))}(t.orderBy));let l=null;t.limit&&(l=function(b){let w;return w=typeof b=="object"?b.value:b,kl(w)?null:w}(t.limit));let u=null;t.startAt&&(u=function(b){const w=!!b.before,A=b.values||[];return new tl(A,w)}(t.startAt));let h=null;return t.endAt&&(h=function(b){const w=!b.before,A=b.values||[];return new tl(A,w)}(t.endAt)),rA(e,i,o,s,l,"F",u,h)}function UA(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Om(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ji(t.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ji(t.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ji(t.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ji(t.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(n):n.fieldFilter!==void 0?function(t){return st.create(Ji(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return dn.create(t.compositeFilter.filters.map(r=>Om(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(t.compositeFilter.op))}(n):_e(30097,{filter:n})}function BA(n){return CA[n]}function HA(n){return RA[n]}function jA(n){return DA[n]}function Xi(n){return{fieldPath:n.canonicalString()}}function Ji(n){return vt.fromServerFormat(n.fieldPath)}function Vm(n){return n instanceof st?function(t){if(t.op==="=="){if(af(t.value))return{unaryFilter:{field:Xi(t.field),op:"IS_NAN"}};if(of(t.value))return{unaryFilter:{field:Xi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(af(t.value))return{unaryFilter:{field:Xi(t.field),op:"IS_NOT_NAN"}};if(of(t.value))return{unaryFilter:{field:Xi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xi(t.field),op:HA(t.op),value:t.value}}}(n):n instanceof dn?function(t){const r=t.getFilters().map(i=>Vm(i));return r.length===1?r[0]:{compositeFilter:{op:jA(t.op),filters:r}}}(n):_e(54877,{filter:n})}function zA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Lm(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,t,r,i,s=Te.min(),o=Te.min(),l=yt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.wt=e}}function qA(n){const e=FA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?cu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.Cn=new GA}addToCollectionParentIndex(e,t){return this.Cn.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(kr.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(kr.min())}updateCollectionGroup(e,t,r){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class GA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ct(Ye.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ct(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fm=41943040;class Lt{static withCacheSize(e){return new Lt(e,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(Fm,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new gs(0)}static lr(){return new gs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="LruGarbageCollector",QA=1048576;function Tf([n,e],[t,r]){const i=De(n,t);return i===0?De(e,r):i}class YA{constructor(e){this.Er=e,this.buffer=new ct(Tf),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Tf(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ae(wf,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Is(t)?ae(wf,"Ignoring IndexedDB error during garbage collection: ",t):await Ss(t)}await this.mr(3e5)})}}class XA{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return J.resolve(Dl.le);const r=new YA(t);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(bf)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bf):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,i,s,o,l,u,h;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),i=this.params.maximumSequenceNumbersToCollect):i=b,o=Date.now(),this.nthSequenceNumber(e,i))).next(b=>(r=b,l=Date.now(),this.removeTargets(e,r,t))).next(b=>(s=b,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(b=>(h=Date.now(),Yi()<=Me.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-g}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${b} documents in `+(h-u)+`ms
Total Duration: ${h-g}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:b})))}}function JA(n,e){return new XA(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(){this.changes=new yi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?J.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&co(r.mutation,i,zt.empty(),lt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Oe()){const i=oi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=to();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=oi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Oe()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{t.set(o,l)})})}computeViews(e,t,r,i){let s=er();const o=lo(),l=function(){return lo()}();return t.forEach((u,h)=>{const g=r.get(h.key);i.has(h.key)&&(g===void 0||g.mutation instanceof Br)?s=s.insert(h.key,h):g!==void 0?(o.set(h.key,g.mutation.getFieldMask()),co(g.mutation,h,g.mutation.getFieldMask(),lt.now())):o.set(h.key,zt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,g)=>o.set(h,g)),t.forEach((h,g)=>{var b;return l.set(h,new eS(g,(b=o.get(h))!==null&&b!==void 0?b:null))}),l))}recalculateAndSaveOverlays(e,t){const r=lo();let i=new Je((o,l)=>o-l),s=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=t.get(u);if(h===null)return;let g=r.get(u)||zt.empty();g=l.applyToLocalView(h,g),r.set(u,g);const b=(i.get(l.batchId)||Oe()).add(u);i=i.insert(l.batchId,b)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,g=u.value,b=Em();g.forEach(w=>{if(!s.has(w)){const A=Im(t.get(w),r.get(w));A!==null&&b.set(w,A),s=s.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,b))}return J.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):J.resolve(oi());let l=mo,u=s;return o.next(h=>J.forEach(h,(g,b)=>(l<b.largestBatchId&&(l=b.largestBatchId),s.get(g)?J.resolve():this.remoteDocumentCache.getEntry(e,g).next(w=>{u=u.insert(g,w)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,Oe())).next(g=>({batchId:l,changes:_m(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(r=>{let i=to();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=to();return this.indexManager.getCollectionParents(e,s).next(l=>J.forEach(l,u=>{const h=function(b,w){return new No(w,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(g=>{g.forEach((b,w)=>{o=o.insert(b,w)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,h)=>{const g=h.getKey();o.get(g)===null&&(o=o.insert(g,wt.newInvalidDocument(g)))});let l=to();return o.forEach((u,h)=>{const g=s.get(u);g!==void 0&&co(g.mutation,h,zt.empty(),lt.now()),Nl(t,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return J.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Cn(i.createTime)}}(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(i){return{name:i.name,query:qA(i.bundledQuery),readTime:Cn(i.readTime)}}(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.overlays=new Je(he.comparator),this.Qr=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const r=oi();return J.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.bt(e,t,s)}),J.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(r)),J.resolve()}getOverlaysForCollection(e,t,r){const i=oi(),s=t.length+1,o=new he(t.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return J.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Je((h,g)=>h-g);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let g=s.get(h.largestBatchId);g===null&&(g=oi(),s=s.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const l=oi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,g)=>l.set(h,g)),!(l.size()>=i)););return J.resolve(l)}bt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new wA(t,r));let s=this.Qr.get(t);s===void 0&&(s=Oe(),this.Qr.set(t,s)),this.Qr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(){this.$r=new ct(ft.Ur),this.Kr=new ct(ft.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new ft(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new ft(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new he(new Ye([])),r=new ft(t,e),i=new ft(t,e+1),s=[];return this.Kr.forEachInRange([r,i],o=>{this.zr(o),s.push(o.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new he(new Ye([])),r=new ft(t,e),i=new ft(t,e+1);let s=Oe();return this.Kr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new ft(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class ft{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return he.comparator(e.key,t.key)||De(e.Zr,t.Zr)}static Wr(e,t){return De(e.Zr,t.Zr)||he.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new ct(ft.Ur)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new bA(s,t,r,i);this.mutationQueue.push(o);for(const l of i)this.Xr=this.Xr.add(new ft(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return J.resolve(o)}lookupMutationBatch(e,t){return J.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ti(r),s=i<0?0:i;return J.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?Yu:this.nr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ft(t,0),i=new ft(t,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([r,i],o=>{const l=this.ei(o.Zr);s.push(l)}),J.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ct(De);return t.forEach(i=>{const s=new ft(i,0),o=new ft(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,o],l=>{r=r.add(l.Zr)})}),J.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;he.isDocumentKey(s)||(s=s.child(""));const o=new ft(new he(s),0);let l=new ct(De);return this.Xr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.Zr)),!0)},o),J.resolve(this.ni(l))}ni(e){const t=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Be(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return J.forEach(t.mutations,i=>{const s=new ft(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new ft(t,0),i=this.Xr.firstAfterOrEqual(r);return J.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.ii=e,this.docs=function(){return new Je(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return J.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(t))}getEntries(e,t){let r=er();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wt.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=er();const o=t.path,l=new he(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:g}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||OT(MT(g),r)<=0||(i.has(g.key)||Nl(t,g))&&(s=s.insert(g.key,g.mutableCopy()))}return J.resolve(s)}getAllFromCollectionGroup(e,t,r,i){_e(9500)}si(e,t){return J.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new aS(this)}getSize(e){return J.resolve(this.size)}}class aS extends ZA{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),J.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this.persistence=e,this.oi=new yi(t=>Ju(t),Zu),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this._i=0,this.ai=new od,this.targetCount=0,this.ui=gs.cr()}forEachTarget(e,t){return this.oi.forEach((r,i)=>t(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),J.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new gs(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.Tr(t),J.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.oi.forEach((o,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.oi.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),J.waitFor(s).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return J.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),J.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),J.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return J.resolve(r)}containsKey(e,t){return J.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t){this.ci={},this.overlays={},this.li=new Dl(0),this.hi=!1,this.hi=!0,this.Pi=new iS,this.referenceDelegate=e(this),this.Ti=new lS(this),this.indexManager=new $A,this.remoteDocumentCache=function(i){return new oS(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new WA(t),this.Ei=new nS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new sS(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){ae("MemoryPersistence","Starting transaction:",e);const i=new cS(this.li.next());return this.referenceDelegate.di(),r(i).next(s=>this.referenceDelegate.Ai(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ri(e,t){return J.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class cS extends LT{constructor(e){super(),this.currentSequenceNumber=e}}class ad{constructor(e){this.persistence=e,this.Vi=new od,this.mi=null}static fi(e){return new ad(e)}get gi(){if(this.mi)return this.mi;throw _e(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),J.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),J.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.gi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.gi,r=>{const i=he.fromPath(r);return this.pi(e,i).next(s=>{s||t.removeEntry(i,Te.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return J.or([()=>J.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class sl{constructor(e,t){this.persistence=e,this.yi=new yi(r=>BT(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=JA(this,t)}static fi(e,t){return new sl(e,t)}di(){}Ai(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Sr(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return J.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(s=>s?J.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,t).next(l=>{l||(r++,s.removeEntry(o,Te.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),J.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Na(e.data.value)),t}Dr(e,t,r){return J.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.yi.get(t);return J.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ds=r,this.As=i}static Rs(e,t){let r=Oe(),i=Oe();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ld(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return W_()?8:FT(St())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ws(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Ss(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new uS;return this.bs(e,t,o).next(l=>{if(s.result=l,this.fs)return this.Ds(e,t,o,l.size)})}).next(()=>s.result)}Ds(e,t,r,i){return r.documentReadCount<this.gs?(Yi()<=Me.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Ki(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),J.resolve()):(Yi()<=Me.DEBUG&&ae("QueryEngine","Query:",Ki(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(Yi()<=Me.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Ki(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(t))):J.resolve())}ws(e,t){if(df(t))return J.resolve(null);let r=In(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=cu(t,null,"F"),r=In(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Oe(...s);return this.ys.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.vs(t,l);return this.Cs(t,h,o,u.readTime)?this.ws(e,cu(t,null,"F")):this.Fs(e,h,t,u)}))})))}Ss(e,t,r,i){return df(t)||i.isEqual(Te.min())?J.resolve(null):this.ys.getDocuments(e,r).next(s=>{const o=this.vs(t,s);return this.Cs(t,o,r,i)?J.resolve(null):(Yi()<=Me.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ki(t)),this.Fs(e,o,t,NT(i,mo)).next(l=>l))})}vs(e,t){let r=new ct(vm(e));return t.forEach((i,s)=>{Nl(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}bs(e,t,r){return Yi()<=Me.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Ki(t)),this.ys.getDocumentsMatchingQuery(e,t,kr.min(),r)}Fs(e,t,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd="LocalStore",hS=3e8;class fS{constructor(e,t,r,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new Je(De),this.Os=new yi(s=>Ju(s),Zu),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tS(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function pS(n,e,t,r){return new fS(n,e,t,r)}async function Bm(n,e){const t=Ae(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=Oe();for(const h of i){o.push(h.batchId);for(const g of h.mutations)u=u.add(g.key)}for(const h of s){l.push(h.batchId);for(const g of h.mutations)u=u.add(g.key)}return t.localDocuments.getDocuments(r,u).next(h=>({ks:h,removedBatchIds:o,addedBatchIds:l}))})})}function gS(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Bs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,g){const b=h.batch,w=b.keys();let A=J.resolve();return w.forEach(C=>{A=A.next(()=>g.getEntry(u,C)).next(P=>{const O=h.docVersions.get(C);Be(O!==null,48541),P.version.compareTo(O)<0&&(b.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),g.addEntry(P)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(u,b))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Oe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Hm(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function mS(n,e){const t=Ae(n),r=e.snapshotVersion;let i=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.xs;const l=[];e.targetChanges.forEach((g,b)=>{const w=i.get(b);if(!w)return;l.push(t.Ti.removeMatchingKeys(s,g.removedDocuments,b).next(()=>t.Ti.addMatchingKeys(s,g.addedDocuments,b)));let A=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(b)!==null?A=A.withResumeToken(yt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):g.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(g.resumeToken,r)),i=i.insert(b,A),function(P,O,U){return P.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=hS?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(w,A,g)&&l.push(t.Ti.updateTargetData(s,A))});let u=er(),h=Oe();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(s,g))}),l.push(vS(s,o,e.documentUpdates).next(g=>{u=g.qs,h=g.Qs})),!r.isEqual(Te.min())){const g=t.Ti.getLastRemoteSnapshotVersion(s).next(b=>t.Ti.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(g)}return J.waitFor(l).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(t.xs=i,s))}function vS(n,e,t){let r=Oe(),i=Oe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=er();return t.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(Te.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):ae(cd,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{qs:o,Qs:i}})}function yS(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Yu),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _S(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ti.getTargetData(r,e).next(s=>s?(i=s,J.resolve(i)):t.Ti.allocateTargetId(r).next(o=>(i=new Er(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function pu(n,e,t){const r=Ae(n),i=r.xs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Is(o))throw o;ae(cd,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function Af(n,e,t){const r=Ae(n);let i=Te.min(),s=Oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,g){const b=Ae(u),w=b.Os.get(g);return w!==void 0?J.resolve(b.xs.get(w)):b.Ti.getTargetData(h,g)}(r,o,In(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,t?i:Te.min(),t?s:Oe())).next(l=>(ES(r,sA(e),l),{documents:l,$s:s})))}function ES(n,e,t){let r=n.Ns.get(e)||Te.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ns.set(e,r)}class Sf{constructor(){this.activeTargetIds=dA()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bS{constructor(){this.xo=new Sf,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Sf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="ConnectivityMonitor";class Cf{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ae(If,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ae(If,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya=null;function gu(){return ya===null?ya=function(){return 268435456+Math.round(2147483648*Math.random())}():ya++,"0x"+ya.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc="RestConnection",TS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AS{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Za?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,t,r,i,s){const o=gu(),l=this.jo(e,t.toUriEncodedString());ae(Cc,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,i,s);const{host:h}=new URL(l),g=Io(h);return this.Jo(e,l,u,r,g).then(b=>(ae(Cc,`Received RPC '${e}' ${o}: `,b),b),b=>{throw ds(Cc,`RPC '${e}' ${o} failed with error: `,b,"url: ",l,"request:",r),b})}Yo(e,t,r,i,s,o){return this.zo(e,t,r,i,s)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+As}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}jo(e,t){const r=TS[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et="WebChannelConnection";class IS extends AS{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const o=gu();return new Promise((l,u)=>{const h=new Wg;h.setWithCredentials(!0),h.listenOnce(qg.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Pa.NO_ERROR:const b=h.getResponseJson();ae(Et,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(b)),l(b);break;case Pa.TIMEOUT:ae(Et,`RPC '${e}' ${o} timed out`),u(new le(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Pa.HTTP_ERROR:const w=h.getStatus();if(ae(Et,`RPC '${e}' ${o} failed with status:`,w,"response text:",h.getResponseText()),w>0){let A=h.getResponseJson();Array.isArray(A)&&(A=A[0]);const C=A==null?void 0:A.error;if(C&&C.status&&C.message){const P=function(U){const X=U.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(X)>=0?X:Z.UNKNOWN}(C.status);u(new le(P,C.message))}else u(new le(Z.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new le(Z.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ae(Et,`RPC '${e}' ${o} completed.`)}});const g=JSON.stringify(i);ae(Et,`RPC '${e}' ${o} sending request:`,i),h.send(t,"POST",g,r,15)})}T_(e,t,r){const i=gu(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Qg(),l=Gg(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const g=s.join("");ae(Et,`Creating RPC '${e}' stream ${i}: ${g}`,u);const b=o.createWebChannel(g,u);let w=!1,A=!1;const C=new SS({Zo:O=>{A?ae(Et,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(w||(ae(Et,`Opening RPC '${e}' stream ${i} transport.`),b.open(),w=!0),ae(Et,`RPC '${e}' stream ${i} sending:`,O),b.send(O))},Xo:()=>b.close()}),P=(O,U,X)=>{O.listen(U,te=>{try{X(te)}catch(ie){setTimeout(()=>{throw ie},0)}})};return P(b,eo.EventType.OPEN,()=>{A||(ae(Et,`RPC '${e}' stream ${i} transport opened.`),C.__())}),P(b,eo.EventType.CLOSE,()=>{A||(A=!0,ae(Et,`RPC '${e}' stream ${i} transport closed`),C.u_())}),P(b,eo.EventType.ERROR,O=>{A||(A=!0,ds(Et,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),C.u_(new le(Z.UNAVAILABLE,"The operation could not be completed")))}),P(b,eo.EventType.MESSAGE,O=>{var U;if(!A){const X=O.data[0];Be(!!X,16349);const te=X,ie=(te==null?void 0:te.error)||((U=te[0])===null||U===void 0?void 0:U.error);if(ie){ae(Et,`RPC '${e}' stream ${i} received error:`,ie);const Se=ie.status;let de=function(k){const L=it[k];if(L!==void 0)return Rm(L)}(Se),f=ie.message;de===void 0&&(de=Z.INTERNAL,f="Unknown error status: "+Se+" with message "+ie.message),A=!0,C.u_(new le(de,f)),b.close()}else ae(Et,`RPC '${e}' stream ${i} received:`,X),C.c_(X)}}),P(l,$g.STAT_EVENT,O=>{O.stat===nu.PROXY?ae(Et,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===nu.NOPROXY&&ae(Et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.a_()},0),C}}function Rc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(n){return new kA(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,t,r=1e3,i=1.5,s=6e4){this.xi=e,this.timerId=t,this.I_=r,this.E_=i,this.d_=s,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),i=Math.max(0,t-r);i>0&&ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="PersistentStream";class zm{constructor(e,t,r,i,s,o,l,u){this.xi=e,this.y_=r,this.w_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new jm(e,t)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Zn(t.toString()),Zn("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.S_===t&&this.K_(r,i)},r=>{e(()=>{const i=new le(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(i)})})}K_(e,t){const r=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.W_(i))}),this.stream.onMessage(i=>{r(()=>++this.v_==1?this.z_(i):this.onNext(i))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return ae(Rf,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(ae(Rf,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CS extends zm{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=NA(this.serializer,e),r=function(s){if(!("targetChange"in s))return Te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Te.min():o.readTime?Cn(o.readTime):Te.min()}(e);return this.listener.j_(t,r)}H_(e){const t={};t.database=fu(this.serializer),t.addTarget=function(s,o){let l;const u=o.target;if(l=au(u)?{documents:VA(s,u)}:{query:LA(s,u).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=xm(s,o.resumeToken);const h=uu(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Te.min())>0){l.readTime=il(s,o.snapshotVersion.toTimestamp());const h=uu(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=UA(this.serializer,e);r&&(t.labels=r),this.L_(t)}J_(e){const t={};t.database=fu(this.serializer),t.removeTarget=e,this.L_(t)}}class RS extends zm{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=OA(e.writeResults,e.commitTime),r=Cn(e.commitTime);return this.listener.ea(r,t)}ta(){const e={};e.database=fu(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>MA(this.serializer,r))};this.L_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{}class kS extends DS{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.na=!1}ra(){if(this.na)throw new le(Z.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.zo(e,du(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new le(Z.UNKNOWN,s.toString())})}Yo(e,t,r,i,s){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Yo(e,du(t,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(Z.UNKNOWN,o.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class xS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Zn(t),this.oa=!1):ae("OnlineStateTracker",t)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi="RemoteStore";class PS{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=s,this.Ea.No(o=>{r.enqueueAndForget(async()=>{_i(this)&&(ae(pi,"Restarting streams for network reachability change."),await async function(u){const h=Ae(u);h.Ta.add(4),await Vo(h),h.da.set("Unknown"),h.Ta.delete(4),await Fl(h)}(this))})}),this.da=new xS(r,i)}}async function Fl(n){if(_i(n))for(const e of n.Ia)await e(!0)}async function Vo(n){for(const e of n.Ia)await e(!1)}function Wm(n,e){const t=Ae(n);t.Pa.has(e.targetId)||(t.Pa.set(e.targetId,e),fd(t)?hd(t):Cs(t).M_()&&dd(t,e))}function ud(n,e){const t=Ae(n),r=Cs(t);t.Pa.delete(e),r.M_()&&qm(t,e),t.Pa.size===0&&(r.M_()?r.N_():_i(t)&&t.da.set("Unknown"))}function dd(n,e){if(n.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cs(n).H_(e)}function qm(n,e){n.Aa.Ke(e),Cs(n).J_(e)}function hd(n){n.Aa=new IA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Pa.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Cs(n).start(),n.da._a()}function fd(n){return _i(n)&&!Cs(n).F_()&&n.Pa.size>0}function _i(n){return Ae(n).Ta.size===0}function $m(n){n.Aa=void 0}async function NS(n){n.da.set("Online")}async function MS(n){n.Pa.forEach((e,t)=>{dd(n,e)})}async function OS(n,e){$m(n),fd(n)?(n.da.ca(e),hd(n)):n.da.set("Unknown")}async function VS(n,e,t){if(n.da.set("Online"),e instanceof km&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Pa.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Pa.delete(l),i.Aa.removeTarget(l))}(n,e)}catch(r){ae(pi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ol(n,r)}else if(e instanceof Va?n.Aa.Xe(e):e instanceof Dm?n.Aa.ot(e):n.Aa.nt(e),!t.isEqual(Te.min()))try{const r=await Hm(n.localStore);t.compareTo(r)>=0&&await function(s,o){const l=s.Aa.It(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const g=s.Pa.get(h);g&&s.Pa.set(h,g.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const g=s.Pa.get(u);if(!g)return;s.Pa.set(u,g.withResumeToken(yt.EMPTY_BYTE_STRING,g.snapshotVersion)),qm(s,u);const b=new Er(g.target,u,h,g.sequenceNumber);dd(s,b)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t)}catch(r){ae(pi,"Failed to raise snapshot:",r),await ol(n,r)}}async function ol(n,e,t){if(!Is(e))throw e;n.Ta.add(1),await Vo(n),n.da.set("Offline"),t||(t=()=>Hm(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ae(pi,"Retrying IndexedDB access"),await t(),n.Ta.delete(1),await Fl(n)})}function Gm(n,e){return e().catch(t=>ol(n,t,e))}async function Ul(n){const e=Ae(n),t=Mr(e);let r=e.ha.length>0?e.ha[e.ha.length-1].batchId:Yu;for(;LS(e);)try{const i=await yS(e.localStore,r);if(i===null){e.ha.length===0&&t.N_();break}r=i.batchId,FS(e,i)}catch(i){await ol(e,i)}Qm(e)&&Ym(e)}function LS(n){return _i(n)&&n.ha.length<10}function FS(n,e){n.ha.push(e);const t=Mr(n);t.M_()&&t.Y_&&t.Z_(e.mutations)}function Qm(n){return _i(n)&&!Mr(n).F_()&&n.ha.length>0}function Ym(n){Mr(n).start()}async function US(n){Mr(n).ta()}async function BS(n){const e=Mr(n);for(const t of n.ha)e.Z_(t.mutations)}async function HS(n,e,t){const r=n.ha.shift(),i=rd.from(r,e,t);await Gm(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Ul(n)}async function jS(n,e){e&&Mr(n).Y_&&await async function(r,i){if(function(o){return AA(o)&&o!==Z.ABORTED}(i.code)){const s=r.ha.shift();Mr(r).O_(),await Gm(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ul(r)}}(n,e),Qm(n)&&Ym(n)}async function Df(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),ae(pi,"RemoteStore received new credentials");const r=_i(t);t.Ta.add(3),await Vo(t),r&&t.da.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ta.delete(3),await Fl(t)}async function zS(n,e){const t=Ae(n);e?(t.Ta.delete(2),await Fl(t)):e||(t.Ta.add(2),await Vo(t),t.da.set("Unknown"))}function Cs(n){return n.Ra||(n.Ra=function(t,r,i){const s=Ae(t);return s.ra(),new CS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{e_:NS.bind(null,n),n_:MS.bind(null,n),i_:OS.bind(null,n),j_:VS.bind(null,n)}),n.Ia.push(async e=>{e?(n.Ra.O_(),fd(n)?hd(n):n.da.set("Unknown")):(await n.Ra.stop(),$m(n))})),n.Ra}function Mr(n){return n.Va||(n.Va=function(t,r,i){const s=Ae(t);return s.ra(),new RS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:US.bind(null,n),i_:jS.bind(null,n),X_:BS.bind(null,n),ea:HS.bind(null,n)}),n.Ia.push(async e=>{e?(n.Va.O_(),await Ul(n)):(await n.Va.stop(),n.ha.length>0&&(ae(pi,`Stopping write stream with ${n.ha.length} pending writes`),n.ha=[]))})),n.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,l=new pd(e,t,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gd(n,e){if(Zn("AsyncQueue",`${e}: ${n}`),Is(n))return new le(Z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{static emptySet(e){return new ss(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=to(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ss)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ss;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(){this.ma=new Je(he.comparator)}track(e){const t=e.doc.key,r=this.ma.get(t);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(t,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(t):e.type===1&&r.type===2?this.ma=this.ma.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):_e(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal((t,r)=>{e.push(r)}),e}}class ms{constructor(e,t,r,i,s,o,l,u,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(l=>{o.push({type:0,doc:l})}),new ms(e,t,ss.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class qS{constructor(){this.queries=xf(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(t,r){const i=Ae(t),s=i.queries;i.queries=xf(),s.forEach((o,l)=>{for(const u of l.ya)u.onError(r)})})(this,new le(Z.ABORTED,"Firestore shutting down"))}}function xf(){return new yi(n=>mm(n),Pl)}async function Km(n,e){const t=Ae(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.wa()&&e.Sa()&&(r=2):(s=new WS,r=e.Sa()?0:1);try{switch(r){case 0:s.pa=await t.onListen(i,!0);break;case 1:s.pa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const l=gd(o,`Initialization of query '${Ki(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,s),s.ya.push(e),e.Da(t.onlineState),s.pa&&e.va(s.pa)&&md(t)}async function Xm(n,e){const t=Ae(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.ya.indexOf(e);o>=0&&(s.ya.splice(o,1),s.ya.length===0?i=e.Sa()?0:1:!s.wa()&&e.Sa()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function $S(n,e){const t=Ae(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const l of o.ya)l.va(i)&&(r=!0);o.pa=i}}r&&md(t)}function GS(n,e,t){const r=Ae(n),i=r.queries.get(e);if(i)for(const s of i.ya)s.onError(t);r.queries.delete(e)}function md(n){n.ba.forEach(e=>{e.next()})}var mu,Pf;(Pf=mu||(mu={})).Ca="default",Pf.Cache="cache";class Jm{constructor(e,t,r){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ms(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache||!this.Sa())return!0;const r=t!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ba(e){e=ms.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==mu.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e){this.key=e}}class ev{constructor(e){this.key=e}}class QS{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=Oe(),this.mutatedKeys=Oe(),this.Ha=vm(e),this.Ja=new ss(this.Ha)}get Ya(){return this.Ga}Za(e,t){const r=t?t.Xa:new kf,i=t?t.Ja:this.Ja;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,b)=>{const w=i.get(g),A=Nl(this.query,b)?b:null,C=!!w&&this.mutatedKeys.has(w.key),P=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let O=!1;w&&A?w.data.isEqual(A.data)?C!==P&&(r.track({type:3,doc:A}),O=!0):this.eu(w,A)||(r.track({type:2,doc:A}),O=!0,(u&&this.Ha(A,u)>0||h&&this.Ha(A,h)<0)&&(l=!0)):!w&&A?(r.track({type:0,doc:A}),O=!0):w&&!A&&(r.track({type:1,doc:w}),O=!0,(u||h)&&(l=!0)),O&&(A?(o=o.add(A),s=P?s.add(g):s.delete(g)):(o=o.delete(g),s=s.delete(g)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const g=this.query.limitType==="F"?o.last():o.first();o=o.delete(g.key),s=s.delete(g.key),r.track({type:1,doc:g})}return{Ja:o,Xa:r,Cs:l,mutatedKeys:s}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const o=e.Xa.ga();o.sort((g,b)=>function(A,C){const P=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Vt:O})}};return P(A)-P(C)}(g.type,b.type)||this.Ha(g.doc,b.doc)),this.tu(r),i=i!=null&&i;const l=t&&!i?this.nu():[],u=this.ja.size===0&&this.current&&!i?1:0,h=u!==this.za;return this.za=u,o.length!==0||h?{snapshot:new ms(this.query,e.Ja,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:l}:{ru:l}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new kf,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(t=>this.Ga=this.Ga.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ga=this.Ga.delete(t)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=Oe(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const t=[];return e.forEach(r=>{this.ja.has(r)||t.push(new ev(r))}),this.ja.forEach(r=>{e.has(r)||t.push(new Zm(r))}),t}su(e){this.Ga=e.$s,this.ja=Oe();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return ms.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const vd="SyncEngine";class YS{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class KS{constructor(e){this.key=e,this._u=!1}}class XS{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.au={},this.uu=new yi(l=>mm(l),Pl),this.cu=new Map,this.lu=new Set,this.hu=new Je(he.comparator),this.Pu=new Map,this.Tu=new od,this.Iu={},this.Eu=new Map,this.du=gs.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function JS(n,e,t=!0){const r=ov(n);let i;const s=r.uu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ou()):i=await tv(r,e,t,!0),i}async function ZS(n,e){const t=ov(n);await tv(t,e,!0,!1)}async function tv(n,e,t,r){const i=await _S(n.localStore,In(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let l;return r&&(l=await eI(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Wm(n.remoteStore,i),l}async function eI(n,e,t,r,i){n.Ru=(b,w,A)=>async function(P,O,U,X){let te=O.view.Za(U);te.Cs&&(te=await Af(P.localStore,O.query,!1).then(({documents:f})=>O.view.Za(f,te)));const ie=X&&X.targetChanges.get(O.targetId),Se=X&&X.targetMismatches.get(O.targetId)!=null,de=O.view.applyChanges(te,P.isPrimaryClient,ie,Se);return Mf(P,O.targetId,de.ru),de.snapshot}(n,b,w,A);const s=await Af(n.localStore,e,!0),o=new QS(e,s.$s),l=o.Za(s.documents),u=Oo.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=o.applyChanges(l,n.isPrimaryClient,u);Mf(n,t,h.ru);const g=new YS(e,t,o);return n.uu.set(e,g),n.cu.has(t)?n.cu.get(t).push(e):n.cu.set(t,[e]),h.snapshot}async function tI(n,e,t){const r=Ae(n),i=r.uu.get(e),s=r.cu.get(i.targetId);if(s.length>1)return r.cu.set(i.targetId,s.filter(o=>!Pl(o,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await pu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ud(r.remoteStore,i.targetId),vu(r,i.targetId)}).catch(Ss)):(vu(r,i.targetId),await pu(r.localStore,i.targetId,!0))}async function nI(n,e){const t=Ae(n),r=t.uu.get(e),i=t.cu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ud(t.remoteStore,r.targetId))}async function rI(n,e,t){const r=uI(n);try{const i=await function(o,l){const u=Ae(o),h=lt.now(),g=l.reduce((A,C)=>A.add(C.key),Oe());let b,w;return u.persistence.runTransaction("Locally write mutations","readwrite",A=>{let C=er(),P=Oe();return u.Bs.getEntries(A,g).next(O=>{C=O,C.forEach((U,X)=>{X.isValidDocument()||(P=P.add(U))})}).next(()=>u.localDocuments.getOverlayedDocuments(A,C)).next(O=>{b=O;const U=[];for(const X of l){const te=_A(X,b.get(X.key).overlayedDocument);te!=null&&U.push(new Br(X.key,te,lm(te.value.mapValue),cn.exists(!0)))}return u.mutationQueue.addMutationBatch(A,h,U,l)}).next(O=>{w=O;const U=O.applyToLocalDocumentSet(b,P);return u.documentOverlayCache.saveOverlays(A,O.batchId,U)})}).then(()=>({batchId:w.batchId,changes:_m(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.Iu[o.currentUser.toKey()];h||(h=new Je(De)),h=h.insert(l,u),o.Iu[o.currentUser.toKey()]=h}(r,i.batchId,t),await Lo(r,i.changes),await Ul(r.remoteStore)}catch(i){const s=gd(i,"Failed to persist write");t.reject(s)}}async function nv(n,e){const t=Ae(n);try{const r=await mS(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Pu.get(s);o&&(Be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o._u=!0:i.modifiedDocuments.size>0?Be(o._u,14607):i.removedDocuments.size>0&&(Be(o._u,42227),o._u=!1))}),await Lo(t,r,e)}catch(r){await Ss(r)}}function Nf(n,e,t){const r=Ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.uu.forEach((s,o)=>{const l=o.view.Da(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=Ae(o);u.onlineState=l;let h=!1;u.queries.forEach((g,b)=>{for(const w of b.ya)w.Da(l)&&(h=!0)}),h&&md(u)}(r.eventManager,e),i.length&&r.au.j_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iI(n,e,t){const r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Pu.get(e),s=i&&i.key;if(s){let o=new Je(he.comparator);o=o.insert(s,wt.newNoDocument(s,Te.min()));const l=Oe().add(s),u=new Vl(Te.min(),new Map,new Je(De),o,l);await nv(r,u),r.hu=r.hu.remove(s),r.Pu.delete(e),yd(r)}else await pu(r.localStore,e,!1).then(()=>vu(r,e,t)).catch(Ss)}async function sI(n,e){const t=Ae(n),r=e.batch.batchId;try{const i=await gS(t.localStore,e);iv(t,r,null),rv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Lo(t,i)}catch(i){await Ss(i)}}async function oI(n,e,t){const r=Ae(n);try{const i=await function(o,l){const u=Ae(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let g;return u.mutationQueue.lookupMutationBatch(h,l).next(b=>(Be(b!==null,37113),g=b.keys(),u.mutationQueue.removeMutationBatch(h,b))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,g,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g)).next(()=>u.localDocuments.getDocuments(h,g))})}(r.localStore,e);iv(r,e,t),rv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Lo(r,i)}catch(i){await Ss(i)}}function rv(n,e){(n.Eu.get(e)||[]).forEach(t=>{t.resolve()}),n.Eu.delete(e)}function iv(n,e,t){const r=Ae(n);let i=r.Iu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Iu[r.currentUser.toKey()]=i}}function vu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.cu.get(e))n.uu.delete(r),t&&n.au.Vu(r,t);n.cu.delete(e),n.isPrimaryClient&&n.Tu.Hr(e).forEach(r=>{n.Tu.containsKey(r)||sv(n,r)})}function sv(n,e){n.lu.delete(e.path.canonicalString());const t=n.hu.get(e);t!==null&&(ud(n.remoteStore,t),n.hu=n.hu.remove(e),n.Pu.delete(t),yd(n))}function Mf(n,e,t){for(const r of t)r instanceof Zm?(n.Tu.addReference(r.key,e),aI(n,r)):r instanceof ev?(ae(vd,"Document no longer in limbo: "+r.key),n.Tu.removeReference(r.key,e),n.Tu.containsKey(r.key)||sv(n,r.key)):_e(19791,{mu:r})}function aI(n,e){const t=e.key,r=t.path.canonicalString();n.hu.get(t)||n.lu.has(r)||(ae(vd,"New document in limbo: "+t),n.lu.add(r),yd(n))}function yd(n){for(;n.lu.size>0&&n.hu.size<n.maxConcurrentLimboResolutions;){const e=n.lu.values().next().value;n.lu.delete(e);const t=new he(Ye.fromString(e)),r=n.du.next();n.Pu.set(r,new KS(t)),n.hu=n.hu.insert(t,r),Wm(n.remoteStore,new Er(In(ed(t.path)),r,"TargetPurposeLimboResolution",Dl.le))}}async function Lo(n,e,t){const r=Ae(n),i=[],s=[],o=[];r.uu.isEmpty()||(r.uu.forEach((l,u)=>{o.push(r.Ru(u,e,t).then(h=>{var g;if((h||t)&&r.isPrimaryClient){const b=h?!h.fromCache:(g=t==null?void 0:t.targetChanges.get(u.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(u.targetId,b?"current":"not-current")}if(h){i.push(h);const b=ld.Rs(u.targetId,h);s.push(b)}}))}),await Promise.all(o),r.au.j_(i),await async function(u,h){const g=Ae(u);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>J.forEach(h,w=>J.forEach(w.ds,A=>g.persistence.referenceDelegate.addReference(b,w.targetId,A)).next(()=>J.forEach(w.As,A=>g.persistence.referenceDelegate.removeReference(b,w.targetId,A)))))}catch(b){if(!Is(b))throw b;ae(cd,"Failed to update sequence numbers: "+b)}for(const b of h){const w=b.targetId;if(!b.fromCache){const A=g.xs.get(w),C=A.snapshotVersion,P=A.withLastLimboFreeSnapshotVersion(C);g.xs=g.xs.insert(w,P)}}}(r.localStore,s))}async function lI(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){ae(vd,"User change. New user:",e.toKey());const r=await Bm(t.localStore,e);t.currentUser=e,function(s,o){s.Eu.forEach(l=>{l.forEach(u=>{u.reject(new le(Z.CANCELLED,o))})}),s.Eu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Lo(t,r.ks)}}function cI(n,e){const t=Ae(n),r=t.Pu.get(e);if(r&&r._u)return Oe().add(r.key);{let i=Oe();const s=t.cu.get(e);if(!s)return i;for(const o of s){const l=t.uu.get(o);i=i.unionWith(l.view.Ya)}return i}}function ov(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iI.bind(null,e),e.au.j_=$S.bind(null,e.eventManager),e.au.Vu=GS.bind(null,e.eventManager),e}function uI(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oI.bind(null,e),e}class al{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ll(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return pS(this.persistence,new dS,e.initialUser,this.serializer)}yu(e){return new Um(ad.fi,this.serializer)}pu(e){return new bS}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}al.provider={build:()=>new al};class dI extends al{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){Be(this.persistence.referenceDelegate instanceof sl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new KA(r,e.asyncQueue,t)}yu(e){const t=this.cacheSizeBytes!==void 0?Lt.withCacheSize(this.cacheSizeBytes):Lt.DEFAULT;return new Um(r=>sl.fi(r,t),this.serializer)}}class yu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Nf(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lI.bind(null,this.syncEngine),await zS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qS}()}createDatastore(e){const t=Ll(e.databaseInfo.databaseId),r=function(s){return new IS(s)}(e.databaseInfo);return function(s,o,l,u){return new kS(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,l){return new PS(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,t=>Nf(this.syncEngine,t,0),function(){return Cf.C()?new Cf:new wS}())}createSyncEngine(e,t){return function(i,s,o,l,u,h,g){const b=new XS(i,s,o,l,u,h);return g&&(b.Au=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Ae(i);ae(pi,"RemoteStore shutting down."),s.Ta.add(5),await Vo(s),s.Ea.shutdown(),s.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}yu.provider={build:()=>new yu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Zn("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="FirestoreClient";class hI{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bt.UNAUTHENTICATED,this.clientId=Jg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ae(Or,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ae(Or,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=gd(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Dc(n,e){n.asyncQueue.verifyOperationInProgress(),ae(Or,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Bm(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Of(n,e){n.asyncQueue.verifyOperationInProgress();const t=await fI(n);ae(Or,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Df(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Df(e.remoteStore,i)),n._onlineComponents=e}async function fI(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ae(Or,"Using user provided OfflineComponentProvider");try{await Dc(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ds("Error using user provided cache. Falling back to memory cache: "+t),await Dc(n,new al)}}else ae(Or,"Using default OfflineComponentProvider"),await Dc(n,new dI(void 0));return n._offlineComponents}async function lv(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ae(Or,"Using user provided OnlineComponentProvider"),await Of(n,n._uninitializedComponentsProvider._online)):(ae(Or,"Using default OnlineComponentProvider"),await Of(n,new yu))),n._onlineComponents}function pI(n){return lv(n).then(e=>e.syncEngine)}async function cv(n){const e=await lv(n),t=e.eventManager;return t.onListen=JS.bind(null,e.syncEngine),t.onUnlisten=tI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ZS.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nI.bind(null,e.syncEngine),t}function gI(n,e,t={}){const r=new Yn;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,h){const g=new av({next:w=>{g.Cu(),o.enqueueAndForget(()=>Xm(s,b));const A=w.docs.has(l);!A&&w.fromCache?h.reject(new le(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&w.fromCache&&u&&u.source==="server"?h.reject(new le(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(w)},error:w=>h.reject(w)}),b=new Jm(ed(l.path),g,{includeMetadataChanges:!0,La:!0});return Km(s,b)}(await cv(n),n.asyncQueue,e,t,r)),r.promise}function mI(n,e,t={}){const r=new Yn;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,h){const g=new av({next:w=>{g.Cu(),o.enqueueAndForget(()=>Xm(s,b)),w.fromCache&&u.source==="server"?h.reject(new le(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(w)},error:w=>h.reject(w)}),b=new Jm(l,g,{includeMetadataChanges:!0,La:!0});return Km(s,b)}(await cv(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(n,e,t){if(!t)throw new le(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vI(n,e,t,r){if(e===!0&&r===!0)throw new le(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Lf(n){if(!he.isDocumentKey(n))throw new le(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ff(n){if(he.isDocumentKey(n))throw new le(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Bl(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":_e(12329,{type:typeof n})}function Dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Bl(n);throw new le(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="firestore.googleapis.com",Uf=!0;class Bf{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new le(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hv,this.ssl=Uf}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Uf;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Fm;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<QA)throw new le(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hl{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new AT;switch(r.type){case"firstParty":return new RT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Vf.get(t);r&&(ae("ComponentProvider","Removing Datastore"),Vf.delete(t),r.terminate())}(this),Promise.resolve()}}function yI(n,e,t,r={}){var i;n=Dn(n,Hl);const s=Io(e),o=n._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;s&&(eg(`https://${u}`),tg("Firestore",!0)),o.host!==hv&&o.host!==u&&ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:u,ssl:s,emulatorOptions:r});if(!ci(h,l)&&(n._setSettings(h),r.mockUserToken)){let g,b;if(typeof r.mockUserToken=="string")g=r.mockUserToken,b=bt.MOCK_USER;else{g=O_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new le(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new bt(w)}n._authCredentials=new ST(new Kg(g,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rs(this.firestore,e,this._query)}}class Nt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}}class Rr extends Rs{constructor(e,t,r){super(e,t,ed(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new he(e))}withConverter(e){return new Rr(this.firestore,e,this._path)}}function CP(n,e,...t){if(n=ot(n),dv("collection","path",e),n instanceof Hl){const r=Ye.fromString(e,...t);return Ff(r),new Rr(n,null,r)}{if(!(n instanceof Nt||n instanceof Rr))throw new le(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ye.fromString(e,...t));return Ff(r),new Rr(n.firestore,null,r)}}function RP(n,e,...t){if(n=ot(n),arguments.length===1&&(e=Jg.newId()),dv("doc","path",e),n instanceof Hl){const r=Ye.fromString(e,...t);return Lf(r),new Nt(n,null,new he(r))}{if(!(n instanceof Nt||n instanceof Rr))throw new le(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ye.fromString(e,...t));return Lf(r),new Nt(n.firestore,n instanceof Rr?n.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="AsyncQueue";class jf{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new jm(this,"async_queue_retry"),this.ec=()=>{const r=Rc();r&&ae(Hf,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const t=Rc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=Rc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const t=new Yn;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Is(e))throw e;ae(Hf,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const t=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,Zn("INTERNAL UNHANDLED ERROR: ",zf(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=t,t}enqueueAfterDelay(e,t,r){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const i=pd.createAndSchedule(this,e,t,r,s=>this.oc(s));return this.Hu.push(i),i}nc(){this.Ju&&_e(47125,{_c:zf(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Hu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function zf(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ds extends Hl{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new jf,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jf(e),this._firestoreClient=void 0,await e}}}function _I(n,e){const t=typeof n=="object"?n:sg(),r=typeof n=="string"?n:Za,i=Fu(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=N_("firestore");s&&yI(i,...s)}return i}function _d(n){if(n._terminated)throw new le(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||EI(n),n._firestoreClient}function EI(n){var e,t,r;const i=n._freezeSettings(),s=function(l,u,h,g){return new zT(l,u,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,uv(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new hI(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vs(yt.fromBase64String(e))}catch(t){throw new le(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vs(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=/^__.*__$/;class wI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Br(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mo(e,this.data,t,this.fieldTransforms)}}class fv{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Br(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pv(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{hc:n})}}class wd{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new wd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Tc({path:r,Ec:!1});return i.dc(e),i}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Tc({path:r,Ec:!1});return i.Pc(),i}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return ll(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(pv(this.hc)&&bI.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class TI{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ll(e)}gc(e,t,r,i=!1){return new wd({hc:e,methodName:t,fc:r,path:vt.emptyPath(),Ec:!1,mc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Td(n){const e=n._freezeSettings(),t=Ll(n._databaseId);return new TI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function AI(n,e,t,r,i,s={}){const o=n.gc(s.merge||s.mergeFields?2:0,e,t,i);Sd("Data must be an object, but it was:",o,r);const l=gv(r,o);let u,h;if(s.merge)u=new zt(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const g=[];for(const b of s.mergeFields){const w=_u(e,b,t);if(!o.contains(w))throw new le(Z.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);vv(g,w)||g.push(w)}u=new zt(g),h=o.fieldTransforms.filter(b=>u.covers(b.field))}else u=null,h=o.fieldTransforms;return new wI(new Ft(l),u,h)}class Wl extends zl{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wl}}class Ad extends zl{_toFieldTransform(e){return new gA(e.path,new Eo)}isEqual(e){return e instanceof Ad}}function SI(n,e,t,r){const i=n.gc(1,e,t);Sd("Data must be an object, but it was:",i,r);const s=[],o=Ft.empty();Ur(r,(u,h)=>{const g=Id(e,u,t);h=ot(h);const b=i.Ac(g);if(h instanceof Wl)s.push(g);else{const w=Fo(h,b);w!=null&&(s.push(g),o.set(g,w))}});const l=new zt(s);return new fv(o,l,i.fieldTransforms)}function II(n,e,t,r,i,s){const o=n.gc(1,e,t),l=[_u(e,r,t)],u=[i];if(s.length%2!=0)throw new le(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<s.length;w+=2)l.push(_u(e,s[w])),u.push(s[w+1]);const h=[],g=Ft.empty();for(let w=l.length-1;w>=0;--w)if(!vv(h,l[w])){const A=l[w];let C=u[w];C=ot(C);const P=o.Ac(A);if(C instanceof Wl)h.push(A);else{const O=Fo(C,P);O!=null&&(h.push(A),g.set(A,O))}}const b=new zt(h);return new fv(g,b,o.fieldTransforms)}function CI(n,e,t,r=!1){return Fo(t,n.gc(r?4:3,e))}function Fo(n,e){if(mv(n=ot(n)))return Sd("Unsupported field value:",e,n),gv(n,e);if(n instanceof zl)return function(r,i){if(!pv(i.hc))throw i.Vc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Vc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Fo(l,i.Rc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=lt.fromDate(r);return{timestampValue:il(i.serializer,s)}}if(r instanceof lt){const s=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:il(i.serializer,s)}}if(r instanceof Ed)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vs)return{bytesValue:xm(i.serializer,r._byteString)};if(r instanceof Nt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Vc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sd(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bd)return function(o,l){return{mapValue:{fields:{[om]:{stringValue:am},[el]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Vc("VectorValues must only contain numeric values.");return td(l.serializer,h)})}}}}}}(r,i);throw i.Vc(`Unsupported field value: ${Bl(r)}`)}(n,e)}function gv(n,e){const t={};return em(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ur(n,(r,i)=>{const s=Fo(i,e.Ic(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function mv(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof Ed||n instanceof vs||n instanceof Nt||n instanceof zl||n instanceof bd)}function Sd(n,e,t){if(!mv(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Bl(t);throw r==="an object"?e.Vc(n+" a custom object"):e.Vc(n+" "+r)}}function _u(n,e,t){if((e=ot(e))instanceof jl)return e._internalPath;if(typeof e=="string")return Id(n,e);throw ll("Field path arguments must be of type string or ",n,!1,void 0,t)}const RI=new RegExp("[~\\*/\\[\\]]");function Id(n,e,t){if(e.search(RI)>=0)throw ll(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new jl(...e.split("."))._internalPath}catch{throw ll(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ll(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new le(Z.INVALID_ARGUMENT,l+n+u)}function vv(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class DI extends yv{data(){return super.data()}}function Cd(n,e){return typeof e=="string"?Id(n,e):e instanceof jl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new le(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rd{}class xI extends Rd{}function DP(n,e,...t){let r=[];e instanceof Rd&&r.push(e),r=r.concat(t),function(s){const o=s.filter(u=>u instanceof Dd).length,l=s.filter(u=>u instanceof ql).length;if(o>1||o>0&&l>0)throw new le(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class ql extends xI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ql(e,t,r)}_apply(e){const t=this._parse(e);return _v(e._query,t),new Rs(e.firestore,e.converter,lu(e._query,t))}_parse(e){const t=Td(e.firestore);return function(s,o,l,u,h,g,b){let w;if(h.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new le(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){qf(b,g);const C=[];for(const P of b)C.push(Wf(u,s,P));w={arrayValue:{values:C}}}else w=Wf(u,s,b)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||qf(b,g),w=CI(l,o,b,g==="in"||g==="not-in");return st.create(h,g,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function kP(n,e,t){const r=e,i=Cd("where",n);return ql._create(i,r,t)}class Dd extends Rd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Dd(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:dn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)_v(o,u),o=lu(o,u)}(e._query,t),new Rs(e.firestore,e.converter,lu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Wf(n,e,t){if(typeof(t=ot(t))=="string"){if(t==="")throw new le(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gm(e)&&t.indexOf("/")!==-1)throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ye.fromString(t));if(!he.isDocumentKey(r))throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sf(n,new he(r))}if(t instanceof Nt)return sf(n,t._key);throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bl(t)}.`)}function qf(n,e){if(!Array.isArray(n)||n.length===0)throw new le(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _v(n,e){const t=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new le(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class PI{convertValue(e,t="none"){switch(Nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ur(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[el].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>tt(o.doubleValue));return new bd(s)}convertGeoPoint(e){return new Ed(tt(e.latitude),tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=xl(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vo(e));default:return null}}convertTimestamp(e){const t=xr(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ye.fromString(e);Be(Lm(r),9688,{name:e});const i=new yo(r.get(1),r.get(3)),s=new he(r.popFirst(5));return i.isEqual(t)||Zn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ev extends yv{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new La(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Cd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class La extends Ev{data(e={}){return super.data(e)}}class MI{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ro(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new La(this._firestore,this._userDataWriter,r.key,r,new ro(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new La(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ro(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new La(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ro(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,g=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),g=o.indexOf(l.doc.key)),{type:OI(l.type),doc:u,oldIndex:h,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function OI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(n){n=Dn(n,Nt);const e=Dn(n.firestore,Ds);return gI(_d(e),n._key).then(t=>VI(e,n,t))}class bv extends PI{constructor(e){super(),this.firestore=e}convertBytes(e){return new vs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,t)}}function PP(n){n=Dn(n,Rs);const e=Dn(n.firestore,Ds),t=_d(e),r=new bv(e);return kI(n._query),mI(t,n._query).then(i=>new MI(e,r,n,i))}function NP(n,e,t){n=Dn(n,Nt);const r=Dn(n.firestore,Ds),i=NI(n.converter,e);return kd(r,[AI(Td(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,cn.none())])}function MP(n,e,t,...r){n=Dn(n,Nt);const i=Dn(n.firestore,Ds),s=Td(i);let o;return o=typeof(e=ot(e))=="string"||e instanceof jl?II(s,"updateDoc",n._key,e,t,r):SI(s,"updateDoc",n._key,e),kd(i,[o.toMutation(n._key,cn.exists(!0))])}function OP(n){return kd(Dn(n.firestore,Ds),[new nd(n._key,cn.none())])}function kd(n,e){return function(r,i){const s=new Yn;return r.asyncQueue.enqueueAndForget(async()=>rI(await pI(r),i,s)),s.promise}(_d(n),e)}function VI(n,e,t){const r=t.docs.get(e._key),i=new bv(n);return new Ev(n,i,e._key,r,new ro(t.hasPendingWrites,t.fromCache),e.converter)}function VP(){return new Ad("serverTimestamp")}(function(e,t=!0){(function(i){As=i})(ws),cs(new ui("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Ds(new IT(r.getProvider("auth-internal")),new DT(o,r.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new le(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yo(h.options.projectId,g)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Ir($h,Gh,e),Ir($h,Gh,"esm2017")})();const LI={apiKey:"AIzaSyApY6GJA-usnLjgFx3UMODAE6JhdKJuIVI",authDomain:"witime.firebaseapp.com",projectId:"witime",storageBucket:"witime.firebasestorage.app",messagingSenderId:"51383625352",appId:"1:51383625352:web:0e8b19e836d70ba55f613d"},wv=ig(LI),LP=wT(wv),FP=_I(wv);var $l,pe,Tv,Av,ys,si,$f,Sv,Iv,cl={},Cv=[],FI=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function br(n,e){for(var t in e)n[t]=e[t];return n}function Rv(n){var e=n.parentNode;e&&e.removeChild(n)}function M(n,e,t){var r,i,s,o={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?$l.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(s in n.defaultProps)o[s]===void 0&&(o[s]=n.defaultProps[s]);return Fa(n,o,r,i,null)}function Fa(n,e,t,r,i){var s={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++Tv};return i==null&&pe.vnode!=null&&pe.vnode(s),s}function Mt(){return{current:null}}function qe(n){return n.children}function UI(n,e,t,r,i){var s;for(s in t)s==="children"||s==="key"||s in e||ul(n,s,null,t[s],r);for(s in e)i&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||t[s]===e[s]||ul(n,s,e[s],t[s],r)}function Gf(n,e,t){e[0]==="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||FI.test(e)?t:t+"px"}function ul(n,e,t,r,i){var s;e:if(e==="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||Gf(n.style,e,"");if(t)for(e in t)r&&t[e]===r[e]||Gf(n.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+s]=t,t?r||n.addEventListener(e,s?Yf:Qf,s):n.removeEventListener(e,s?Yf:Qf,s);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e.indexOf("-")==-1?n.removeAttribute(e):n.setAttribute(e,t))}}function Qf(n){ys=!0;try{return this.l[n.type+!1](pe.event?pe.event(n):n)}finally{ys=!1}}function Yf(n){ys=!0;try{return this.l[n.type+!0](pe.event?pe.event(n):n)}finally{ys=!1}}function Wt(n,e){this.props=n,this.context=e}function To(n,e){if(e==null)return n.__?To(n.__,n.__.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?To(n):null}function Dv(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return Dv(n)}}function BI(n){ys?setTimeout(n):Sv(n)}function Eu(n){(!n.__d&&(n.__d=!0)&&si.push(n)&&!dl.__r++||$f!==pe.debounceRendering)&&(($f=pe.debounceRendering)||BI)(dl)}function dl(){var n,e,t,r,i,s,o,l;for(si.sort(function(u,h){return u.__v.__b-h.__v.__b});n=si.shift();)n.__d&&(e=si.length,r=void 0,i=void 0,o=(s=(t=n).__v).__e,(l=t.__P)&&(r=[],(i=br({},s)).__v=s.__v+1,xd(l,s,i,t.__n,l.ownerSVGElement!==void 0,s.__h!=null?[o]:null,r,o??To(s),s.__h),Mv(r,s),s.__e!=o&&Dv(s)),si.length>e&&si.sort(function(u,h){return u.__v.__b-h.__v.__b}));dl.__r=0}function kv(n,e,t,r,i,s,o,l,u,h){var g,b,w,A,C,P,O,U=r&&r.__k||Cv,X=U.length;for(t.__k=[],g=0;g<e.length;g++)if((A=t.__k[g]=(A=e[g])==null||typeof A=="boolean"?null:typeof A=="string"||typeof A=="number"||typeof A=="bigint"?Fa(null,A,null,null,A):Array.isArray(A)?Fa(qe,{children:A},null,null,null):A.__b>0?Fa(A.type,A.props,A.key,A.ref?A.ref:null,A.__v):A)!=null){if(A.__=t,A.__b=t.__b+1,(w=U[g])===null||w&&A.key==w.key&&A.type===w.type)U[g]=void 0;else for(b=0;b<X;b++){if((w=U[b])&&A.key==w.key&&A.type===w.type){U[b]=void 0;break}w=null}xd(n,A,w=w||cl,i,s,o,l,u,h),C=A.__e,(b=A.ref)&&w.ref!=b&&(O||(O=[]),w.ref&&O.push(w.ref,null,A),O.push(b,A.__c||C,A)),C!=null?(P==null&&(P=C),typeof A.type=="function"&&A.__k===w.__k?A.__d=u=xv(A,u,n):u=Pv(n,A,w,U,C,u),typeof t.type=="function"&&(t.__d=u)):u&&w.__e==u&&u.parentNode!=n&&(u=To(w))}for(t.__e=P,g=X;g--;)U[g]!=null&&(typeof t.type=="function"&&U[g].__e!=null&&U[g].__e==t.__d&&(t.__d=Nv(r).nextSibling),Vv(U[g],U[g]));if(O)for(g=0;g<O.length;g++)Ov(O[g],O[++g],O[++g])}function xv(n,e,t){for(var r,i=n.__k,s=0;i&&s<i.length;s++)(r=i[s])&&(r.__=n,e=typeof r.type=="function"?xv(r,e,t):Pv(t,r,r,i,r.__e,e));return e}function hl(n,e){return e=e||[],n==null||typeof n=="boolean"||(Array.isArray(n)?n.some(function(t){hl(t,e)}):e.push(n)),e}function Pv(n,e,t,r,i,s){var o,l,u;if(e.__d!==void 0)o=e.__d,e.__d=void 0;else if(t==null||i!=s||i.parentNode==null)e:if(s==null||s.parentNode!==n)n.appendChild(i),o=null;else{for(l=s,u=0;(l=l.nextSibling)&&u<r.length;u+=1)if(l==i)break e;n.insertBefore(i,s),o=s}return o!==void 0?o:i.nextSibling}function Nv(n){var e,t,r;if(n.type==null||typeof n.type=="string")return n.__e;if(n.__k){for(e=n.__k.length-1;e>=0;e--)if((t=n.__k[e])&&(r=Nv(t)))return r}return null}function xd(n,e,t,r,i,s,o,l,u){var h,g,b,w,A,C,P,O,U,X,te,ie,Se,de,f,R=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(u=t.__h,l=e.__e=t.__e,e.__h=null,s=[l]),(h=pe.__b)&&h(e);try{e:if(typeof R=="function"){if(O=e.props,U=(h=R.contextType)&&r[h.__c],X=h?U?U.props.value:h.__:r,t.__c?P=(g=e.__c=t.__c).__=g.__E:("prototype"in R&&R.prototype.render?e.__c=g=new R(O,X):(e.__c=g=new Wt(O,X),g.constructor=R,g.render=jI),U&&U.sub(g),g.props=O,g.state||(g.state={}),g.context=X,g.__n=r,b=g.__d=!0,g.__h=[],g._sb=[]),g.__s==null&&(g.__s=g.state),R.getDerivedStateFromProps!=null&&(g.__s==g.state&&(g.__s=br({},g.__s)),br(g.__s,R.getDerivedStateFromProps(O,g.__s))),w=g.props,A=g.state,g.__v=e,b)R.getDerivedStateFromProps==null&&g.componentWillMount!=null&&g.componentWillMount(),g.componentDidMount!=null&&g.__h.push(g.componentDidMount);else{if(R.getDerivedStateFromProps==null&&O!==w&&g.componentWillReceiveProps!=null&&g.componentWillReceiveProps(O,X),!g.__e&&g.shouldComponentUpdate!=null&&g.shouldComponentUpdate(O,g.__s,X)===!1||e.__v===t.__v){for(e.__v!==t.__v&&(g.props=O,g.state=g.__s,g.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(k){k&&(k.__=e)}),te=0;te<g._sb.length;te++)g.__h.push(g._sb[te]);g._sb=[],g.__h.length&&o.push(g);break e}g.componentWillUpdate!=null&&g.componentWillUpdate(O,g.__s,X),g.componentDidUpdate!=null&&g.__h.push(function(){g.componentDidUpdate(w,A,C)})}if(g.context=X,g.props=O,g.__P=n,ie=pe.__r,Se=0,"prototype"in R&&R.prototype.render){for(g.state=g.__s,g.__d=!1,ie&&ie(e),h=g.render(g.props,g.state,g.context),de=0;de<g._sb.length;de++)g.__h.push(g._sb[de]);g._sb=[]}else do g.__d=!1,ie&&ie(e),h=g.render(g.props,g.state,g.context),g.state=g.__s;while(g.__d&&++Se<25);g.state=g.__s,g.getChildContext!=null&&(r=br(br({},r),g.getChildContext())),b||g.getSnapshotBeforeUpdate==null||(C=g.getSnapshotBeforeUpdate(w,A)),f=h!=null&&h.type===qe&&h.key==null?h.props.children:h,kv(n,Array.isArray(f)?f:[f],e,t,r,i,s,o,l,u),g.base=e.__e,e.__h=null,g.__h.length&&o.push(g),P&&(g.__E=g.__=null),g.__e=!1}else s==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=HI(t.__e,e,t,r,i,s,o,u);(h=pe.diffed)&&h(e)}catch(k){e.__v=null,(u||s!=null)&&(e.__e=l,e.__h=!!u,s[s.indexOf(l)]=null),pe.__e(k,e,t)}}function Mv(n,e){pe.__c&&pe.__c(e,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(r){r.call(t)})}catch(r){pe.__e(r,t.__v)}})}function HI(n,e,t,r,i,s,o,l){var u,h,g,b=t.props,w=e.props,A=e.type,C=0;if(A==="svg"&&(i=!0),s!=null){for(;C<s.length;C++)if((u=s[C])&&"setAttribute"in u==!!A&&(A?u.localName===A:u.nodeType===3)){n=u,s[C]=null;break}}if(n==null){if(A===null)return document.createTextNode(w);n=i?document.createElementNS("http://www.w3.org/2000/svg",A):document.createElement(A,w.is&&w),s=null,l=!1}if(A===null)b===w||l&&n.data===w||(n.data=w);else{if(s=s&&$l.call(n.childNodes),h=(b=t.props||cl).dangerouslySetInnerHTML,g=w.dangerouslySetInnerHTML,!l){if(s!=null)for(b={},C=0;C<n.attributes.length;C++)b[n.attributes[C].name]=n.attributes[C].value;(g||h)&&(g&&(h&&g.__html==h.__html||g.__html===n.innerHTML)||(n.innerHTML=g&&g.__html||""))}if(UI(n,w,b,i,l),g)e.__k=[];else if(C=e.props.children,kv(n,Array.isArray(C)?C:[C],e,t,r,i&&A!=="foreignObject",s,o,s?s[0]:t.__k&&To(t,0),l),s!=null)for(C=s.length;C--;)s[C]!=null&&Rv(s[C]);l||("value"in w&&(C=w.value)!==void 0&&(C!==n.value||A==="progress"&&!C||A==="option"&&C!==b.value)&&ul(n,"value",C,b.value,!1),"checked"in w&&(C=w.checked)!==void 0&&C!==n.checked&&ul(n,"checked",C,b.checked,!1))}return n}function Ov(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(r){pe.__e(r,t)}}function Vv(n,e,t){var r,i;if(pe.unmount&&pe.unmount(n),(r=n.ref)&&(r.current&&r.current!==n.__e||Ov(r,null,e)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){pe.__e(s,e)}r.base=r.__P=null,n.__c=void 0}if(r=n.__k)for(i=0;i<r.length;i++)r[i]&&Vv(r[i],e,t||typeof n.type!="function");t||n.__e==null||Rv(n.__e),n.__=n.__e=n.__d=void 0}function jI(n,e,t){return this.constructor(n,t)}function Ao(n,e,t){var r,i,s;pe.__&&pe.__(n,e),i=(r=!1)?null:e.__k,s=[],xd(e,n=e.__k=M(qe,null,[n]),i||cl,cl,e.ownerSVGElement!==void 0,i?null:e.firstChild?$l.call(e.childNodes):null,s,i?i.__e:e.firstChild,r),Mv(s,n)}function zI(n,e){var t={__c:e="__cC"+Iv++,__:n,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,s;return this.getChildContext||(i=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.some(function(l){l.__e=!0,Eu(l)})},this.sub=function(o){i.push(o);var l=o.componentWillUnmount;o.componentWillUnmount=function(){i.splice(i.indexOf(o),1),l&&l.call(o)}}),r.children}};return t.Provider.__=t.Consumer.contextType=t}$l=Cv.slice,pe={__e:function(n,e,t,r){for(var i,s,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(n)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(n,r||{}),o=i.__d),o)return i.__E=i}catch(l){n=l}throw n}},Tv=0,Av=function(n){return n!=null&&n.constructor===void 0},ys=!1,Wt.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=br({},this.state),typeof n=="function"&&(n=n(br({},t),this.props)),n&&br(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),Eu(this))},Wt.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Eu(this))},Wt.prototype.render=qe,si=[],Sv=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,dl.__r=0,Iv=0;var Tn,kc,Kf,Lv=[],xc=[],Xf=pe.__b,Jf=pe.__r,Zf=pe.diffed,ep=pe.__c,tp=pe.unmount;function WI(){for(var n;n=Lv.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Ua),n.__H.__h.forEach(bu),n.__H.__h=[]}catch(e){n.__H.__h=[],pe.__e(e,n.__v)}}pe.__b=function(n){Tn=null,Xf&&Xf(n)},pe.__r=function(n){Jf&&Jf(n);var e=(Tn=n.__c).__H;e&&(kc===Tn?(e.__h=[],Tn.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=xc,t.__N=t.i=void 0})):(e.__h.forEach(Ua),e.__h.forEach(bu),e.__h=[])),kc=Tn},pe.diffed=function(n){Zf&&Zf(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(Lv.push(e)!==1&&Kf===pe.requestAnimationFrame||((Kf=pe.requestAnimationFrame)||qI)(WI)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==xc&&(t.__=t.__V),t.i=void 0,t.__V=xc})),kc=Tn=null},pe.__c=function(n,e){e.some(function(t){try{t.__h.forEach(Ua),t.__h=t.__h.filter(function(r){return!r.__||bu(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],pe.__e(r,t.__v)}}),ep&&ep(n,e)},pe.unmount=function(n){tp&&tp(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{Ua(r)}catch(i){e=i}}),t.__H=void 0,e&&pe.__e(e,t.__v))};var np=typeof requestAnimationFrame=="function";function qI(n){var e,t=function(){clearTimeout(r),np&&cancelAnimationFrame(e),setTimeout(n)},r=setTimeout(t,100);np&&(e=requestAnimationFrame(t))}function Ua(n){var e=Tn,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Tn=e}function bu(n){var e=Tn;n.__c=n.__(),Tn=e}function $I(n,e){for(var t in e)n[t]=e[t];return n}function rp(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var r in e)if(r!=="__source"&&n[r]!==e[r])return!0;return!1}function ip(n){this.props=n}(ip.prototype=new Wt).isPureReactComponent=!0,ip.prototype.shouldComponentUpdate=function(n,e){return rp(this.props,n)||rp(this.state,e)};var sp=pe.__b;pe.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),sp&&sp(n)};var GI=pe.__e;pe.__e=function(n,e,t,r){if(n.then){for(var i,s=e;s=s.__;)if((i=s.__c)&&i.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),i.__c(n,e)}GI(n,e,t,r)};var op=pe.unmount;function Fv(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),n.__c.__H=null),(n=$I({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c=null),n.__k=n.__k&&n.__k.map(function(r){return Fv(r,e,t)})),n}function Uv(n,e,t){return n&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(r){return Uv(r,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.insertBefore(n.__e,n.__d),n.__c.__e=!0,n.__c.__P=t)),n}function Pc(){this.__u=0,this.t=null,this.__b=null}function Bv(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function _a(){this.u=null,this.o=null}pe.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&n.__h===!0&&(n.type=null),op&&op(n)},(Pc.prototype=new Wt).__c=function(n,e){var t=e.__c,r=this;r.t==null&&(r.t=[]),r.t.push(t);var i=Bv(r.__v),s=!1,o=function(){s||(s=!0,t.__R=null,i?i(l):l())};t.__R=o;var l=function(){if(!--r.__u){if(r.state.__a){var h=r.state.__a;r.__v.__k[0]=Uv(h,h.__c.__P,h.__c.__O)}var g;for(r.setState({__a:r.__b=null});g=r.t.pop();)g.forceUpdate()}},u=e.__h===!0;r.__u++||u||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(o,o)},Pc.prototype.componentWillUnmount=function(){this.t=[]},Pc.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=Fv(this.__b,t,r.__O=r.__P)}this.__b=null}var i=e.__a&&M(qe,null,n.fallback);return i&&(i.__h=null),[M(qe,null,e.__a?null:n.children),i]};var ap=function(n,e,t){if(++t[1]===t[0]&&n.o.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.o.size))for(t=n.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.u=t=t[2]}};function QI(n){return this.getChildContext=function(){return n.context},n.children}function YI(n){var e=this,t=n.i;e.componentWillUnmount=function(){Ao(null,e.l),e.l=null,e.i=null},e.i&&e.i!==t&&e.componentWillUnmount(),n.__v?(e.l||(e.i=t,e.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(r){this.childNodes.push(r),e.i.appendChild(r)},insertBefore:function(r,i){this.childNodes.push(r),e.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.i.removeChild(r)}}),Ao(M(QI,{context:e.context},n.__v),e.l)):e.l&&e.componentWillUnmount()}function KI(n,e){var t=M(YI,{__v:n,i:e});return t.containerInfo=e,t}(_a.prototype=new Wt).__a=function(n){var e=this,t=Bv(e.__v),r=e.o.get(n);return r[0]++,function(i){var s=function(){e.props.revealOrder?(r.push(i),ap(e,n,r)):i()};t?t(s):s()}},_a.prototype.render=function(n){this.u=null,this.o=new Map;var e=hl(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return n.children},_a.prototype.componentDidUpdate=_a.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(e,t){ap(n,t,e)})};var XI=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,JI=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ZI=typeof document<"u",eC=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(n)};Wt.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(Wt.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var lp=pe.event;function tC(){}function nC(){return this.cancelBubble}function rC(){return this.defaultPrevented}pe.event=function(n){return lp&&(n=lp(n)),n.persist=tC,n.isPropagationStopped=nC,n.isDefaultPrevented=rC,n.nativeEvent=n};var cp={configurable:!0,get:function(){return this.class}},up=pe.vnode;pe.vnode=function(n){var e=n.type,t=n.props,r=t;if(typeof e=="string"){var i=e.indexOf("-")===-1;for(var s in r={},t){var o=t[s];ZI&&s==="children"&&e==="noscript"||s==="value"&&"defaultValue"in t&&o==null||(s==="defaultValue"&&"value"in t&&t.value==null?s="value":s==="download"&&o===!0?o="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+e)&&!eC(t.type)?s="oninput":/^onfocus$/i.test(s)?s="onfocusin":/^onblur$/i.test(s)?s="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(s)?s=s.toLowerCase():i&&JI.test(s)?s=s.replace(/[A-Z0-9]/g,"-$&").toLowerCase():o===null&&(o=void 0),/^oninput$/i.test(s)&&(s=s.toLowerCase(),r[s]&&(s="oninputCapture")),r[s]=o)}e=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=hl(t.children).forEach(function(l){l.props.selected=r.value.indexOf(l.props.value)!=-1})),e=="select"&&r.defaultValue!=null&&(r.value=hl(t.children).forEach(function(l){l.props.selected=r.multiple?r.defaultValue.indexOf(l.props.value)!=-1:r.defaultValue==l.props.value})),n.props=r,t.class!=t.className&&(cp.enumerable="className"in t,t.className!=null&&(r.class=t.className),Object.defineProperty(r,"className",cp))}n.$$typeof=XI,up&&up(n)};var dp=pe.__r;pe.__r=function(n){dp&&dp(n),n.__c};const Hv=[],wu=new Map;function Pd(n){Hv.push(n),wu.forEach(e=>{zv(e,n)})}function iC(n){n.isConnected&&n.getRootNode&&jv(n.getRootNode())}function jv(n){let e=wu.get(n);if(!e||!e.isConnected){if(e=n.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const t=oC();t&&(e.nonce=t);const r=n===document?document.head:n,i=n===document?r.querySelector("script,link[rel=stylesheet],link[as=style],style"):r.firstChild;r.insertBefore(e,i)}wu.set(n,e),sC(e)}}function sC(n){for(const e of Hv)zv(n,e)}function zv(n,e){const{sheet:t}=n,r=t.cssRules.length;e.split("}").forEach((i,s)=>{i=i.trim(),i&&t.insertRule(i+"}",r+s)})}let Nc;function oC(){return Nc===void 0&&(Nc=aC()),Nc}function aC(){const n=document.querySelector('meta[name="csp-nonce"]');if(n&&n.hasAttribute("content"))return n.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&jv(document);var lC=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';Pd(lC);class Nd{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:t}=this;t[e]=(t[e]||0)+1,this.clearTimeout()}resume(e="",t){let{pauseDepths:r}=this;e in r&&(t?delete r[e]:(r[e]-=1,r[e]<=0&&delete r[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function Md(n){n.parentNode&&n.parentNode.removeChild(n)}function Tt(n,e){if(n.closest)return n.closest(e);if(!document.documentElement.contains(n))return null;do{if(cC(n,e))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null}function cC(n,e){return(n.matches||n.matchesSelector||n.msMatchesSelector).call(n,e)}function uC(n,e){let t=n instanceof HTMLElement?[n]:n,r=[];for(let i=0;i<t.length;i+=1){let s=t[i].querySelectorAll(e);for(let o=0;o<s.length;o+=1)r.push(s[o])}return r}const dC=/(top|left|right|bottom|width|height)$/i;function uo(n,e){for(let t in e)Wv(n,t,e[t])}function Wv(n,e,t){t==null?n.style[e]="":typeof t=="number"&&dC.test(e)?n.style[e]=`${t}px`:n.style[e]=t}function qv(n){var e,t;return(t=(e=n.composedPath)===null||e===void 0?void 0:e.call(n)[0])!==null&&t!==void 0?t:n.target}let hp=0;function Gl(){return hp+=1,"fc-dom-"+hp}function Ql(n){n.preventDefault()}function hC(n,e){return t=>{let r=Tt(t.target,n);r&&e.call(r,t,r)}}function $v(n,e,t,r){let i=hC(t,r);return n.addEventListener(e,i),()=>{n.removeEventListener(e,i)}}function fC(n,e,t,r){let i;return $v(n,"mouseover",e,(s,o)=>{if(o!==i){i=o,t(s,o);let l=u=>{i=null,r(u,o),o.removeEventListener("mouseleave",l)};o.addEventListener("mouseleave",l)}})}const fp=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function pC(n,e){let t=r=>{e(r),fp.forEach(i=>{n.removeEventListener(i,t)})};fp.forEach(r=>{n.addEventListener(r,t)})}function Gv(n){return Object.assign({onClick:n},Qv(n))}function Qv(n){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(n(e),e.preventDefault())}}}let pp=0;function Ei(){return pp+=1,String(pp)}function Od(){document.body.classList.add("fc-not-allowed")}function Vd(){document.body.classList.remove("fc-not-allowed")}function gC(n){n.style.userSelect="none",n.style.webkitUserSelect="none",n.addEventListener("selectstart",Ql)}function mC(n){n.style.userSelect="",n.style.webkitUserSelect="",n.removeEventListener("selectstart",Ql)}function vC(n){n.addEventListener("contextmenu",Ql)}function yC(n){n.removeEventListener("contextmenu",Ql)}function _C(n){let e=[],t=[],r,i;for(typeof n=="string"?t=n.split(/\s*,\s*/):typeof n=="function"?t=[n]:Array.isArray(n)&&(t=n),r=0;r<t.length;r+=1)i=t[r],typeof i=="string"?e.push(i.charAt(0)==="-"?{field:i.substring(1),order:-1}:{field:i,order:1}):typeof i=="function"&&e.push({func:i});return e}function EC(n,e,t){let r,i;for(r=0;r<t.length;r+=1)if(i=bC(n,e,t[r]),i)return i;return 0}function bC(n,e,t){return t.func?t.func(n,e):wC(n[t.field],e[t.field])*(t.order||1)}function wC(n,e){return!n&&!e?0:e==null?-1:n==null?1:typeof n=="string"||typeof e=="string"?String(n).localeCompare(String(e)):n-e}function os(n,e){let t=String(n);return"000".substr(0,e-t.length)+t}function ho(n,e,t){return typeof n=="function"?n(...e):typeof n=="string"?e.reduce((r,i,s)=>r.replace("$"+s,i||""),n):t}function TC(n,e){return n-e}function Ba(n){return n%1===0}function AC(n){let e=n.querySelector(".fc-scrollgrid-shrink-frame"),t=n.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!t)throw new Error("needs fc-scrollgrid-shrink-cushion className");return n.getBoundingClientRect().width-e.getBoundingClientRect().width+t.getBoundingClientRect().width}const gp=["years","months","days","milliseconds"],SC=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Ve(n,e){return typeof n=="string"?IC(n):typeof n=="object"&&n?mp(n):typeof n=="number"?mp({[e||"milliseconds"]:n}):null}function IC(n){let e=SC.exec(n);if(e){let t=e[1]?-1:1;return{years:0,months:0,days:t*(e[2]?parseInt(e[2],10):0),milliseconds:t*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function mp(n){let e={years:n.years||n.year||0,months:n.months||n.month||0,days:n.days||n.day||0,milliseconds:(n.hours||n.hour||0)*60*60*1e3+(n.minutes||n.minute||0)*60*1e3+(n.seconds||n.second||0)*1e3+(n.milliseconds||n.millisecond||n.ms||0)},t=n.weeks||n.week;return t&&(e.days+=t*7,e.specifiedWeeks=!0),e}function CC(n,e){return n.years===e.years&&n.months===e.months&&n.days===e.days&&n.milliseconds===e.milliseconds}function Tu(n,e){return{years:n.years+e.years,months:n.months+e.months,days:n.days+e.days,milliseconds:n.milliseconds+e.milliseconds}}function RC(n,e){return{years:n.years-e.years,months:n.months-e.months,days:n.days-e.days,milliseconds:n.milliseconds-e.milliseconds}}function DC(n,e){return{years:n.years*e,months:n.months*e,days:n.days*e,milliseconds:n.milliseconds*e}}function kC(n){return as(n)/365}function xC(n){return as(n)/30}function as(n){return ln(n)/864e5}function ln(n){return n.years*(365*864e5)+n.months*(30*864e5)+n.days*864e5+n.milliseconds}function Ld(n,e){let t=null;for(let r=0;r<gp.length;r+=1){let i=gp[r];if(e[i]){let s=n[i]/e[i];if(!Ba(s)||t!==null&&t!==s)return null;t=s}else if(n[i])return null}return t}function Au(n){let e=n.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return n.days?n.specifiedWeeks&&n.days%7===0?{unit:"week",value:n.days/7}:{unit:"day",value:n.days}:n.months?{unit:"month",value:n.months}:n.years?{unit:"year",value:n.years}:{unit:"millisecond",value:0}}function Vr(n,e,t){if(n===e)return!0;let r=n.length,i;if(r!==e.length)return!1;for(i=0;i<r;i+=1)if(!(t?t(n[i],e[i]):n[i]===e[i]))return!1;return!0}const PC=["sun","mon","tue","wed","thu","fri","sat"];function vp(n,e){let t=wr(n);return t[2]+=e*7,Ut(t)}function At(n,e){let t=wr(n);return t[2]+=e,Ut(t)}function Lr(n,e){let t=wr(n);return t[6]+=e,Ut(t)}function NC(n,e){return bi(n,e)/7}function bi(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60*24)}function MC(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60)}function OC(n,e){return(e.valueOf()-n.valueOf())/(1e3*60)}function VC(n,e){return(e.valueOf()-n.valueOf())/1e3}function LC(n,e){let t=$e(n),r=$e(e);return{years:0,months:0,days:Math.round(bi(t,r)),milliseconds:e.valueOf()-r.valueOf()-(n.valueOf()-t.valueOf())}}function FC(n,e){let t=fl(n,e);return t!==null&&t%7===0?t/7:null}function fl(n,e){return Tr(n)===Tr(e)?Math.round(bi(n,e)):null}function $e(n){return Ut([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()])}function UC(n){return Ut([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()])}function BC(n){return Ut([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes()])}function HC(n){return Ut([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()])}function jC(n,e,t){let r=n.getUTCFullYear(),i=Mc(n,r,e,t);if(i<1)return Mc(n,r-1,e,t);let s=Mc(n,r+1,e,t);return s>=1?Math.min(i,s):i}function Mc(n,e,t,r){let i=Ut([e,0,1+zC(e,t,r)]),s=$e(n),o=Math.round(bi(i,s));return Math.floor(o/7)+1}function zC(n,e,t){let r=7+e-t;return-((7+Ut([n,0,r]).getUTCDay()-e)%7)+r-1}function yp(n){return[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()]}function _p(n){return new Date(n[0],n[1]||0,n[2]==null?1:n[2],n[3]||0,n[4]||0,n[5]||0)}function wr(n){return[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]}function Ut(n){return n.length===1&&(n=n.concat([0])),new Date(Date.UTC(...n))}function Yv(n){return!isNaN(n.valueOf())}function Tr(n){return n.getUTCHours()*1e3*60*60+n.getUTCMinutes()*1e3*60+n.getUTCSeconds()*1e3+n.getUTCMilliseconds()}function Kv(n,e,t=!1){let r=n.toISOString();return r=r.replace(".000",""),t&&(r=r.replace("T00:00:00Z","")),r.length>10&&(e==null?r=r.replace("Z",""):e!==0&&(r=r.replace("Z",Ud(e,!0)))),r}function Fd(n){return n.toISOString().replace(/T.*$/,"")}function WC(n){return n.toISOString().match(/^\d{4}-\d{2}/)[0]}function qC(n){return os(n.getUTCHours(),2)+":"+os(n.getUTCMinutes(),2)+":"+os(n.getUTCSeconds(),2)}function Ud(n,e=!1){let t=n<0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),s=Math.round(r%60);return e?`${t+os(i,2)}:${os(s,2)}`:`GMT${t}${i}${s?`:${os(s,2)}`:""}`}function ge(n,e,t){let r,i;return function(...s){if(!r)i=n.apply(this,s);else if(!Vr(r,s)){let o=n.apply(this,s);(!e||!e(o,i))&&(i=o)}return r=s,i}}function Ha(n,e,t){let r,i;return s=>(r?kn(r,s)||(i=n.call(this,s)):i=n.call(this,s),r=s,i)}const Oc={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},pl={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},Ea=/\s*([ap])\.?m\.?/i,$C=/,/g,GC=/\s+/g,QC=/\u200e/g,YC=/UTC|GMT/;class KC{constructor(e){let t={},r={},i=9;for(let s in e)s in Oc?(r[s]=e[s],Oc[s]<9&&(i=Math.min(Oc[s],i))):(t[s]=e[s],s in pl&&(i=Math.min(pl[s],i)));this.standardDateProps=t,this.extendedSettings=r,this.smallestUnitNum=i,this.buildFormattingFunc=ge(Ep)}format(e,t){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,t)(e)}formatRange(e,t,r,i){let{standardDateProps:s,extendedSettings:o}=this,l=n0(e.marker,t.marker,r.calendarSystem);if(!l)return this.format(e,r);let u=l;u>1&&(s.year==="numeric"||s.year==="2-digit")&&(s.month==="numeric"||s.month==="2-digit")&&(s.day==="numeric"||s.day==="2-digit")&&(u=1);let h=this.format(e,r),g=this.format(t,r);if(h===g)return h;let b=r0(s,u),w=Ep(b,o,r),A=w(e),C=w(t),P=i0(h,A,g,C),O=o.separator||i||r.defaultSeparator||"";return P?P.before+A+O+C+P.after:h+O+g}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function Ep(n,e,t){let r=Object.keys(n).length;return r===1&&n.timeZoneName==="short"?i=>Ud(i.timeZoneOffset):r===0&&e.week?i=>t0(t.computeWeekNumber(i.marker),t.weekText,t.weekTextLong,t.locale,e.week):XC(n,e,t)}function XC(n,e,t){n=Object.assign({},n),e=Object.assign({},e),JC(n,e),n.timeZone="UTC";let r=new Intl.DateTimeFormat(t.locale.codes,n),i;if(e.omitZeroMinute){let s=Object.assign({},n);delete s.minute,i=new Intl.DateTimeFormat(t.locale.codes,s)}return s=>{let{marker:o}=s,l;i&&!o.getUTCMinutes()?l=i:l=r;let u=l.format(o);return ZC(u,s,n,e,t)}}function JC(n,e){n.timeZoneName&&(n.hour||(n.hour="2-digit"),n.minute||(n.minute="2-digit")),n.timeZoneName==="long"&&(n.timeZoneName="short"),e.omitZeroMinute&&(n.second||n.millisecond)&&delete e.omitZeroMinute}function ZC(n,e,t,r,i){return n=n.replace(QC,""),t.timeZoneName==="short"&&(n=e0(n,i.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":Ud(e.timeZoneOffset))),r.omitCommas&&(n=n.replace($C,"").trim()),r.omitZeroMinute&&(n=n.replace(":00","")),r.meridiem===!1?n=n.replace(Ea,"").trim():r.meridiem==="narrow"?n=n.replace(Ea,(s,o)=>o.toLocaleLowerCase()):r.meridiem==="short"?n=n.replace(Ea,(s,o)=>`${o.toLocaleLowerCase()}m`):r.meridiem==="lowercase"&&(n=n.replace(Ea,s=>s.toLocaleLowerCase())),n=n.replace(GC," "),n=n.trim(),n}function e0(n,e){let t=!1;return n=n.replace(YC,()=>(t=!0,e)),t||(n+=` ${e}`),n}function t0(n,e,t,r,i){let s=[];return i==="long"?s.push(t):(i==="short"||i==="narrow")&&s.push(e),(i==="long"||i==="short")&&s.push(" "),s.push(r.simpleNumberFormat.format(n)),r.options.direction==="rtl"&&s.reverse(),s.join("")}function n0(n,e,t){return t.getMarkerYear(n)!==t.getMarkerYear(e)?5:t.getMarkerMonth(n)!==t.getMarkerMonth(e)?4:t.getMarkerDay(n)!==t.getMarkerDay(e)?2:Tr(n)!==Tr(e)?1:0}function r0(n,e){let t={};for(let r in n)(!(r in pl)||pl[r]<=e)&&(t[r]=n[r]);return t}function i0(n,e,t,r){let i=0;for(;i<n.length;){let s=n.indexOf(e,i);if(s===-1)break;let o=n.substr(0,s);i=s+e.length;let l=n.substr(i),u=0;for(;u<t.length;){let h=t.indexOf(r,u);if(h===-1)break;let g=t.substr(0,h);u=h+r.length;let b=t.substr(u);if(o===g&&l===b)return{before:o,after:l}}}return null}function bp(n,e){let t=e.markerToArray(n.marker);return{marker:n.marker,timeZoneOffset:n.timeZoneOffset,array:t,year:t[0],month:t[1],day:t[2],hour:t[3],minute:t[4],second:t[5],millisecond:t[6]}}function gl(n,e,t,r){let i=bp(n,t.calendarSystem),s=e?bp(e,t.calendarSystem):null;return{date:i,start:i,end:s,timeZone:t.timeZone,localeCodes:t.locale.codes,defaultSeparator:r||t.defaultSeparator}}class s0{constructor(e){this.cmdStr=e}format(e,t,r){return t.cmdFormatter(this.cmdStr,gl(e,null,t,r))}formatRange(e,t,r,i){return r.cmdFormatter(this.cmdStr,gl(e,t,r,i))}}class o0{constructor(e){this.func=e}format(e,t,r){return this.func(gl(e,null,t,r))}formatRange(e,t,r,i){return this.func(gl(e,t,r,i))}}function Xe(n){return typeof n=="object"&&n?new KC(n):typeof n=="string"?new s0(n):typeof n=="function"?new o0(n):null}const wp={navLinkDayClick:G,navLinkWeekClick:G,duration:Ve,bootstrapFontAwesome:G,buttonIcons:G,customButtons:G,defaultAllDayEventDuration:Ve,defaultTimedEventDuration:Ve,nextDayThreshold:Ve,scrollTime:Ve,scrollTimeReset:Boolean,slotMinTime:Ve,slotMaxTime:Ve,dayPopoverFormat:Xe,slotDuration:Ve,snapDuration:Ve,headerToolbar:G,footerToolbar:G,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Xe,dayHeaderClassNames:G,dayHeaderContent:G,dayHeaderDidMount:G,dayHeaderWillUnmount:G,dayCellClassNames:G,dayCellContent:G,dayCellDidMount:G,dayCellWillUnmount:G,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:G,weekNumbers:Boolean,weekNumberClassNames:G,weekNumberContent:G,weekNumberDidMount:G,weekNumberWillUnmount:G,editable:Boolean,viewClassNames:G,viewDidMount:G,viewWillUnmount:G,nowIndicator:Boolean,nowIndicatorClassNames:G,nowIndicatorContent:G,nowIndicatorDidMount:G,nowIndicatorWillUnmount:G,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:G,locale:G,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:G,eventOrder:_C,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:G,contentHeight:G,direction:String,weekNumberFormat:Xe,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:G,initialDate:G,now:G,eventDataTransform:G,stickyHeaderDates:G,stickyFooterScrollbar:G,viewHeight:G,defaultAllDay:Boolean,eventSourceFailure:G,eventSourceSuccess:G,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:G,eventConstraint:G,eventAllow:G,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:G,eventContent:G,eventDidMount:G,eventWillUnmount:G,selectConstraint:G,selectOverlap:G,selectAllow:G,droppable:Boolean,unselectCancel:String,slotLabelFormat:G,slotLaneClassNames:G,slotLaneContent:G,slotLaneDidMount:G,slotLaneWillUnmount:G,slotLabelClassNames:G,slotLabelContent:G,slotLabelDidMount:G,slotLabelWillUnmount:G,dayMaxEvents:G,dayMaxEventRows:G,dayMinWidth:Number,slotLabelInterval:Ve,allDayText:String,allDayClassNames:G,allDayContent:G,allDayDidMount:G,allDayWillUnmount:G,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Xe,rerenderDelay:Number,moreLinkText:G,moreLinkHint:G,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:G,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Ve,hiddenDays:G,fixedWeekCount:Boolean,validRange:G,visibleRange:G,titleFormat:G,eventInteractive:Boolean,noEventsText:String,viewHint:G,navLinkHint:G,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:G,moreLinkClassNames:G,moreLinkContent:G,moreLinkDidMount:G,moreLinkWillUnmount:G,monthStartFormat:Xe,handleCustomRendering:G,customRenderingMetaMap:G,customRenderingReplaces:Boolean},fo={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" â ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},Tp={datesSet:G,eventsSet:G,eventAdd:G,eventChange:G,eventRemove:G,windowResize:G,eventClick:G,eventMouseEnter:G,eventMouseLeave:G,select:G,unselect:G,loading:G,_unmount:G,_beforeprint:G,_afterprint:G,_noEventDrop:G,_noEventResize:G,_resize:G,_scrollRequest:G},Ap={buttonText:G,buttonHints:G,views:G,plugins:G,initialEvents:G,events:G,eventSources:G},ri={headerToolbar:ii,footerToolbar:ii,buttonText:ii,buttonHints:ii,buttonIcons:ii,dateIncrement:ii,plugins:ba,events:ba,eventSources:ba,resources:ba};function ii(n,e){return typeof n=="object"&&typeof e=="object"&&n&&e?kn(n,e):n===e}function ba(n,e){return Array.isArray(n)&&Array.isArray(e)?Vr(n,e):n===e}const a0={type:String,component:G,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:G,usesMinMaxTime:Boolean,classNames:G,content:G,didMount:G,willUnmount:G};function Vc(n){return Hd(n,ri)}function Bd(n,e){let t={},r={};for(let i in e)i in n&&(t[i]=e[i](n[i]));for(let i in n)i in e||(r[i]=n[i]);return{refined:t,extra:r}}function G(n){return n}const{hasOwnProperty:ml}=Object.prototype;function Hd(n,e){let t={};if(e){for(let r in e)if(e[r]===ii){let i=[];for(let s=n.length-1;s>=0;s-=1){let o=n[s][r];if(typeof o=="object"&&o)i.unshift(o);else if(o!==void 0){t[r]=o;break}}i.length&&(t[r]=Hd(i))}}for(let r=n.length-1;r>=0;r-=1){let i=n[r];for(let s in i)s in t||(t[s]=i[s])}return t}function gi(n,e){let t={};for(let r in n)e(n[r],r)&&(t[r]=n[r]);return t}function tr(n,e){let t={};for(let r in n)t[r]=e(n[r],r);return t}function Xv(n){let e={};for(let t of n)e[t]=!0;return e}function jd(n){let e=[];for(let t in n)e.push(n[t]);return e}function kn(n,e){if(n===e)return!0;for(let t in n)if(ml.call(n,t)&&!(t in e))return!1;for(let t in e)if(ml.call(e,t)&&n[t]!==e[t])return!1;return!0}const l0=/^on[A-Z]/;function c0(n,e){const t=Su(n,e);for(let r of t)if(!l0.test(r))return!1;return!0}function Su(n,e){let t=[];for(let r in n)ml.call(n,r)&&(r in e||t.push(r));for(let r in e)ml.call(e,r)&&n[r]!==e[r]&&t.push(r);return t}function Lc(n,e,t={}){if(n===e)return!0;for(let r in e)if(!(r in n&&u0(n[r],e[r],t[r])))return!1;for(let r in n)if(!(r in e))return!1;return!0}function u0(n,e,t){return n===e||t===!0?!0:t?t(n,e):!1}function d0(n,e=0,t,r=1){let i=[];t==null&&(t=Object.keys(n).length);for(let s=e;s<t;s+=r){let o=n[s];o!==void 0&&i.push(o)}return i}let Jv={};function h0(n,e){Jv[n]=e}function f0(n){return new Jv[n]}class p0{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return Ut(e)}markerToArray(e){return wr(e)}}h0("gregory",p0);const g0=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function m0(n){let e=g0.exec(n);if(e){let t=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(Yv(t)){let r=null;return e[13]&&(r=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:t,isTimeUnspecified:!e[6],timeZoneOffset:r}}}return null}class v0{constructor(e){let t=this.timeZone=e.timeZone,r=t!=="local"&&t!=="UTC";e.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(t)),this.canComputeOffset=!!(!r||this.namedTimeZoneImpl),this.calendarSystem=f0(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let t=this.createMarkerMeta(e);return t===null?null:t.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):Ut(yp(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let t=null;return typeof e=="number"?t=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(t=this.timestampToMarker(e))):Array.isArray(e)&&(t=Ut(e)),t===null||!Yv(t)?null:{marker:t,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let t=m0(e);if(t===null)return null;let{marker:r}=t,i=null;return t.timeZoneOffset!==null&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-t.timeZoneOffset*60*1e3):i=t.timeZoneOffset),{marker:r,isTimeUnspecified:t.isTimeUnspecified,forcedTzo:i}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,t){let r=this.calendarSystem.markerToArray(e);return r[0]+=t.years,r[1]+=t.months,r[2]+=t.days,r[6]+=t.milliseconds,this.calendarSystem.arrayToMarker(r)}subtract(e,t){let r=this.calendarSystem.markerToArray(e);return r[0]-=t.years,r[1]-=t.months,r[2]-=t.days,r[6]-=t.milliseconds,this.calendarSystem.arrayToMarker(r)}addYears(e,t){let r=this.calendarSystem.markerToArray(e);return r[0]+=t,this.calendarSystem.arrayToMarker(r)}addMonths(e,t){let r=this.calendarSystem.markerToArray(e);return r[1]+=t,this.calendarSystem.arrayToMarker(r)}diffWholeYears(e,t){let{calendarSystem:r}=this;return Tr(e)===Tr(t)&&r.getMarkerDay(e)===r.getMarkerDay(t)&&r.getMarkerMonth(e)===r.getMarkerMonth(t)?r.getMarkerYear(t)-r.getMarkerYear(e):null}diffWholeMonths(e,t){let{calendarSystem:r}=this;return Tr(e)===Tr(t)&&r.getMarkerDay(e)===r.getMarkerDay(t)?r.getMarkerMonth(t)-r.getMarkerMonth(e)+(r.getMarkerYear(t)-r.getMarkerYear(e))*12:null}greatestWholeUnit(e,t){let r=this.diffWholeYears(e,t);return r!==null?{unit:"year",value:r}:(r=this.diffWholeMonths(e,t),r!==null?{unit:"month",value:r}:(r=FC(e,t),r!==null?{unit:"week",value:r}:(r=fl(e,t),r!==null?{unit:"day",value:r}:(r=MC(e,t),Ba(r)?{unit:"hour",value:r}:(r=OC(e,t),Ba(r)?{unit:"minute",value:r}:(r=VC(e,t),Ba(r)?{unit:"second",value:r}:{unit:"millisecond",value:t.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,t,r){let i;return r.years&&(i=this.diffWholeYears(e,t),i!==null)?i/kC(r):r.months&&(i=this.diffWholeMonths(e,t),i!==null)?i/xC(r):r.days&&(i=fl(e,t),i!==null)?i/as(r):(t.valueOf()-e.valueOf())/ln(r)}startOf(e,t){return t==="year"?this.startOfYear(e):t==="month"?this.startOfMonth(e):t==="week"?this.startOfWeek(e):t==="day"?$e(e):t==="hour"?UC(e):t==="minute"?BC(e):t==="second"?HC(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):jC(e,this.weekDow,this.weekDoy)}format(e,t,r={}){return t.format({marker:e,timeZoneOffset:r.forcedTzo!=null?r.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,t,r,i={}){return i.isEndExclusive&&(t=Lr(t,-1)),r.formatRange({marker:e,timeZoneOffset:i.forcedStartTzo!=null?i.forcedStartTzo:this.offsetForMarker(e)},{marker:t,timeZoneOffset:i.forcedEndTzo!=null?i.forcedEndTzo:this.offsetForMarker(t)},this,i.defaultSeparator)}formatIso(e,t={}){let r=null;return t.omitTimeZoneOffset||(t.forcedTzo!=null?r=t.forcedTzo:r=this.offsetForMarker(e)),Kv(e,r,t.omitTime)}timestampToMarker(e){return this.timeZone==="local"?Ut(yp(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):Ut(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-_p(wr(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(wr(e)):null}toDate(e,t){return this.timeZone==="local"?_p(wr(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(wr(e))*1e3*60):new Date(e.valueOf()-(t||0))}}class Uo{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let t,r;if(typeof e=="object"&&e){t=Object.assign({},this.iconClasses);for(r in e)t[r]=this.applyIconOverridePrefix(e[r]);this.iconClasses=t}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let t=this.iconOverridePrefix;return t&&e.indexOf(t)!==0&&(e=t+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,t){let r;return t&&this.rtlIconClasses?r=this.rtlIconClasses[e]||this.iconClasses[e]:r=this.iconClasses[e],r?`${this.baseIconClass} ${r}`:""}getCustomButtonIconClass(e){let t;return this.iconOverrideCustomButtonOption&&(t=e[this.iconOverrideCustomButtonOption],t)?`${this.baseIconClass} ${this.applyIconOverridePrefix(t)}`:""}}Uo.prototype.classes={};Uo.prototype.iconClasses={};Uo.prototype.baseIconClass="";Uo.prototype.iconOverridePrefix="";function vl(n){n();let e=pe.debounceRendering,t=[];function r(i){t.push(i)}for(pe.debounceRendering=r,Ao(M(y0,{}),document.createElement("div"));t.length;)t.shift()();pe.debounceRendering=e}class y0 extends Wt{render(){return M("div",{})}componentDidMount(){this.setState({})}}function Zv(n){let e=zI(n),t=e.Provider;return e.Provider=function(){let r=!this.getChildContext,i=t.apply(this,arguments);if(r){let s=[];this.shouldComponentUpdate=o=>{this.props.value!==o.value&&s.forEach(l=>{l.context=o.value,l.forceUpdate()})},this.sub=o=>{s.push(o);let l=o.componentWillUnmount;o.componentWillUnmount=()=>{s.splice(s.indexOf(o),1),l&&l.call(o)}}}return i},e}class _0{constructor(e,t,r,i){this.execFunc=e,this.emitter=t,this.scrollTime=r,this.scrollTimeReset=i,this.handleScrollRequest=s=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},s),this.drain()},t.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const sr=Zv({});function E0(n,e,t,r,i,s,o,l,u,h,g,b,w,A){return{dateEnv:i,nowManager:s,options:t,pluginHooks:l,emitter:g,dispatch:u,getCurrentData:h,calendarApi:b,viewSpec:n,viewApi:e,dateProfileGenerator:r,theme:o,isRtl:t.direction==="rtl",addResizeHandler(C){g.on("_resize",C)},removeResizeHandler(C){g.off("_resize",C)},createScrollResponder(C){return new _0(C,g,Ve(t.scrollTime),t.scrollTimeReset)},registerInteractiveComponent:w,unregisterInteractiveComponent:A}}class wi extends Wt{shouldComponentUpdate(e,t){return this.debug&&console.log(Su(e,this.props),Su(t,this.state)),!Lc(this.props,e,this.propEquality)||!Lc(this.state,t,this.stateEquality)}safeSetState(e){Lc(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}wi.addPropsEquality=b0;wi.addStateEquality=w0;wi.contextType=sr;wi.prototype.propEquality={};wi.prototype.stateEquality={};class He extends wi{}He.contextType=sr;function b0(n){let e=Object.create(this.prototype.propEquality);Object.assign(e,n),this.prototype.propEquality=e}function w0(n){let e=Object.create(this.prototype.stateEquality);Object.assign(e,n),this.prototype.stateEquality=e}function nr(n,e){typeof n=="function"?n(e):n&&(n.current=e)}class zd extends He{constructor(){super(...arguments),this.id=Ei(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:t}=this.context,{generatorName:r}=this.props;(!t.customRenderingReplaces||!Iu(r,t))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&nr(this.props.elRef,e)}}render(){const{props:e,context:t}=this,{options:r}=t,{customGenerator:i,defaultGenerator:s,renderProps:o}=e,l=ey(e,[],this.handleEl);let u=!1,h,g=[],b;if(i!=null){const w=typeof i=="function"?i(o,M):i;if(w===!0)u=!0;else{const A=w&&typeof w=="object";A&&"html"in w?l.dangerouslySetInnerHTML={__html:w.html}:A&&"domNodes"in w?g=Array.prototype.slice.call(w.domNodes):(A?Av(w):typeof w!="function")?h=w:b=w}}else u=!Iu(e.generatorName,r);return u&&s&&(h=s(o)),this.queuedDomNodes=g,this.currentGeneratorMeta=b,M(e.elTag,l,h)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var t;const{props:r,context:i}=this,{handleCustomRendering:s,customRenderingMetaMap:o}=i.options;if(s){const l=(t=this.currentGeneratorMeta)!==null&&t!==void 0?t:o==null?void 0:o[r.generatorName];l&&s(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:l},r),{elClasses:(r.elClasses||[]).filter(T0)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:t}=this,r=this.base;if(!Vr(e,t)){t.forEach(Md);for(let i of e)r.appendChild(i);this.currentDomNodes=e}}}zd.addPropsEquality({elClasses:Vr,elStyle:kn,elAttrs:c0,renderProps:kn});function Iu(n,e){var t;return!!(e.handleCustomRendering&&n&&(!((t=e.customRenderingMetaMap)===null||t===void 0)&&t[n]))}function ey(n,e,t){const r=Object.assign(Object.assign({},n.elAttrs),{ref:t});return(n.elClasses||e)&&(r.className=(n.elClasses||[]).concat(e||[]).concat(r.className||[]).filter(Boolean).join(" ")),n.elStyle&&(r.style=n.elStyle),r}function T0(n){return!!n}const ty=Zv(0);class $t extends Wt{constructor(){super(...arguments),this.InnerContent=A0.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(nr(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,t=S0(e.classNameGenerator,e.renderProps);if(e.children){const r=ey(e,t,this.handleEl),i=e.children(this.InnerContent,e.renderProps,r);return e.elTag?M(e.elTag,r,i):i}else return M(zd,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(t),renderId:this.context}))}componentDidMount(){var e,t;this.el?(t=(e=this.props).didMount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,t;(t=(e=this.props).willUnmount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}$t.contextType=ty;function A0(n,e){const t=n.props;return M(zd,Object.assign({renderProps:t.renderProps,generatorName:t.generatorName,customGenerator:t.customGenerator,defaultGenerator:t.defaultGenerator,renderId:n.context},e))}function S0(n,e){const t=typeof n=="function"?n(e):n||[];return typeof t=="string"?[t]:t}class yl extends He{render(){let{props:e,context:t}=this,{options:r}=t,i={view:t.viewApi};return M($t,Object.assign({},e,{elTag:e.elTag||"div",elClasses:[...ny(e.viewSpec),...e.elClasses||[]],renderProps:i,classNameGenerator:r.viewClassNames,generatorName:void 0,didMount:r.viewDidMount,willUnmount:r.viewWillUnmount}),()=>e.children)}}function ny(n){return[`fc-${n.type}-view`,"fc-view"]}function I0(n,e){let t=null,r=null;return n.start&&(t=e.createMarker(n.start)),n.end&&(r=e.createMarker(n.end)),!t&&!r||t&&r&&r<t?null:{start:t,end:r}}function Sp(n,e){let t=[],{start:r}=e,i,s;for(n.sort(C0),i=0;i<n.length;i+=1)s=n[i],s.start>r&&t.push({start:r,end:s.start}),s.end>r&&(r=s.end);return r<e.end&&t.push({start:r,end:e.end}),t}function C0(n,e){return n.start.valueOf()-e.start.valueOf()}function mi(n,e){let{start:t,end:r}=n,i=null;return e.start!==null&&(t===null?t=e.start:t=new Date(Math.max(t.valueOf(),e.start.valueOf()))),e.end!=null&&(r===null?r=e.end:r=new Date(Math.min(r.valueOf(),e.end.valueOf()))),(t===null||r===null||t<r)&&(i={start:t,end:r}),i}function R0(n,e){return(n.start===null?null:n.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(n.end===null?null:n.end.valueOf())===(e.end===null?null:e.end.valueOf())}function Wd(n,e){return(n.end===null||e.start===null||n.end>e.start)&&(n.start===null||e.end===null||n.start<e.end)}function Yl(n,e){return(n.start===null||e.start!==null&&e.start>=n.start)&&(n.end===null||e.end!==null&&e.end<=n.end)}function Kn(n,e){return(n.start===null||e>=n.start)&&(n.end===null||e<n.end)}function D0(n,e){return e.start!=null&&n<e.start?e.start:e.end!=null&&n>=e.end?new Date(e.end.valueOf()-1):n}function ry(n){let e=Math.floor(bi(n.start,n.end))||1,t=$e(n.start),r=At(t,e);return{start:t,end:r}}function iy(n,e=Ve(0)){let t=null,r=null;if(n.end){r=$e(n.end);let i=n.end.valueOf()-r.valueOf();i&&i>=ln(e)&&(r=At(r,1))}return n.start&&(t=$e(n.start),r&&r<=t&&(r=At(t,1))),{start:t,end:r}}function ts(n,e,t,r){return r==="year"?Ve(t.diffWholeYears(n,e),"year"):r==="month"?Ve(t.diffWholeMonths(n,e),"month"):LC(n,e)}class sy{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,t,r){let{dateEnv:i}=this.props,s=i.subtract(i.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(s,-1,r)}buildNext(e,t,r){let{dateEnv:i}=this.props,s=i.add(i.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(s,1,r)}build(e,t,r=!0){let{props:i}=this,s,o,l,u,h,g;return s=this.buildValidRange(),s=this.trimHiddenDays(s),r&&(e=D0(e,s)),o=this.buildCurrentRangeInfo(e,t),l=/^(year|month|week|day)$/.test(o.unit),u=this.buildRenderRange(this.trimHiddenDays(o.range),o.unit,l),u=this.trimHiddenDays(u),h=u,i.showNonCurrentDates||(h=mi(h,o.range)),h=this.adjustActiveRange(h),h=mi(h,s),g=Wd(o.range,s),Kn(u,e)||(e=u.start),{currentDate:e,validRange:s,currentRange:o.range,currentRangeUnit:o.unit,isRangeAllDay:l,activeRange:h,renderRange:u,slotMinTime:i.slotMinTime,slotMaxTime:i.slotMaxTime,isValid:g,dateIncrement:this.buildDateIncrement(o.duration)}}buildValidRange(){let e=this.props.validRangeInput,t=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(t)||{start:null,end:null}}buildCurrentRangeInfo(e,t){let{props:r}=this,i=null,s=null,o=null,l;return r.duration?(i=r.duration,s=r.durationUnit,o=this.buildRangeFromDuration(e,t,i,s)):(l=this.props.dayCount)?(s="day",o=this.buildRangeFromDayCount(e,t,l)):(o=this.buildCustomVisibleRange(e))?s=r.dateEnv.greatestWholeUnit(o.start,o.end).unit:(i=this.getFallbackDuration(),s=Au(i).unit,o=this.buildRangeFromDuration(e,t,i,s)),{duration:i,unit:s,range:o}}getFallbackDuration(){return Ve({day:1})}adjustActiveRange(e){let{dateEnv:t,usesMinMaxTime:r,slotMinTime:i,slotMaxTime:s}=this.props,{start:o,end:l}=e;return r&&(as(i)<0&&(o=$e(o),o=t.add(o,i)),as(s)>1&&(l=$e(l),l=At(l,-1),l=t.add(l,s))),{start:o,end:l}}buildRangeFromDuration(e,t,r,i){let{dateEnv:s,dateAlignment:o}=this.props,l,u,h;if(!o){let{dateIncrement:b}=this.props;b&&ln(b)<ln(r)?o=Au(b).unit:o=i}as(r)<=1&&this.isHiddenDay(l)&&(l=this.skipHiddenDays(l,t),l=$e(l));function g(){l=s.startOf(e,o),u=s.add(l,r),h={start:l,end:u}}return g(),this.trimHiddenDays(h)||(e=this.skipHiddenDays(e,t),g()),h}buildRangeFromDayCount(e,t,r){let{dateEnv:i,dateAlignment:s}=this.props,o=0,l=e,u;s&&(l=i.startOf(l,s)),l=$e(l),l=this.skipHiddenDays(l,t),u=l;do u=At(u,1),this.isHiddenDay(u)||(o+=1);while(o<r);return{start:l,end:u}}buildCustomVisibleRange(e){let{props:t}=this,r=t.visibleRangeInput,i=typeof r=="function"?r.call(t.calendarApi,t.dateEnv.toDate(e)):r,s=this.refineRange(i);return s&&(s.start==null||s.end==null)?null:s}buildRenderRange(e,t,r){return e}buildDateIncrement(e){let{dateIncrement:t}=this.props,r;return t||((r=this.props.dateAlignment)?Ve(1,r):e||Ve({days:1}))}refineRange(e){if(e){let t=I0(e,this.props.dateEnv);return t&&(t=iy(t)),t}return null}initHiddenDays(){let e=this.props.hiddenDays||[],t=[],r=0,i;for(this.props.weekends===!1&&e.push(0,6),i=0;i<7;i+=1)(t[i]=e.indexOf(i)!==-1)||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=t}trimHiddenDays(e){let{start:t,end:r}=e;return t&&(t=this.skipHiddenDays(t)),r&&(r=this.skipHiddenDays(r,-1,!0)),t==null||r==null||t<r?{start:t,end:r}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,t=1,r=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(r?t:0)+7)%7];)e=At(e,t);return e}}function qd(n,e,t,r){return{instanceId:Ei(),defId:n,range:e,forcedStartTzo:t??null,forcedEndTzo:r??null}}function k0(n,e,t,r){for(let i=0;i<r.length;i+=1){let s=r[i].parse(n,t);if(s){let{allDay:o}=n;return o==null&&(o=e,o==null&&(o=s.allDayGuess,o==null&&(o=!1))),{allDay:o,duration:s.duration,typeData:s.typeData,typeId:i}}}return null}function vi(n,e,t){let{dateEnv:r,pluginHooks:i,options:s}=t,{defs:o,instances:l}=n;l=gi(l,u=>!o[u.defId].recurringDef);for(let u in o){let h=o[u];if(h.recurringDef){let{duration:g}=h.recurringDef;g||(g=h.allDay?s.defaultAllDayEventDuration:s.defaultTimedEventDuration);let b=x0(h,g,e,r,i.recurringTypes);for(let w of b){let A=qd(u,{start:w,end:r.add(w,g)});l[A.instanceId]=A}}}return{defs:o,instances:l}}function x0(n,e,t,r,i){let o=i[n.recurringDef.typeId].expand(n.recurringDef.typeData,{start:r.subtract(t.start,e),end:t.end},r);return n.allDay&&(o=o.map($e)),o}const ja={id:String,groupId:String,title:String,url:String,interactive:Boolean},oy={start:G,end:G,date:G,allDay:Boolean},P0=Object.assign(Object.assign(Object.assign({},ja),oy),{extendedProps:G});function ay(n,e,t,r,i=$d(t),s,o){let{refined:l,extra:u}=ly(n,t,i),h=M0(e,t),g=k0(l,h,t.dateEnv,t.pluginHooks.recurringTypes);if(g){let w=Cu(l,u,e?e.sourceId:"",g.allDay,!!g.duration,t,s);return w.recurringDef={typeId:g.typeId,typeData:g.typeData,duration:g.duration},{def:w,instance:null}}let b=N0(l,h,t,r);if(b){let w=Cu(l,u,e?e.sourceId:"",b.allDay,b.hasEnd,t,s),A=qd(w.defId,b.range,b.forcedStartTzo,b.forcedEndTzo);return o&&w.publicId&&o[w.publicId]&&(A.instanceId=o[w.publicId]),{def:w,instance:A}}return null}function ly(n,e,t=$d(e)){return Bd(n,t)}function $d(n){return Object.assign(Object.assign(Object.assign({},_l),P0),n.pluginHooks.eventRefiners)}function Cu(n,e,t,r,i,s,o){let l={title:n.title||"",groupId:n.groupId||"",publicId:n.id||"",url:n.url||"",recurringDef:null,defId:(o&&n.id?o[n.id]:"")||Ei(),sourceId:t,allDay:r,hasEnd:i,interactive:n.interactive,ui:El(n,s),extendedProps:Object.assign(Object.assign({},n.extendedProps||{}),e)};for(let u of s.pluginHooks.eventDefMemberAdders)Object.assign(l,u(n));return Object.freeze(l.ui.classNames),Object.freeze(l.extendedProps),l}function N0(n,e,t,r){let{allDay:i}=n,s,o=null,l=!1,u,h=null,g=n.start!=null?n.start:n.date;if(s=t.dateEnv.createMarkerMeta(g),s)o=s.marker;else if(!r)return null;return n.end!=null&&(u=t.dateEnv.createMarkerMeta(n.end)),i==null&&(e!=null?i=e:i=(!s||s.isTimeUnspecified)&&(!u||u.isTimeUnspecified)),i&&o&&(o=$e(o)),u&&(h=u.marker,i&&(h=$e(h)),o&&h<=o&&(h=null)),h?l=!0:r||(l=t.options.forceEventDuration||!1,h=t.dateEnv.add(o,i?t.options.defaultAllDayEventDuration:t.options.defaultTimedEventDuration)),{allDay:i,hasEnd:l,range:{start:o,end:h},forcedStartTzo:s?s.forcedTzo:null,forcedEndTzo:u?u.forcedTzo:null}}function M0(n,e){let t=null;return n&&(t=n.defaultAllDay),t==null&&(t=e.options.defaultAllDay),t}function So(n,e,t,r,i,s){let o=qt(),l=$d(t);for(let u of n){let h=ay(u,e,t,r,l,i,s);h&&Ru(h,o)}return o}function Ru(n,e=qt()){return e.defs[n.def.defId]=n.def,n.instance&&(e.instances[n.instance.instanceId]=n.instance),e}function Gd(n,e){let t=n.instances[e];if(t){let r=n.defs[t.defId],i=Kl(n,s=>O0(r,s));return i.defs[r.defId]=r,i.instances[t.instanceId]=t,i}return qt()}function O0(n,e){return!!(n.groupId&&n.groupId===e.groupId)}function qt(){return{defs:{},instances:{}}}function Qd(n,e){return{defs:Object.assign(Object.assign({},n.defs),e.defs),instances:Object.assign(Object.assign({},n.instances),e.instances)}}function Kl(n,e){let t=gi(n.defs,e),r=gi(n.instances,i=>t[i.defId]);return{defs:t,instances:r}}function V0(n,e){let{defs:t,instances:r}=n,i={},s={};for(let o in t)e.defs[o]||(i[o]=t[o]);for(let o in r)!e.instances[o]&&i[r[o].defId]&&(s[o]=r[o]);return{defs:i,instances:s}}function L0(n,e){return Array.isArray(n)?So(n,null,e,!0):typeof n=="object"&&n?So([n],null,e,!0):n!=null?String(n):null}function Ip(n){return Array.isArray(n)?n:typeof n=="string"?n.split(/\s+/):[]}const _l={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:G,overlap:G,allow:G,className:Ip,classNames:Ip,color:String,backgroundColor:String,borderColor:String,textColor:String},F0={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function El(n,e){let t=L0(n.constraint,e);return{display:n.display||null,startEditable:n.startEditable!=null?n.startEditable:n.editable,durationEditable:n.durationEditable!=null?n.durationEditable:n.editable,constraints:t!=null?[t]:[],overlap:n.overlap!=null?n.overlap:null,allows:n.allow!=null?[n.allow]:[],backgroundColor:n.backgroundColor||n.color||"",borderColor:n.borderColor||n.color||"",textColor:n.textColor||"",classNames:(n.className||[]).concat(n.classNames||[])}}function cy(n){return n.reduce(U0,F0)}function U0(n,e){return{display:e.display!=null?e.display:n.display,startEditable:e.startEditable!=null?e.startEditable:n.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:n.durationEditable,constraints:n.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:n.overlap,allows:n.allows.concat(e.allows),backgroundColor:e.backgroundColor||n.backgroundColor,borderColor:e.borderColor||n.borderColor,textColor:e.textColor||n.textColor,classNames:n.classNames.concat(e.classNames)}}const B0={id:String,defaultAllDay:Boolean,url:String,format:String,events:G,eventDataTransform:G,success:G,failure:G};function uy(n,e,t=dy(e)){let r;if(typeof n=="string"?r={url:n}:typeof n=="function"||Array.isArray(n)?r={events:n}:typeof n=="object"&&n&&(r=n),r){let{refined:i,extra:s}=Bd(r,t),o=H0(i,e);if(o)return{_raw:n,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:i.defaultAllDay,eventDataTransform:i.eventDataTransform,success:i.success,failure:i.failure,publicId:i.id||"",sourceId:Ei(),sourceDefId:o.sourceDefId,meta:o.meta,ui:El(i,e),extendedProps:s}}return null}function dy(n){return Object.assign(Object.assign(Object.assign({},_l),B0),n.pluginHooks.eventSourceRefiners)}function H0(n,e){let t=e.pluginHooks.eventSourceDefs;for(let r=t.length-1;r>=0;r-=1){let s=t[r].parseMeta(n);if(s)return{sourceDefId:r,meta:s}}return null}function j0(n,e,t,r,i){switch(e.type){case"RECEIVE_EVENTS":return z0(n,t[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,i);case"RESET_RAW_EVENTS":return W0(n,t[e.sourceId],e.rawEvents,r.activeRange,i);case"ADD_EVENTS":return q0(n,e.eventStore,r?r.activeRange:null,i);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return Qd(n,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?vi(n,r.activeRange,i):n;case"REMOVE_EVENTS":return V0(n,e.eventStore);case"REMOVE_EVENT_SOURCE":return fy(n,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return Kl(n,s=>!s.sourceId);case"REMOVE_ALL_EVENTS":return qt();default:return n}}function z0(n,e,t,r,i,s){if(e&&t===e.latestFetchId){let o=So(hy(i,e,s),e,s);return r&&(o=vi(o,r,s)),Qd(fy(n,e.sourceId),o)}return n}function W0(n,e,t,r,i){const{defIdMap:s,instanceIdMap:o}=G0(n);let l=So(hy(t,e,i),e,i,!1,s,o);return vi(l,r,i)}function hy(n,e,t){let r=t.options.eventDataTransform,i=e?e.eventDataTransform:null;return i&&(n=Cp(n,i)),r&&(n=Cp(n,r)),n}function Cp(n,e){let t;if(!e)t=n;else{t=[];for(let r of n){let i=e(r);i?t.push(i):i==null&&t.push(r)}}return t}function q0(n,e,t,r){return t&&(e=vi(e,t,r)),Qd(n,e)}function Rp(n,e,t){let{defs:r}=n,i=tr(n.instances,s=>r[s.defId].allDay?s:Object.assign(Object.assign({},s),{range:{start:t.createMarker(e.toDate(s.range.start,s.forcedStartTzo)),end:t.createMarker(e.toDate(s.range.end,s.forcedEndTzo))},forcedStartTzo:t.canComputeOffset?null:s.forcedStartTzo,forcedEndTzo:t.canComputeOffset?null:s.forcedEndTzo}));return{defs:r,instances:i}}function fy(n,e){return Kl(n,t=>t.sourceId!==e)}function $0(n,e){return{defs:n.defs,instances:gi(n.instances,t=>!e[t.instanceId])}}function G0(n){const{defs:e,instances:t}=n,r={},i={};for(let s in e){const o=e[s],{publicId:l}=o;l&&(r[l]=s)}for(let s in t){const o=t[s],l=e[o.defId],{publicId:u}=l;u&&(i[u]=s)}return{defIdMap:r,instanceIdMap:i}}class Xl{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,t){Q0(this.handlers,e,t)}off(e,t){Y0(this.handlers,e,t)}trigger(e,...t){let r=this.handlers[e]||[],i=this.options&&this.options[e],s=[].concat(i||[],r);for(let o of s)o.apply(this.thisContext,t)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function Q0(n,e,t){(n[e]||(n[e]=[])).push(t)}function Y0(n,e,t){t?n[e]&&(n[e]=n[e].filter(r=>r!==t)):delete n[e]}const K0={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function X0(n,e){return So(J0(n),null,e)}function J0(n){let e;return n===!0?e=[{}]:Array.isArray(n)?e=n.filter(t=>t.daysOfWeek):typeof n=="object"&&n?e=[n]:e=[],e=e.map(t=>Object.assign(Object.assign({},K0),t)),e}function py(n,e,t){t.emitter.trigger("select",Object.assign(Object.assign({},Yd(n,t)),{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view}))}function Z0(n,e){e.emitter.trigger("unselect",{jsEvent:n?n.origEvent:null,view:e.viewApi||e.calendarApi.view})}function Yd(n,e){let t={};for(let r of e.pluginHooks.dateSpanTransforms)Object.assign(t,r(n,e));return Object.assign(t,fR(n,e.dateEnv)),t}function Dp(n,e,t){let{dateEnv:r,options:i}=t,s=e;return n?(s=$e(s),s=r.add(s,i.defaultAllDayEventDuration)):s=r.add(s,i.defaultTimedEventDuration),s}function Kd(n,e,t,r){let i=bl(n.defs,e),s=qt();for(let o in n.defs){let l=n.defs[o];s.defs[o]=eR(l,i[o],t,r)}for(let o in n.instances){let l=n.instances[o],u=s.defs[l.defId];s.instances[o]=tR(l,u,i[l.defId],t,r)}return s}function eR(n,e,t,r){let i=t.standardProps||{};i.hasEnd==null&&e.durationEditable&&(t.startDelta||t.endDelta)&&(i.hasEnd=!0);let s=Object.assign(Object.assign(Object.assign({},n),i),{ui:Object.assign(Object.assign({},n.ui),i.ui)});t.extendedProps&&(s.extendedProps=Object.assign(Object.assign({},s.extendedProps),t.extendedProps));for(let o of r.pluginHooks.eventDefMutationAppliers)o(s,t,r);return!s.hasEnd&&r.options.forceEventDuration&&(s.hasEnd=!0),s}function tR(n,e,t,r,i){let{dateEnv:s}=i,o=r.standardProps&&r.standardProps.allDay===!0,l=r.standardProps&&r.standardProps.hasEnd===!1,u=Object.assign({},n);return o&&(u.range=ry(u.range)),r.datesDelta&&t.startEditable&&(u.range={start:s.add(u.range.start,r.datesDelta),end:s.add(u.range.end,r.datesDelta)}),r.startDelta&&t.durationEditable&&(u.range={start:s.add(u.range.start,r.startDelta),end:u.range.end}),r.endDelta&&t.durationEditable&&(u.range={start:u.range.start,end:s.add(u.range.end,r.endDelta)}),l&&(u.range={start:u.range.start,end:Dp(e.allDay,u.range.start,i)}),e.allDay&&(u.range={start:$e(u.range.start),end:$e(u.range.end)}),u.range.end<u.range.start&&(u.range.end=Dp(e.allDay,u.range.start,i)),u}class Zi{constructor(e,t){this.context=e,this.internalEventSource=t}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Ke{constructor(e,t,r){this._context=e,this._def=t,this._instance=r||null}setProp(e,t){if(e in oy)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")t=ja[e](t),this.mutate({standardProps:{publicId:t}});else if(e in ja)t=ja[e](t),this.mutate({standardProps:{[e]:t}});else if(e in _l){let r=_l[e](t);e==="color"?r={backgroundColor:t,borderColor:t}:e==="editable"?r={startEditable:t,durationEditable:t}:r={[e]:t},this.mutate({standardProps:{ui:r}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,t){this.mutate({extendedProps:{[e]:t}})}setStart(e,t={}){let{dateEnv:r}=this._context,i=r.createMarker(e);if(i&&this._instance){let s=this._instance.range,o=ts(s.start,i,r,t.granularity);t.maintainDuration?this.mutate({datesDelta:o}):this.mutate({startDelta:o})}}setEnd(e,t={}){let{dateEnv:r}=this._context,i;if(!(e!=null&&(i=r.createMarker(e),!i))&&this._instance)if(i){let s=ts(this._instance.range.end,i,r,t.granularity);this.mutate({endDelta:s})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,t,r={}){let{dateEnv:i}=this._context,s={allDay:r.allDay},o=i.createMarker(e),l;if(o&&!(t!=null&&(l=i.createMarker(t),!l))&&this._instance){let u=this._instance.range;r.allDay===!0&&(u=ry(u));let h=ts(u.start,o,i,r.granularity);if(l){let g=ts(u.end,l,i,r.granularity);CC(h,g)?this.mutate({datesDelta:h,standardProps:s}):this.mutate({startDelta:h,endDelta:g,standardProps:s})}else s.hasEnd=!1,this.mutate({datesDelta:h,standardProps:s})}}moveStart(e){let t=Ve(e);t&&this.mutate({startDelta:t})}moveEnd(e){let t=Ve(e);t&&this.mutate({endDelta:t})}moveDates(e){let t=Ve(e);t&&this.mutate({datesDelta:t})}setAllDay(e,t={}){let r={allDay:e},{maintainDuration:i}=t;i==null&&(i=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(r.hasEnd=i),this.mutate({standardProps:r})}formatRange(e){let{dateEnv:t}=this._context,r=this._instance,i=Xe(e);return this._def.hasEnd?t.formatRange(r.range.start,r.range.end,i,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):t.format(r.range.start,i,{forcedTzo:r.forcedStartTzo})}mutate(e){let t=this._instance;if(t){let r=this._def,i=this._context,{eventStore:s}=i.getCurrentData(),o=Gd(s,t.instanceId);o=Kd(o,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,i);let u=new Ke(i,r,t);this._def=o.defs[r.defId],this._instance=o.instances[t.instanceId],i.dispatch({type:"MERGE_EVENTS",eventStore:o}),i.emitter.trigger("eventChange",{oldEvent:u,event:this,relatedEvents:ai(o,i,t),revert(){i.dispatch({type:"RESET_EVENTS",eventStore:s})}})}}remove(){let e=this._context,t=gy(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:t}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:t})}})}get source(){let{sourceId:e}=this._def;return e?new Zi(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let t=this._def,{ui:r}=t,{startStr:i,endStr:s}=this,o={allDay:t.allDay};return t.title&&(o.title=t.title),i&&(o.start=i),s&&(o.end=s),t.publicId&&(o.id=t.publicId),t.groupId&&(o.groupId=t.groupId),t.url&&(o.url=t.url),r.display&&r.display!=="auto"&&(o.display=r.display),e.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?o.color=r.backgroundColor:(r.backgroundColor&&(o.backgroundColor=r.backgroundColor),r.borderColor&&(o.borderColor=r.borderColor)),r.textColor&&(o.textColor=r.textColor),r.classNames.length&&(o.classNames=r.classNames),Object.keys(t.extendedProps).length&&(e.collapseExtendedProps?Object.assign(o,t.extendedProps):o.extendedProps=t.extendedProps),o}toJSON(){return this.toPlainObject()}}function gy(n){let e=n._def,t=n._instance;return{defs:{[e.defId]:e},instances:t?{[t.instanceId]:t}:{}}}function ai(n,e,t){let{defs:r,instances:i}=n,s=[],o=t?t.instanceId:"";for(let l in i){let u=i[l],h=r[u.defId];u.instanceId!==o&&s.push(new Ke(e,h,u))}return s}function kp(n,e,t,r){let i={},s={},o={},l=[],u=[],h=bl(n.defs,e);for(let g in n.defs){let b=n.defs[g];h[b.defId].display==="inverse-background"&&(b.groupId?(i[b.groupId]=[],o[b.groupId]||(o[b.groupId]=b)):s[g]=[])}for(let g in n.instances){let b=n.instances[g],w=n.defs[b.defId],A=h[w.defId],C=b.range,P=!w.allDay&&r?iy(C,r):C,O=mi(P,t);O&&(A.display==="inverse-background"?w.groupId?i[w.groupId].push(O):s[b.defId].push(O):A.display!=="none"&&(A.display==="background"?l:u).push({def:w,ui:A,instance:b,range:O,isStart:P.start&&P.start.valueOf()===O.start.valueOf(),isEnd:P.end&&P.end.valueOf()===O.end.valueOf()}))}for(let g in i){let b=i[g],w=Sp(b,t);for(let A of w){let C=o[g],P=h[C.defId];l.push({def:C,ui:P,instance:null,range:A,isStart:!1,isEnd:!1})}}for(let g in s){let b=s[g],w=Sp(b,t);for(let A of w)l.push({def:n.defs[g],ui:h[g],instance:null,range:A,isStart:!1,isEnd:!1})}return{bg:l,fg:u}}function nR(n){return n.ui.display==="background"||n.ui.display==="inverse-background"}function xp(n,e){n.fcSeg=e}function _s(n){return n.fcSeg||n.parentNode.fcSeg||null}function bl(n,e){return tr(n,t=>my(t,e))}function my(n,e){let t=[];return e[""]&&t.push(e[""]),e[n.defId]&&t.push(e[n.defId]),t.push(n.ui),cy(t)}function vy(n,e){let t=n.map(rR);return t.sort((r,i)=>EC(r,i,e)),t.map(r=>r._seg)}function rR(n){let{eventRange:e}=n,t=e.def,r=e.instance?e.instance.range:e.range,i=r.start?r.start.valueOf():0,s=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},t.extendedProps),t),{id:t.publicId,start:i,end:s,duration:s-i,allDay:Number(t.allDay),_seg:n})}function iR(n,e){let{pluginHooks:t}=e,r=t.isDraggableTransformers,{def:i,ui:s}=n.eventRange,o=s.startEditable;for(let l of r)o=l(o,i,s,e);return o}function sR(n,e){return n.isStart&&n.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function oR(n,e){return n.isEnd&&n.eventRange.ui.durationEditable}function yy(n,e,t,r,i,s,o){let{dateEnv:l,options:u}=t,{displayEventTime:h,displayEventEnd:g}=u,b=n.eventRange.def,w=n.eventRange.instance;h==null&&(h=r!==!1),g==null&&(g=i!==!1);let A=w.range.start,C=w.range.end,P=n.start||n.eventRange.range.start,O=n.end||n.eventRange.range.end,U=$e(A).valueOf()===$e(P).valueOf(),X=$e(Lr(C,-1)).valueOf()===$e(Lr(O,-1)).valueOf();return h&&!b.allDay&&(U||X)?(P=U?A:P,O=X?C:O,g&&b.hasEnd?l.formatRange(P,O,e,{forcedStartTzo:w.forcedStartTzo,forcedEndTzo:w.forcedEndTzo}):l.format(P,e,{forcedTzo:w.forcedStartTzo})):""}function Dr(n,e,t){let r=n.eventRange.range;return{isPast:r.end<=(t||e.start),isFuture:r.start>=(t||e.end),isToday:e&&Kn(e,r.start)}}function aR(n){let e=["fc-event"];return n.isMirror&&e.push("fc-event-mirror"),n.isDraggable&&e.push("fc-event-draggable"),(n.isStartResizable||n.isEndResizable)&&e.push("fc-event-resizable"),n.isDragging&&e.push("fc-event-dragging"),n.isResizing&&e.push("fc-event-resizing"),n.isSelected&&e.push("fc-event-selected"),n.isStart&&e.push("fc-event-start"),n.isEnd&&e.push("fc-event-end"),n.isPast&&e.push("fc-event-past"),n.isToday&&e.push("fc-event-today"),n.isFuture&&e.push("fc-event-future"),e}function _y(n){return n.instance?n.instance.instanceId:`${n.def.defId}:${n.range.start.toISOString()}`}function Ey(n,e){let{def:t,instance:r}=n.eventRange,{url:i}=t;if(i)return{href:i};let{emitter:s,options:o}=e,{eventInteractive:l}=o;return l==null&&(l=t.interactive,l==null&&(l=!!s.hasHandlers("eventClick"))),l?Qv(u=>{s.trigger("eventClick",{el:u.target,event:new Ke(e,t,r),jsEvent:u,view:e.viewApi})}):{}}const lR={start:G,end:G,allDay:Boolean};function cR(n,e,t){let r=uR(n,e),{range:i}=r;if(!i.start)return null;if(!i.end){if(t==null)return null;i.end=e.add(i.start,t)}return r}function uR(n,e){let{refined:t,extra:r}=Bd(n,lR),i=t.start?e.createMarkerMeta(t.start):null,s=t.end?e.createMarkerMeta(t.end):null,{allDay:o}=t;return o==null&&(o=i&&i.isTimeUnspecified&&(!s||s.isTimeUnspecified)),Object.assign({range:{start:i?i.marker:null,end:s?s.marker:null},allDay:o},r)}function dR(n,e){return R0(n.range,e.range)&&n.allDay===e.allDay&&hR(n,e)}function hR(n,e){for(let t in e)if(t!=="range"&&t!=="allDay"&&n[t]!==e[t])return!1;for(let t in n)if(!(t in e))return!1;return!0}function fR(n,e){return Object.assign(Object.assign({},wy(n.range,e,n.allDay)),{allDay:n.allDay})}function by(n,e,t){return Object.assign(Object.assign({},wy(n,e,t)),{timeZone:e.timeZone})}function wy(n,e,t){return{start:e.toDate(n.start),end:e.toDate(n.end),startStr:e.formatIso(n.start,{omitTime:t}),endStr:e.formatIso(n.end,{omitTime:t})}}function pR(n,e,t){let r=ly({editable:!1},t),i=Cu(r.refined,r.extra,"",n.allDay,!0,t);return{def:i,ui:my(i,e),instance:qd(i.defId,n.range),range:n.range,isStart:!0,isEnd:!0}}function gR(n,e,t){let r=!1,i=function(l){r||(r=!0,e(l))},s=function(l){r||(r=!0,t(l))},o=n(i,s);o&&typeof o.then=="function"&&o.then(i,s)}class Pp extends Error{constructor(e,t){super(e),this.response=t}}function mR(n,e,t){n=n.toUpperCase();const r={method:n};return n==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(t):(r.body=new URLSearchParams(t),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,r).then(i=>{if(i.ok)return i.json().then(s=>[s,i],()=>{throw new Pp("Failure parsing JSON",i)});throw new Pp("Request failed",i)})}let Fc;function Ty(){return Fc==null&&(Fc=vR()),Fc}function vR(){if(typeof document>"u")return!0;let n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.innerHTML="<table><tr><td><div></div></td></tr></table>",n.querySelector("table").style.height="100px",n.querySelector("div").style.height="100%",document.body.appendChild(n);let t=n.querySelector("div").offsetHeight>0;return document.body.removeChild(n),t}class yR extends He{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{vl(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{vl(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:t}=e,{forPrint:r}=this.state,i=r||t.height==="auto"||t.contentHeight==="auto",s=!i&&t.height!=null?t.height:"",o=["fc",r?"fc-media-print":"fc-media-screen",`fc-direction-${t.direction}`,e.theme.getClass("root")];return Ty()||o.push("fc-liquid-hack"),e.children(o,s,i,r)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class ks{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function _R(n,e){return{component:n,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function Xd(n){return{[n.component.uid]:n}}const Du={};class xs extends Wt{constructor(e,t){super(e,t),this.handleRefresh=()=>{let r=this.computeTiming();r.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(r.state),this.clearTimeout(),this.setTimeout(r.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:t}=this;return e.children(t.nowDate,t.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:t}=this,r=t.nowManager.getDateMarker(),i=t.dateEnv.startOf(r,e.unit),o=t.dateEnv.add(i,Ve(1,e.unit)).valueOf()-r.valueOf();return o=Math.min(1e3*60*60*24,o),{state:{nowDate:i,todayRange:ER(i)},waitMs:o}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const t=this.computeTiming();this.setState(t.state,()=>{this.setTimeout(t.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}xs.contextType=sr;function ER(n){let e=$e(n),t=At(e,1);return{start:e,end:t}}class bR{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,t){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:t})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,t){let{currentDataManager:r}=this;r.currentCalendarOptionsRefiners[e]?r.emitter.on(e,t):console.warn(`Unknown listener name '${e}'`)}off(e,t){this.currentDataManager.emitter.off(e,t)}trigger(e,...t){this.currentDataManager.emitter.trigger(e,...t)}changeView(e,t){this.batchRendering(()=>{if(this.unselect(),t)if(t.start&&t.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:t});else{let{dateEnv:r}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:r.createMarker(t)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,t){let r=this.getCurrentData(),i;t=t||"day",i=r.viewSpecs[t]||this.getUnitViewSpec(t),this.unselect(),i?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:t,toolbarConfig:r}=this.getCurrentData(),i=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]),s,o;for(let l in t)i.push(l);for(s=0;s<i.length;s+=1)if(o=t[i[s]],o&&o.singleUnit===e)return o;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.createMarker(e)})}incrementDate(e){let t=this.getCurrentData(),r=Ve(e);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.add(t.currentDate,r)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,t){let{dateEnv:r}=this.getCurrentData();return r.format(r.createMarker(e),Xe(t))}formatRange(e,t,r){let{dateEnv:i}=this.getCurrentData();return i.formatRange(i.createMarker(e),i.createMarker(t),Xe(r),r)}formatIso(e,t){let{dateEnv:r}=this.getCurrentData();return r.formatIso(r.createMarker(e),{omitTime:t})}select(e,t){let r;t==null?e.start!=null?r=e:r={start:e,end:null}:r={start:e,end:t};let i=this.getCurrentData(),s=cR(r,i.dateEnv,Ve({days:1}));s&&(this.dispatch({type:"SELECT_DATES",selection:s}),py(s,null,i))}unselect(e){let t=this.getCurrentData();t.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),Z0(e,t))}addEvent(e,t){if(e instanceof Ke){let o=e._def,l=e._instance;return this.getCurrentData().eventStore.defs[o.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:Ru({def:o,instance:l})}),this.triggerEventAdd(e)),e}let r=this.getCurrentData(),i;if(t instanceof Zi)i=t.internalEventSource;else if(typeof t=="boolean")t&&([i]=jd(r.eventSources));else if(t!=null){let o=this.getEventSourceById(t);if(!o)return console.warn(`Could not find an event source with ID "${t}"`),null;i=o.internalEventSource}let s=ay(e,i,r,!1);if(s){let o=new Ke(r,s.def,s.def.recurringDef?null:s.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:Ru(s)}),this.triggerEventAdd(o),o}return null}triggerEventAdd(e){let{emitter:t}=this.getCurrentData();t.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:gy(e)})}})}getEventById(e){let t=this.getCurrentData(),{defs:r,instances:i}=t.eventStore;e=String(e);for(let s in r){let o=r[s];if(o.publicId===e){if(o.recurringDef)return new Ke(t,o,null);for(let l in i){let u=i[l];if(u.defId===o.defId)return new Ke(t,o,u)}}}return null}getEvents(){let e=this.getCurrentData();return ai(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),t=e.eventSources,r=[];for(let i in t)r.push(new Zi(e,t[i]));return r}getEventSourceById(e){let t=this.getCurrentData(),r=t.eventSources;e=String(e);for(let i in r)if(r[i].publicId===e)return new Zi(t,r[i]);return null}addEventSource(e){let t=this.getCurrentData();if(e instanceof Zi)return t.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let r=uy(e,t);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new Zi(t,r)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let t=Ve(e);t&&this.trigger("_scrollRequest",{time:t})}}function wR(n,e){return n.left>=e.left&&n.left<e.right&&n.top>=e.top&&n.top<e.bottom}function Ay(n,e){let t={left:Math.max(n.left,e.left),right:Math.min(n.right,e.right),top:Math.max(n.top,e.top),bottom:Math.min(n.bottom,e.bottom)};return t.left<t.right&&t.top<t.bottom?t:!1}function TR(n,e){return{left:Math.min(Math.max(n.left,e.left),e.right),top:Math.min(Math.max(n.top,e.top),e.bottom)}}function AR(n){return{left:(n.left+n.right)/2,top:(n.top+n.bottom)/2}}function SR(n,e){return{left:n.left-e.left,top:n.top-e.top}}const Uc=qt();class IR{constructor(){this.getKeysForEventDefs=ge(this._getKeysForEventDefs),this.splitDateSelection=ge(this._splitDateSpan),this.splitEventStore=ge(this._splitEventStore),this.splitIndividualUi=ge(this._splitIndividualUi),this.splitEventDrag=ge(this._splitInteraction),this.splitEventResize=ge(this._splitInteraction),this.eventUiBuilders={}}splitProps(e){let t=this.getKeyInfo(e),r=this.getKeysForEventDefs(e.eventStore),i=this.splitDateSelection(e.dateSelection),s=this.splitIndividualUi(e.eventUiBases,r),o=this.splitEventStore(e.eventStore,r),l=this.splitEventDrag(e.eventDrag),u=this.splitEventResize(e.eventResize),h={};this.eventUiBuilders=tr(t,(g,b)=>this.eventUiBuilders[b]||ge(CR));for(let g in t){let b=t[g],w=o[g]||Uc,A=this.eventUiBuilders[g];h[g]={businessHours:b.businessHours||e.businessHours,dateSelection:i[g]||null,eventStore:w,eventUiBases:A(e.eventUiBases[""],b.ui,s[g]),eventSelection:w.instances[e.eventSelection]?e.eventSelection:"",eventDrag:l[g]||null,eventResize:u[g]||null}}return h}_splitDateSpan(e){let t={};if(e){let r=this.getKeysForDateSpan(e);for(let i of r)t[i]=e}return t}_getKeysForEventDefs(e){return tr(e.defs,t=>this.getKeysForEventDef(t))}_splitEventStore(e,t){let{defs:r,instances:i}=e,s={};for(let o in r)for(let l of t[o])s[l]||(s[l]=qt()),s[l].defs[o]=r[o];for(let o in i){let l=i[o];for(let u of t[l.defId])s[u]&&(s[u].instances[o]=l)}return s}_splitIndividualUi(e,t){let r={};for(let i in e)if(i)for(let s of t[i])r[s]||(r[s]={}),r[s][i]=e[i];return r}_splitInteraction(e){let t={};if(e){let r=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),i=this._getKeysForEventDefs(e.mutatedEvents),s=this._splitEventStore(e.mutatedEvents,i),o=l=>{t[l]||(t[l]={affectedEvents:r[l]||Uc,mutatedEvents:s[l]||Uc,isEvent:e.isEvent})};for(let l in r)o(l);for(let l in s)o(l)}return t}}function CR(n,e,t){let r=[];n&&r.push(n),e&&r.push(e);let i={"":cy(r)};return t&&Object.assign(i,t),i}function Sy(n,e,t,r){return{dow:n.getUTCDay(),isDisabled:!!(r&&(!r.activeRange||!Kn(r.activeRange,n))),isOther:!!(r&&!Kn(r.currentRange,n)),isToday:!!(e&&Kn(e,n)),isPast:!!(e&&n<e.start),isFuture:!!(e&&n>=e.end)}}function Jd(n,e){let t=["fc-day",`fc-day-${PC[n.dow]}`];return n.isDisabled?t.push("fc-day-disabled"):(n.isToday&&(t.push("fc-day-today"),t.push(e.getClass("today"))),n.isPast&&t.push("fc-day-past"),n.isFuture&&t.push("fc-day-future"),n.isOther&&t.push("fc-day-other")),t}const RR=Xe({year:"numeric",month:"long",day:"numeric"}),DR=Xe({week:"long"});function wl(n,e,t="day",r=!0){const{dateEnv:i,options:s,calendarApi:o}=n;let l=i.format(e,t==="week"?DR:RR);if(s.navLinks){let u=i.toDate(e);const h=g=>{let b=t==="day"?s.navLinkDayClick:t==="week"?s.navLinkWeekClick:null;typeof b=="function"?b.call(o,i.toDate(e),g):(typeof b=="string"&&(t=b),o.zoomTo(e,t))};return Object.assign({title:ho(s.navLinkHint,[l,u],l),"data-navlink":""},r?Gv(h):{onClick:h})}return{"aria-label":l}}let Bc=null;function kR(){return Bc===null&&(Bc=xR()),Bc}function xR(){let n=document.createElement("div");uo(n,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),n.innerHTML="<div></div>",document.body.appendChild(n);let t=n.firstChild.getBoundingClientRect().left>n.getBoundingClientRect().left;return Md(n),t}let Hc;function PR(){return Hc||(Hc=NR()),Hc}function NR(){let n=document.createElement("div");n.style.overflow="scroll",n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",document.body.appendChild(n);let e=Iy(n);return document.body.removeChild(n),e}function Iy(n){return{x:n.offsetHeight-n.clientHeight,y:n.offsetWidth-n.clientWidth}}function MR(n,e=!1){let t=window.getComputedStyle(n),r=parseInt(t.borderLeftWidth,10)||0,i=parseInt(t.borderRightWidth,10)||0,s=parseInt(t.borderTopWidth,10)||0,o=parseInt(t.borderBottomWidth,10)||0,l=Iy(n),u=l.y-r-i,h=l.x-s-o,g={borderLeft:r,borderRight:i,borderTop:s,borderBottom:o,scrollbarBottom:h,scrollbarLeft:0,scrollbarRight:0};return kR()&&t.direction==="rtl"?g.scrollbarLeft=u:g.scrollbarRight=u,e&&(g.paddingLeft=parseInt(t.paddingLeft,10)||0,g.paddingRight=parseInt(t.paddingRight,10)||0,g.paddingTop=parseInt(t.paddingTop,10)||0,g.paddingBottom=parseInt(t.paddingBottom,10)||0),g}function OR(n,e=!1,t){let r=Zd(n),i=MR(n,e),s={left:r.left+i.borderLeft+i.scrollbarLeft,right:r.right-i.borderRight-i.scrollbarRight,top:r.top+i.borderTop,bottom:r.bottom-i.borderBottom-i.scrollbarBottom};return e&&(s.left+=i.paddingLeft,s.right-=i.paddingRight,s.top+=i.paddingTop,s.bottom-=i.paddingBottom),s}function Zd(n){let e=n.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function VR(n){let e=Cy(n),t=n.getBoundingClientRect();for(let r of e){let i=Ay(t,r.getBoundingClientRect());if(i)t=i;else return null}return t}function Cy(n){let e=[];for(;n instanceof HTMLElement;){let t=window.getComputedStyle(n);if(t.position==="fixed")break;/(auto|scroll)/.test(t.overflow+t.overflowY+t.overflowX)&&e.push(n),n=n.parentNode}return e}class Es{constructor(e,t,r,i){this.els=t;let s=this.originClientRect=e.getBoundingClientRect();r&&this.buildElHorizontals(s.left),i&&this.buildElVerticals(s.top)}buildElHorizontals(e){let t=[],r=[];for(let i of this.els){let s=i.getBoundingClientRect();t.push(s.left-e),r.push(s.right-e)}this.lefts=t,this.rights=r}buildElVerticals(e){let t=[],r=[];for(let i of this.els){let s=i.getBoundingClientRect();t.push(s.top-e),r.push(s.bottom-e)}this.tops=t,this.bottoms=r}leftToIndex(e){let{lefts:t,rights:r}=this,i=t.length,s;for(s=0;s<i;s+=1)if(e>=t[s]&&e<r[s])return s}topToIndex(e){let{tops:t,bottoms:r}=this,i=t.length,s;for(s=0;s<i;s+=1)if(e>=t[s]&&e<r[s])return s}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return wa(this.tops||[],e.tops||[])&&wa(this.bottoms||[],e.bottoms||[])&&wa(this.lefts||[],e.lefts||[])&&wa(this.rights||[],e.rights||[])}}function wa(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(Math.round(n[r])!==Math.round(e[r]))return!1;return!0}class eh{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class LR extends eh{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class FR extends eh{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Pn extends He{constructor(){super(...arguments),this.uid=Ei()}prepareHits(){}queryHit(e,t,r,i){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Tt(e,".fc-event-mirror")}isValidDateDownEl(e){return!Tt(e,".fc-event:not(.fc-bg-event)")&&!Tt(e,".fc-more-link")&&!Tt(e,"a[data-navlink]")&&!Tt(e,".fc-popover")}}class Ry{constructor(e=t=>t.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let t=[];for(let r of e)this.insertEntry(r,t);return t}insertEntry(e,t){let r=this.findInsertion(e);this.isInsertionValid(r,e)?this.insertEntryAt(e,r):this.handleInvalidInsertion(r,e,t)}isInsertionValid(e,t){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(t)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,t,r){if(this.allowReslicing&&e.touchingEntry){const i=Object.assign(Object.assign({},t),{span:th(t.span,e.touchingEntry.span)});r.push(i),this.splitEntry(t,e.touchingEntry,r)}else r.push(t)}splitEntry(e,t,r){let i=e.span,s=t.span;i.start<s.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:i.start,end:s.start}},r),i.end>s.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:s.end,end:i.end}},r)}insertEntryAt(e,t){let{entriesByLevel:r,levelCoords:i}=this;t.lateral===-1?(jc(i,t.level,t.levelCoord),jc(r,t.level,[e])):jc(r[t.level],t.lateral,e),this.stackCnts[li(e)]=t.stackCnt}findInsertion(e){let{levelCoords:t,entriesByLevel:r,strictOrder:i,stackCnts:s}=this,o=t.length,l=0,u=-1,h=-1,g=null,b=0;for(let C=0;C<o;C+=1){const P=t[C];if(!i&&P>=l+this.getEntryThickness(e))break;let O=r[C],U,X=xu(O,e.span.start,ku),te=X[0]+X[1];for(;(U=O[te])&&U.span.start<e.span.end;){let ie=P+this.getEntryThickness(U);ie>l&&(l=ie,g=U,u=C,h=te),ie===l&&(b=Math.max(b,s[li(U)]+1)),te+=1}}let w=0;if(g)for(w=u+1;w<o&&t[w]<l;)w+=1;let A=-1;return w<o&&t[w]===l&&(A=xu(r[w],e.span.end,ku)[0]),{touchingLevel:u,touchingLateral:h,touchingEntry:g,stackCnt:b,levelCoord:l,level:w,lateral:A}}toRects(){let{entriesByLevel:e,levelCoords:t}=this,r=e.length,i=[];for(let s=0;s<r;s+=1){let o=e[s],l=t[s];for(let u of o)i.push(Object.assign(Object.assign({},u),{thickness:this.getEntryThickness(u),levelCoord:l}))}return i}}function ku(n){return n.span.end}function li(n){return n.index+":"+n.span.start}function UR(n){let e=[];for(let t of n){let r=[],i={span:t.span,entries:[t]};for(let s of e)th(s.span,i.span)?i={entries:s.entries.concat(i.entries),span:BR(s.span,i.span)}:r.push(s);r.push(i),e=r}return e}function BR(n,e){return{start:Math.min(n.start,e.start),end:Math.max(n.end,e.end)}}function th(n,e){let t=Math.max(n.start,e.start),r=Math.min(n.end,e.end);return t<r?{start:t,end:r}:null}function jc(n,e,t){n.splice(e,0,t)}function xu(n,e,t){let r=0,i=n.length;if(!i||e<t(n[r]))return[0,0];if(e>t(n[i-1]))return[i,0];for(;r<i;){let s=Math.floor(r+(i-r)/2),o=t(n[s]);if(e<o)i=s;else if(e>o)r=s+1;else return[s,1]}return[r,0]}class HR{constructor(e,t){this.emitter=new Xl}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const nh={};function jR(n,e){return!n||e>10?Xe({weekday:"short"}):e>1?Xe({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Xe({weekday:"long"})}const Dy="fc-col-header-cell";function ky(n){return n.text}class zR extends He{render(){let{dateEnv:e,options:t,theme:r,viewApi:i}=this.context,{props:s}=this,{date:o,dateProfile:l}=s,u=Sy(o,s.todayRange,null,l),h=[Dy].concat(Jd(u,r)),g=e.format(o,s.dayHeaderFormat),b=!u.isDisabled&&s.colCnt>1?wl(this.context,o):{},w=e.toDate(o);e.namedTimeZoneImpl&&(w=Lr(w,36e5));let A=Object.assign(Object.assign(Object.assign({date:w,view:i},s.extraRenderProps),{text:g}),u);return M($t,{elTag:"th",elClasses:h,elAttrs:Object.assign({role:"columnheader",colSpan:s.colSpan,"data-date":u.isDisabled?void 0:Fd(o)},s.extraDataAttrs),renderProps:A,generatorName:"dayHeaderContent",customGenerator:t.dayHeaderContent,defaultGenerator:ky,classNameGenerator:t.dayHeaderClassNames,didMount:t.dayHeaderDidMount,willUnmount:t.dayHeaderWillUnmount},C=>M("div",{className:"fc-scrollgrid-sync-inner"},!u.isDisabled&&M(C,{elTag:"a",elAttrs:b,elClasses:["fc-col-header-cell-cushion",s.isSticky&&"fc-sticky"]})))}}const WR=Xe({weekday:"long"});class qR extends He{render(){let{props:e}=this,{dateEnv:t,theme:r,viewApi:i,options:s}=this.context,o=At(new Date(2592e5),e.dow),l={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},u=t.format(o,e.dayHeaderFormat),h=Object.assign(Object.assign(Object.assign(Object.assign({date:o},l),{view:i}),e.extraRenderProps),{text:u});return M($t,{elTag:"th",elClasses:[Dy,...Jd(l,r),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:h,generatorName:"dayHeaderContent",customGenerator:s.dayHeaderContent,defaultGenerator:ky,classNameGenerator:s.dayHeaderClassNames,didMount:s.dayHeaderDidMount,willUnmount:s.dayHeaderWillUnmount},g=>M("div",{className:"fc-scrollgrid-sync-inner"},M(g,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":t.format(o,WR)}})))}}class xy extends He{constructor(){super(...arguments),this.createDayHeaderFormatter=ge($R)}render(){let{context:e}=this,{dates:t,dateProfile:r,datesRepDistinctDays:i,renderIntro:s}=this.props,o=this.createDayHeaderFormatter(e.options.dayHeaderFormat,i,t.length);return M(xs,{unit:"day"},(l,u)=>M("tr",{role:"row"},s&&s("day"),t.map(h=>i?M(zR,{key:h.toISOString(),date:h,dateProfile:r,todayRange:u,colCnt:t.length,dayHeaderFormat:o}):M(qR,{key:h.getUTCDay(),dow:h.getUTCDay(),dayHeaderFormat:o}))))}}function $R(n,e,t){return n||jR(e,t)}class Py{constructor(e,t){let r=e.start,{end:i}=e,s=[],o=[],l=-1;for(;r<i;)t.isHiddenDay(r)?s.push(l+.5):(l+=1,s.push(l),o.push(r)),r=At(r,1);this.dates=o,this.indices=s,this.cnt=o.length}sliceRange(e){let t=this.getDateDayIndex(e.start),r=this.getDateDayIndex(At(e.end,-1)),i=Math.max(0,t),s=Math.min(this.cnt-1,r);return i=Math.ceil(i),s=Math.floor(s),i<=s?{firstIndex:i,lastIndex:s,isStart:t===i,isEnd:r===s}:null}getDateDayIndex(e){let{indices:t}=this,r=Math.floor(bi(this.dates[0],e));return r<0?t[0]-1:r>=t.length?t[t.length-1]+1:t[r]}}class Ny{constructor(e,t){let{dates:r}=e,i,s,o;if(t){for(s=r[0].getUTCDay(),i=1;i<r.length&&r[i].getUTCDay()!==s;i+=1);o=Math.ceil(r.length/i)}else o=1,i=r.length;this.rowCnt=o,this.colCnt=i,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let t=0;t<this.rowCnt;t+=1){let r=[];for(let i=0;i<this.colCnt;i+=1)r.push(this.buildCell(t,i));e.push(r)}return e}buildCell(e,t){let r=this.daySeries.dates[e*this.colCnt+t];return{key:r.toISOString(),date:r}}buildHeaderDates(){let e=[];for(let t=0;t<this.colCnt;t+=1)e.push(this.cells[0][t].date);return e}sliceRange(e){let{colCnt:t}=this,r=this.daySeries.sliceRange(e),i=[];if(r){let{firstIndex:s,lastIndex:o}=r,l=s;for(;l<=o;){let u=Math.floor(l/t),h=Math.min((u+1)*t,o+1);i.push({row:u,firstCol:l%t,lastCol:(h-1)%t,isStart:r.isStart&&l===s,isEnd:r.isEnd&&h-1===o}),l=h}}return i}}class My{constructor(){this.sliceBusinessHours=ge(this._sliceBusinessHours),this.sliceDateSelection=ge(this._sliceDateSpan),this.sliceEventStore=ge(this._sliceEventStore),this.sliceEventDrag=ge(this._sliceInteraction),this.sliceEventResize=ge(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,t,r,i,...s){let{eventUiBases:o}=e,l=this.sliceEventStore(e.eventStore,o,t,r,...s);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,t,r,o,i,...s),businessHourSegs:this.sliceBusinessHours(e.businessHours,t,r,i,...s),fgEventSegs:l.fg,bgEventSegs:l.bg,eventDrag:this.sliceEventDrag(e.eventDrag,o,t,r,...s),eventResize:this.sliceEventResize(e.eventResize,o,t,r,...s),eventSelection:e.eventSelection}}sliceNowDate(e,t,r,i,...s){return this._sliceDateSpan({range:{start:e,end:Lr(e,1)},allDay:!1},t,r,{},i,...s)}_sliceBusinessHours(e,t,r,i,...s){return e?this._sliceEventStore(vi(e,Ta(t,!!r),i),{},t,r,...s).bg:[]}_sliceEventStore(e,t,r,i,...s){if(e){let o=kp(e,t,Ta(r,!!i),i);return{bg:this.sliceEventRanges(o.bg,s),fg:this.sliceEventRanges(o.fg,s)}}return{bg:[],fg:[]}}_sliceInteraction(e,t,r,i,...s){if(!e)return null;let o=kp(e.mutatedEvents,t,Ta(r,!!i),i);return{segs:this.sliceEventRanges(o.fg,s),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,t,r,i,s,...o){if(!e)return[];let l=Ta(t,!!r),u=mi(e.range,l);if(u){e=Object.assign(Object.assign({},e),{range:u});let h=pR(e,i,s),g=this.sliceRange(e.range,...o);for(let b of g)b.eventRange=h;return g}return[]}sliceEventRanges(e,t){let r=[];for(let i of e)r.push(...this.sliceEventRange(i,t));return r}sliceEventRange(e,t){let r=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(r={start:r.start,end:At(r.start,1)});let i=this.sliceRange(r,...t);for(let s of i)s.eventRange=e,s.isStart=e.isStart&&s.isStart,s.isEnd=e.isEnd&&s.isEnd;return i}}function Ta(n,e){let t=n.activeRange;return e?t:{start:Lr(t.start,n.slotMinTime.milliseconds),end:Lr(t.end,n.slotMaxTime.milliseconds-864e5)}}function Oy(n,e,t){let{instances:r}=n.mutatedEvents;for(let i in r)if(!Yl(e.validRange,r[i].range))return!1;return Vy({eventDrag:n},t)}function GR(n,e,t){return Yl(e.validRange,n.range)?Vy({dateSelection:n},t):!1}function Vy(n,e){let t=e.getCurrentData(),r=Object.assign({businessHours:t.businessHours,dateSelection:"",eventStore:t.eventStore,eventUiBases:t.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},n);return(e.pluginHooks.isPropsValid||QR)(r,e)}function QR(n,e,t={},r){return!(n.eventDrag&&!YR(n,e,t,r)||n.dateSelection&&!KR(n,e,t,r))}function YR(n,e,t,r){let i=e.getCurrentData(),s=n.eventDrag,o=s.mutatedEvents,l=o.defs,u=o.instances,h=bl(l,s.isEvent?n.eventUiBases:{"":i.selectionConfig});r&&(h=tr(h,r));let g=$0(n.eventStore,s.affectedEvents.instances),b=g.defs,w=g.instances,A=bl(b,n.eventUiBases);for(let C in u){let P=u[C],O=P.range,U=h[P.defId],X=l[P.defId];if(!Ly(U.constraints,O,g,n.businessHours,e))return!1;let{eventOverlap:te}=e.options,ie=typeof te=="function"?te:null;for(let de in w){let f=w[de];if(Wd(O,f.range)&&(A[f.defId].overlap===!1&&s.isEvent||U.overlap===!1||ie&&!ie(new Ke(e,b[f.defId],f),new Ke(e,X,P))))return!1}let Se=i.eventStore;for(let de of U.allows){let f=Object.assign(Object.assign({},t),{range:P.range,allDay:X.allDay}),R=Se.defs[X.defId],k=Se.instances[C],L;if(R?L=new Ke(e,R,k):L=new Ke(e,X),!de(Yd(f,e),L))return!1}}return!0}function KR(n,e,t,r){let i=n.eventStore,s=i.defs,o=i.instances,l=n.dateSelection,u=l.range,{selectionConfig:h}=e.getCurrentData();if(r&&(h=r(h)),!Ly(h.constraints,u,i,n.businessHours,e))return!1;let{selectOverlap:g}=e.options,b=typeof g=="function"?g:null;for(let w in o){let A=o[w];if(Wd(u,A.range)&&(h.overlap===!1||b&&!b(new Ke(e,s[A.defId],A),null)))return!1}for(let w of h.allows){let A=Object.assign(Object.assign({},t),l);if(!w(Yd(A,e),null))return!1}return!0}function Ly(n,e,t,r,i){for(let s of n)if(!JR(XR(s,e,t,r,i),e))return!1;return!0}function XR(n,e,t,r,i){return n==="businessHours"?zc(vi(r,e,i)):typeof n=="string"?zc(Kl(t,s=>s.groupId===n)):typeof n=="object"&&n?zc(vi(n,e,i)):[]}function zc(n){let{instances:e}=n,t=[];for(let r in e)t.push(e[r].range);return t}function JR(n,e){for(let t of n)if(Yl(t,e))return!0;return!1}const Aa=/^(visible|hidden)$/;class ZR extends He{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,nr(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:t,liquidIsAbsolute:r}=e,i=t&&r,s=["fc-scroller"];return t&&(r?s.push("fc-scroller-liquid-absolute"):s.push("fc-scroller-liquid")),M("div",{ref:this.handleEl,className:s.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:i&&-(e.overcomeLeft||0)||"",right:i&&-(e.overcomeRight||0)||"",bottom:i&&-(e.overcomeBottom||0)||"",marginLeft:!i&&-(e.overcomeLeft||0)||"",marginRight:!i&&-(e.overcomeRight||0)||"",marginBottom:!i&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(Aa.test(this.props.overflowX))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().width>t)return!0;return!1}needsYScrolling(){if(Aa.test(this.props.overflowY))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().height>t)return!0;return!1}getXScrollbarWidth(){return Aa.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Aa.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class Gn{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(t,r)=>{let{depths:i,currentMap:s}=this,o=!1,l=!1;t!==null?(o=r in s,s[r]=t,i[r]=(i[r]||0)+1,l=!0):(i[r]-=1,i[r]||(delete s[r],delete this.callbackMap[r],o=!0)),this.masterCallback&&(o&&this.masterCallback(null,String(r)),l&&this.masterCallback(t,String(r)))}}createRef(e){let t=this.callbackMap[e];return t||(t=this.callbackMap[e]=r=>{this.handleValue(r,String(e))}),t}collect(e,t,r){return d0(this.currentMap,e,t,r)}getAll(){return jd(this.currentMap)}}function eD(n){let e=uC(n,".fc-scrollgrid-shrink"),t=0;for(let r of e)t=Math.max(t,AC(r));return Math.ceil(t)}function Fy(n,e){return n.liquid&&e.liquid}function tD(n,e){return e.maxHeight!=null||Fy(n,e)}function nD(n,e,t,r){let{expandRows:i}=t;return typeof e.content=="function"?e.content(t):M("table",{role:"presentation",className:[e.tableClassName,n.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:t.tableMinWidth,width:t.clientWidth,height:i?t.clientHeight:""}},t.tableColGroupNode,M(r?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(t):e.rowContent))}function rD(n,e){return Vr(n,e,kn)}function iD(n,e){let t=[];for(let r of n){let i=r.span||1;for(let s=0;s<i;s+=1)t.push(M("col",{style:{width:r.width==="shrink"?sD(e):r.width||"",minWidth:r.minWidth||""}}))}return M("colgroup",{},...t)}function sD(n){return n??4}function oD(n){for(let e of n)if(e.width==="shrink")return!0;return!1}function aD(n,e){let t=["fc-scrollgrid",e.theme.getClass("table")];return n&&t.push("fc-scrollgrid-liquid"),t}function lD(n,e){let t=["fc-scrollgrid-section",`fc-scrollgrid-section-${n.type}`,n.className];return e&&n.liquid&&n.maxHeight==null&&t.push("fc-scrollgrid-section-liquid"),n.isSticky&&t.push("fc-scrollgrid-section-sticky"),t}function Pu(n){return M("div",{className:"fc-scrollgrid-sticky-shim",style:{width:n.clientWidth,minWidth:n.tableMinWidth}})}function Tl(n){let{stickyHeaderDates:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}function Uy(n){let{stickyFooterScrollbar:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}class rh extends He{constructor(){super(...arguments),this.processCols=ge(e=>e,rD),this.renderMicroColGroup=ge(iD),this.scrollerRefs=new Gn,this.scrollerElRefs=new Gn(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:t,context:r}=this,i=e.sections||[],s=this.processCols(e.cols),o=this.renderMicroColGroup(s,t.shrinkWidth),l=aD(e.liquid,r);e.collapsibleWidth&&l.push("fc-scrollgrid-collapsible");let u=i.length,h=0,g,b=[],w=[],A=[];for(;h<u&&(g=i[h]).type==="header";)b.push(this.renderSection(g,o,!0)),h+=1;for(;h<u&&(g=i[h]).type==="body";)w.push(this.renderSection(g,o,!1)),h+=1;for(;h<u&&(g=i[h]).type==="footer";)A.push(this.renderSection(g,o,!0)),h+=1;let C=!Ty();const P={role:"rowgroup"};return M("table",{role:"grid",className:l.join(" "),style:{height:e.height}},!!(!C&&b.length)&&M("thead",P,...b),!!(!C&&w.length)&&M("tbody",P,...w),!!(!C&&A.length)&&M("tfoot",P,...A),C&&M("tbody",P,...b,...w,...A))}renderSection(e,t,r){return"outerContent"in e?M(qe,{key:e.key},e.outerContent):M("tr",{key:e.key,role:"presentation",className:lD(e,this.props.liquid).join(" ")},this.renderChunkTd(e,t,e.chunk,r))}renderChunkTd(e,t,r,i){if("outerContent"in r)return r.outerContent;let{props:s}=this,{forceYScrollbars:o,scrollerClientWidths:l,scrollerClientHeights:u}=this.state,h=tD(s,e),g=Fy(s,e),b=s.liquid?o?"scroll":h?"auto":"hidden":"visible",w=e.key,A=nD(e,r,{tableColGroupNode:t,tableMinWidth:"",clientWidth:!s.collapsibleWidth&&l[w]!==void 0?l[w]:null,clientHeight:u[w]!==void 0?u[w]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},i);return M(i?"th":"td",{ref:r.elRef,role:"presentation"},M("div",{className:`fc-scroller-harness${g?" fc-scroller-harness-liquid":""}`},M(ZR,{ref:this.scrollerRefs.createRef(w),elRef:this.scrollerElRefs.createRef(w),overflowY:b,overflowX:s.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:g,liquidIsAbsolute:!0},A)))}_handleScrollerEl(e,t){let r=cD(this.props.sections,t);r&&nr(r.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return oD(this.props.cols)?eD(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=PR(),{scrollerRefs:t,scrollerElRefs:r}=this,i=!1,s={},o={};for(let l in t.currentMap){let u=t.currentMap[l];if(u&&u.needsYScrolling()){i=!0;break}}for(let l of this.props.sections){let u=l.key,h=r.currentMap[u];if(h){let g=h.parentNode;s[u]=Math.floor(g.getBoundingClientRect().width-(i?e.y:0)),o[u]=Math.floor(g.getBoundingClientRect().height)}}return{forceYScrollbars:i,scrollerClientWidths:s,scrollerClientHeights:o}}}rh.addStateEquality({scrollerClientWidths:kn,scrollerClientHeights:kn});function cD(n,e){for(let t of n)if(t.key===e)return t;return null}class ih extends He{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,e&&xp(e,this.props.seg)}}render(){const{props:e,context:t}=this,{options:r}=t,{seg:i}=e,{eventRange:s}=i,{ui:o}=s,l={event:new Ke(t,s.def,s.instance),view:t.viewApi,timeText:e.timeText,textColor:o.textColor,backgroundColor:o.backgroundColor,borderColor:o.borderColor,isDraggable:!e.disableDragging&&iR(i,t),isStartResizable:!e.disableResizing&&sR(i,t),isEndResizable:!e.disableResizing&&oR(i),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!i.isStart,isEnd:!!i.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return M($t,Object.assign({},e,{elRef:this.handleEl,elClasses:[...aR(l),...i.eventRange.ui.classNames,...e.elClasses||[]],renderProps:l,generatorName:"eventContent",customGenerator:r.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.eventClassNames,didMount:r.eventDidMount,willUnmount:r.eventWillUnmount}))}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&xp(this.el,this.props.seg)}}class By extends He{render(){let{props:e,context:t}=this,{options:r}=t,{seg:i}=e,{ui:s}=i.eventRange,o=r.eventTimeFormat||e.defaultTimeFormat,l=yy(i,o,t,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return M(ih,Object.assign({},e,{elTag:"a",elStyle:{borderColor:s.borderColor,backgroundColor:s.backgroundColor},elAttrs:Ey(i,t),defaultGenerator:uD,timeText:l}),(u,h)=>M(qe,null,M(u,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:h.textColor}}),!!h.isStartResizable&&M("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!h.isEndResizable&&M("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}function uD(n){return M("div",{className:"fc-event-main-frame"},n.timeText&&M("div",{className:"fc-event-time"},n.timeText),M("div",{className:"fc-event-title-container"},M("div",{className:"fc-event-title fc-sticky"},n.event.title||M(qe,null,"Â "))))}const sh=n=>M(sr.Consumer,null,e=>{let{options:t}=e,r={isAxis:n.isAxis,date:e.dateEnv.toDate(n.date),view:e.viewApi};return M($t,Object.assign({},n,{elTag:n.elTag||"div",renderProps:r,generatorName:"nowIndicatorContent",customGenerator:t.nowIndicatorContent,classNameGenerator:t.nowIndicatorClassNames,didMount:t.nowIndicatorDidMount,willUnmount:t.nowIndicatorWillUnmount}))}),dD=Xe({day:"numeric"});class oh extends He{constructor(){super(...arguments),this.refineRenderProps=Ha(hD)}render(){let{props:e,context:t}=this,{options:r}=t,i=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:t.viewApi,dateEnv:t.dateEnv,monthStartFormat:r.monthStartFormat});return M($t,Object.assign({},e,{elClasses:[...Jd(i,t.theme),...e.elClasses||[]],elAttrs:Object.assign(Object.assign({},e.elAttrs),i.isDisabled?{}:{"data-date":Fd(e.date)}),renderProps:i,generatorName:"dayCellContent",customGenerator:r.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.isDisabled?void 0:r.dayCellClassNames,didMount:r.dayCellDidMount,willUnmount:r.dayCellWillUnmount}))}}function ah(n){return!!(n.dayCellContent||Iu("dayCellContent",n))}function hD(n){let{date:e,dateEnv:t,dateProfile:r,isMonthStart:i}=n,s=Sy(e,n.todayRange,null,r),o=n.showDayNumber?t.format(e,i?n.monthStartFormat:dD):"";return Object.assign(Object.assign(Object.assign({date:t.toDate(e),view:n.viewApi},s),{isMonthStart:i,dayNumberText:o}),n.extraRenderProps)}class Hy extends He{render(){let{props:e}=this,{seg:t}=e;return M(ih,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:t.eventRange.ui.backgroundColor},defaultGenerator:fD,seg:t,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function fD(n){let{title:e}=n.event;return e&&M("div",{className:"fc-event-title"},n.event.title)}function jy(n){return M("div",{className:`fc-${n}`})}const zy=n=>M(sr.Consumer,null,e=>{let{dateEnv:t,options:r}=e,{date:i}=n,s=r.weekNumberFormat||n.defaultFormat,o=t.computeWeekNumber(i),l=t.format(i,s);return M($t,Object.assign({},n,{renderProps:{num:o,text:l,date:i},generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:pD,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount}))});function pD(n){return n.text}const Wc=10;class gD extends He{constructor(){super(...arguments),this.state={titleId:Gl()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&nr(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const t=qv(e);this.rootEl.contains(t)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:t}=this.context,{props:r,state:i}=this,s=["fc-popover",e.getClass("popover")].concat(r.extraClassNames||[]);return KI(M("div",Object.assign({},r.extraAttrs,{id:r.id,className:s.join(" "),"aria-labelledby":i.titleId,ref:this.handleRootEl}),M("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},M("span",{className:"fc-popover-title",id:i.titleId},r.title),M("span",{className:"fc-popover-close "+e.getIconClass("close"),title:t.closeHint,onClick:this.handleCloseClick})),M("div",{className:"fc-popover-body "+e.getClass("popoverContent")},r.children)),r.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:t,alignGridTop:r}=this.props,{rootEl:i}=this,s=VR(t);if(s){let o=i.getBoundingClientRect(),l=r?Tt(t,".fc-scrollgrid").getBoundingClientRect().top:s.top,u=e?s.right-o.width:s.left;l=Math.max(l,Wc),u=Math.min(u,document.documentElement.clientWidth-Wc-o.width),u=Math.max(u,Wc);let h=i.offsetParent.getBoundingClientRect();uo(i,{top:l-h.top,left:u-h.left})}}}class mD extends Pn{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:t}=this.context,{props:r}=this,{startDate:i,todayRange:s,dateProfile:o}=r,l=t.format(i,e.dayPopoverFormat);return M(oh,{elRef:this.handleRootEl,date:i,dateProfile:o,todayRange:s},(u,h,g)=>M(gD,{elRef:g.ref,id:r.id,title:l,extraClassNames:["fc-more-popover"].concat(g.className||[]),extraAttrs:g,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},ah(e)&&M(u,{elTag:"div",elClasses:["fc-more-popover-misc"]}),r.children))}queryHit(e,t,r,i){let{rootEl:s,props:o}=this;return e>=0&&e<r&&t>=0&&t<i?{dateProfile:o.dateProfile,dateSpan:Object.assign({allDay:!o.forceTimed,range:{start:o.startDate,end:o.endDate}},o.extraDateSpan),dayEl:s,rect:{left:0,top:0,right:r,bottom:i},layer:1}:null}}class Wy extends He{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Gl()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&nr(this.props.elRef,e)},this.handleClick=e=>{let{props:t,context:r}=this,{moreLinkClick:i}=r.options,s=Np(t).start;function o(l){let{def:u,instance:h,range:g}=l.eventRange;return{event:new Ke(r,u,h),start:r.dateEnv.toDate(g.start),end:r.dateEnv.toDate(g.end),isStart:l.isStart,isEnd:l.isEnd}}typeof i=="function"&&(i=i({date:s,allDay:!!t.allDayDate,allSegs:t.allSegs.map(o),hiddenSegs:t.hiddenSegs.map(o),jsEvent:e,view:r.viewApi})),!i||i==="popover"?this.setState({isPopoverOpen:!0}):typeof i=="string"&&r.calendarApi.zoomTo(s,i)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:t}=this;return M(sr.Consumer,null,r=>{let{viewApi:i,options:s,calendarApi:o}=r,{moreLinkText:l}=s,{moreCnt:u}=e,h=Np(e),g=typeof l=="function"?l.call(o,u):`+${u} ${l}`,b=ho(s.moreLinkHint,[u],g),w={num:u,shortText:`+${u}`,text:g,view:i};return M(qe,null,!!e.moreCnt&&M($t,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),Gv(this.handleClick)),{title:b,"aria-expanded":t.isPopoverOpen,"aria-controls":t.isPopoverOpen?t.popoverId:""}),renderProps:w,generatorName:"moreLinkContent",customGenerator:s.moreLinkContent,defaultGenerator:e.defaultGenerator||vD,classNameGenerator:s.moreLinkClassNames,didMount:s.moreLinkDidMount,willUnmount:s.moreLinkWillUnmount},e.children),t.isPopoverOpen&&M(mD,{id:t.popoverId,startDate:h.start,endDate:h.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Tt(this.linkEl,".fc-view-harness"))}}function vD(n){return n.text}function Np(n){if(n.allDayDate)return{start:n.allDayDate,end:At(n.allDayDate,1)};let{hiddenSegs:e}=n;return{start:qy(e),end:_D(e)}}function qy(n){return n.reduce(yD).eventRange.range.start}function yD(n,e){return n.eventRange.range.start<e.eventRange.range.start?n:e}function _D(n){return n.reduce(ED).eventRange.range.end}function ED(n,e){return n.eventRange.range.end>e.eventRange.range.end?n:e}const bD=[],$y={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},Gy=Object.assign(Object.assign({},$y),{buttonHints:{prev:"Previous $0",next:"Next $0",today(n,e){return e==="day"?"Today":`This ${n}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(n){return`Show ${n} more event${n===1?"":"s"}`}});function wD(n){let e=n.length>0?n[0].code:"en",t=bD.concat(n),r={en:Gy};for(let i of t)r[i.code]=i;return{map:r,defaultCode:e}}function Qy(n,e){return typeof n=="object"&&!Array.isArray(n)?Yy(n.code,[n.code],n):TD(n,e)}function TD(n,e){let t=[].concat(n||[]),r=AD(t,e)||Gy;return Yy(n,t,r)}function AD(n,e){for(let t=0;t<n.length;t+=1){let r=n[t].toLocaleLowerCase().split("-");for(let i=r.length;i>0;i-=1){let s=r.slice(0,i).join("-");if(e[s])return e[s]}}return null}function Yy(n,e,t){let r=Hd([$y,t],["buttonText"]);delete r.code;let{week:i}=r;return delete r.week,{codeArg:n,codes:e,week:i,simpleNumberFormat:new Intl.NumberFormat(n),options:r}}function or(n){return{id:Ei(),name:n.name,premiumReleaseDate:n.premiumReleaseDate?new Date(n.premiumReleaseDate):void 0,deps:n.deps||[],reducers:n.reducers||[],isLoadingFuncs:n.isLoadingFuncs||[],contextInit:[].concat(n.contextInit||[]),eventRefiners:n.eventRefiners||{},eventDefMemberAdders:n.eventDefMemberAdders||[],eventSourceRefiners:n.eventSourceRefiners||{},isDraggableTransformers:n.isDraggableTransformers||[],eventDragMutationMassagers:n.eventDragMutationMassagers||[],eventDefMutationAppliers:n.eventDefMutationAppliers||[],dateSelectionTransformers:n.dateSelectionTransformers||[],datePointTransforms:n.datePointTransforms||[],dateSpanTransforms:n.dateSpanTransforms||[],views:n.views||{},viewPropsTransformers:n.viewPropsTransformers||[],isPropsValid:n.isPropsValid||null,externalDefTransforms:n.externalDefTransforms||[],viewContainerAppends:n.viewContainerAppends||[],eventDropTransformers:n.eventDropTransformers||[],componentInteractions:n.componentInteractions||[],calendarInteractions:n.calendarInteractions||[],themeClasses:n.themeClasses||{},eventSourceDefs:n.eventSourceDefs||[],cmdFormatter:n.cmdFormatter,recurringTypes:n.recurringTypes||[],namedTimeZonedImpl:n.namedTimeZonedImpl,initialView:n.initialView||"",elementDraggingImpl:n.elementDraggingImpl,optionChangeHandlers:n.optionChangeHandlers||{},scrollGridImpl:n.scrollGridImpl||null,listenerRefiners:n.listenerRefiners||{},optionRefiners:n.optionRefiners||{},propSetHandlers:n.propSetHandlers||{}}}function SD(n,e){let t={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function i(s){for(let o of s){const l=o.name,u=t[l];u===void 0?(t[l]=o.id,i(o.deps),r=CD(r,o)):u!==o.id&&console.warn(`Duplicate plugin '${l}'`)}}return n&&i(n),i(e),r}function ID(){let n=[],e=[],t;return(r,i)=>((!t||!Vr(r,n)||!Vr(i,e))&&(t=SD(r,i)),n=r,e=i,t)}function CD(n,e){return{premiumReleaseDate:RD(n.premiumReleaseDate,e.premiumReleaseDate),reducers:n.reducers.concat(e.reducers),isLoadingFuncs:n.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:n.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},n.eventRefiners),e.eventRefiners),eventDefMemberAdders:n.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},n.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:n.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:n.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:n.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:n.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:n.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:n.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},n.views),e.views),viewPropsTransformers:n.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||n.isPropsValid,externalDefTransforms:n.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:n.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:n.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:n.calendarInteractions.concat(e.calendarInteractions),componentInteractions:n.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},n.themeClasses),e.themeClasses),eventSourceDefs:n.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||n.cmdFormatter,recurringTypes:n.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||n.namedTimeZonedImpl,initialView:n.initialView||e.initialView,elementDraggingImpl:n.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},n.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||n.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},n.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},n.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},n.propSetHandlers),e.propSetHandlers)}}function RD(n,e){return n===void 0?e:e===void 0?n:new Date(Math.max(n.valueOf(),e.valueOf()))}class Hr extends Uo{}Hr.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};Hr.prototype.baseIconClass="fc-icon";Hr.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};Hr.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};Hr.prototype.iconOverrideOption="buttonIcons";Hr.prototype.iconOverrideCustomButtonOption="icon";Hr.prototype.iconOverridePrefix="fc-icon-";function DD(n,e){let t={},r;for(r in n)Nu(r,t,n,e);for(r in e)Nu(r,t,n,e);return t}function Nu(n,e,t,r){if(e[n])return e[n];let i=kD(n,e,t,r);return i&&(e[n]=i),i}function kD(n,e,t,r){let i=t[n],s=r[n],o=g=>i&&i[g]!==null?i[g]:s&&s[g]!==null?s[g]:null,l=o("component"),u=o("superType"),h=null;if(u){if(u===n)throw new Error("Can't have a custom view type that references itself");h=Nu(u,e,t,r)}return!l&&h&&(l=h.component),l?{type:n,component:l,defaults:Object.assign(Object.assign({},h?h.defaults:{}),i?i.rawOptions:{}),overrides:Object.assign(Object.assign({},h?h.overrides:{}),s?s.rawOptions:{})}:null}function Mp(n){return tr(n,xD)}function xD(n){let e=typeof n=="function"?{component:n}:n,{component:t}=e;return e.content?t=Op(e):t&&!(t.prototype instanceof He)&&(t=Op(Object.assign(Object.assign({},e),{content:t}))),{superType:e.type,component:t,rawOptions:e}}function Op(n){return e=>M(sr.Consumer,null,t=>M($t,{elTag:"div",elClasses:ny(t.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:t.options.nextDayThreshold}),generatorName:void 0,customGenerator:n.content,classNameGenerator:n.classNames,didMount:n.didMount,willUnmount:n.willUnmount}))}function PD(n,e,t,r){let i=Mp(n),s=Mp(e.views),o=DD(i,s);return tr(o,l=>ND(l,s,e,t,r))}function ND(n,e,t,r,i){let s=n.overrides.duration||n.defaults.duration||r.duration||t.duration,o=null,l="",u="",h={};if(s&&(o=MD(s),o)){let w=Au(o);l=w.unit,w.value===1&&(u=l,h=e[l]?e[l].rawOptions:{})}let g=w=>{let A=w.buttonText||{},C=n.defaults.buttonTextKey;return C!=null&&A[C]!=null?A[C]:A[n.type]!=null?A[n.type]:A[u]!=null?A[u]:null},b=w=>{let A=w.buttonHints||{},C=n.defaults.buttonTextKey;return C!=null&&A[C]!=null?A[C]:A[n.type]!=null?A[n.type]:A[u]!=null?A[u]:null};return{type:n.type,component:n.component,duration:o,durationUnit:l,singleUnit:u,optionDefaults:n.defaults,optionOverrides:Object.assign(Object.assign({},h),n.overrides),buttonTextOverride:g(r)||g(t)||n.overrides.buttonText,buttonTextDefault:g(i)||n.defaults.buttonText||g(fo)||n.type,buttonTitleOverride:b(r)||b(t)||n.overrides.buttonHint,buttonTitleDefault:b(i)||n.defaults.buttonHint||b(fo)}}let Vp={};function MD(n){let e=JSON.stringify(n),t=Vp[e];return t===void 0&&(t=Ve(n),Vp[e]=t),t}function OD(n,e){switch(e.type){case"CHANGE_VIEW_TYPE":n=e.viewType}return n}function VD(n,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return n}}function LD(n,e,t){let r=n.initialDate;return r!=null?e.createMarker(r):t.getDateMarker()}function FD(n,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},n),{[e.optionName]:e.rawOptionValue});default:return n}}function UD(n,e,t,r){let i;switch(e.type){case"CHANGE_VIEW_TYPE":return r.build(e.dateMarker||t);case"CHANGE_DATE":return r.build(e.dateMarker);case"PREV":if(i=r.buildPrev(n,t),i.isValid)return i;break;case"NEXT":if(i=r.buildNext(n,t),i.isValid)return i;break}return n}function BD(n,e,t){let r=e?e.activeRange:null;return Xy({},GD(n,t),r,t)}function HD(n,e,t,r){let i=t?t.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return Xy(n,e.sources,i,r);case"REMOVE_EVENT_SOURCE":return zD(n,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return t?Jy(n,i,r):n;case"FETCH_EVENT_SOURCES":return lh(n,e.sourceIds?Xv(e.sourceIds):Zy(n,r),i,e.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return $D(n,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return n}}function jD(n,e,t){let r=e?e.activeRange:null;return lh(n,Zy(n,t),r,!0,t)}function Ky(n){for(let e in n)if(n[e].isFetching)return!0;return!1}function Xy(n,e,t,r){let i={};for(let s of e)i[s.sourceId]=s;return t&&(i=Jy(i,t,r)),Object.assign(Object.assign({},n),i)}function zD(n,e){return gi(n,t=>t.sourceId!==e)}function Jy(n,e,t){return lh(n,gi(n,r=>WD(r,e,t)),e,!1,t)}function WD(n,e,t){return e_(n,t)?!t.options.lazyFetching||!n.fetchRange||n.isFetching||e.start<n.fetchRange.start||e.end>n.fetchRange.end:!n.latestFetchId}function lh(n,e,t,r,i){let s={};for(let o in n){let l=n[o];e[o]?s[o]=qD(l,t,r,i):s[o]=l}return s}function qD(n,e,t,r){let{options:i,calendarApi:s}=r,o=r.pluginHooks.eventSourceDefs[n.sourceDefId],l=Ei();return o.fetch({eventSource:n,range:e,isRefetch:t,context:r},u=>{let{rawEvents:h}=u;i.eventSourceSuccess&&(h=i.eventSourceSuccess.call(s,h,u.response)||h),n.success&&(h=n.success.call(s,h,u.response)||h),r.dispatch({type:"RECEIVE_EVENTS",sourceId:n.sourceId,fetchId:l,fetchRange:e,rawEvents:h})},u=>{let h=!1;i.eventSourceFailure&&(i.eventSourceFailure.call(s,u),h=!0),n.failure&&(n.failure(u),h=!0),h||console.warn(u.message,u),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:n.sourceId,fetchId:l,fetchRange:e,error:u})}),Object.assign(Object.assign({},n),{isFetching:!0,latestFetchId:l})}function $D(n,e,t,r){let i=n[e];return i&&t===i.latestFetchId?Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},i),{isFetching:!1,fetchRange:r})}):n}function Zy(n,e){return gi(n,t=>e_(t,e))}function GD(n,e){let t=dy(e),r=[].concat(n.eventSources||[]),i=[];n.initialEvents&&r.unshift(n.initialEvents),n.events&&r.unshift(n.events);for(let s of r){let o=uy(s,e,t);o&&i.push(o)}return i}function e_(n,e){return!e.pluginHooks.eventSourceDefs[n.sourceDefId].ignoreRange}function QD(n,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return n}}function YD(n,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return n}}function KD(n,e){let t;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function XD(n,e){let t;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function JD(n,e,t,r,i){let s=n.headerToolbar?Lp(n.headerToolbar,n,e,t,r,i):null,o=n.footerToolbar?Lp(n.footerToolbar,n,e,t,r,i):null;return{header:s,footer:o}}function Lp(n,e,t,r,i,s){let o={},l=[],u=!1;for(let h in n){let g=n[h],b=ZD(g,e,t,r,i,s);o[h]=b.widgets,l.push(...b.viewsWithButtons),u=u||b.hasTitle}return{sectionWidgets:o,viewsWithButtons:l,hasTitle:u}}function ZD(n,e,t,r,i,s){let o=e.direction==="rtl",l=e.customButtons||{},u=t.buttonText||{},h=e.buttonText||{},g=t.buttonHints||{},b=e.buttonHints||{},w=n?n.split(" "):[],A=[],C=!1;return{widgets:w.map(O=>O.split(",").map(U=>{if(U==="title")return C=!0,{buttonName:U};let X,te,ie,Se,de,f;if(X=l[U])ie=R=>{X.click&&X.click.call(R.target,R,R.target)},(Se=r.getCustomButtonIconClass(X))||(Se=r.getIconClass(U,o))||(de=X.text),f=X.hint||X.text;else if(te=i[U]){A.push(U),ie=()=>{s.changeView(U)},(de=te.buttonTextOverride)||(Se=r.getIconClass(U,o))||(de=te.buttonTextDefault);let R=te.buttonTextOverride||te.buttonTextDefault;f=ho(te.buttonTitleOverride||te.buttonTitleDefault||e.viewHint,[R,U],R)}else if(s[U])if(ie=()=>{s[U]()},(de=u[U])||(Se=r.getIconClass(U,o))||(de=h[U]),U==="prevYear"||U==="nextYear"){let R=U==="prevYear"?"prev":"next";f=ho(g[R]||b[R],[h.year||"year","year"],h[U])}else f=R=>ho(g[U]||b[U],[h[R]||R,R],h[U]);return{buttonName:U,buttonClick:ie,buttonIcon:Se,buttonText:de,buttonHint:f}})),viewsWithButtons:A,hasTitle:C}}class ek{constructor(e,t,r){this.type=e,this.getCurrentData=t,this.dateEnv=r}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let tk={ignoreRange:!0,parseMeta(n){return Array.isArray(n.events)?n.events:null},fetch(n,e){e({rawEvents:n.eventSource.meta})}};const nk=or({name:"array-event-source",eventSourceDefs:[tk]});let rk={parseMeta(n){return typeof n.events=="function"?n.events:null},fetch(n,e,t){const{dateEnv:r}=n.context,i=n.eventSource.meta;gR(i.bind(null,by(n.range,r)),s=>e({rawEvents:s}),t)}};const ik=or({name:"func-event-source",eventSourceDefs:[rk]}),sk={method:String,extraParams:G,startParam:String,endParam:String,timeZoneParam:String};let ok={parseMeta(n){return n.url&&(n.format==="json"||!n.format)?{url:n.url,format:"json",method:(n.method||"GET").toUpperCase(),extraParams:n.extraParams,startParam:n.startParam,endParam:n.endParam,timeZoneParam:n.timeZoneParam}:null},fetch(n,e,t){const{meta:r}=n.eventSource,i=lk(r,n.range,n.context);mR(r.method,r.url,i).then(([s,o])=>{e({rawEvents:s,response:o})},t)}};const ak=or({name:"json-event-source",eventSourceRefiners:sk,eventSourceDefs:[ok]});function lk(n,e,t){let{dateEnv:r,options:i}=t,s,o,l,u,h={};return s=n.startParam,s==null&&(s=i.startParam),o=n.endParam,o==null&&(o=i.endParam),l=n.timeZoneParam,l==null&&(l=i.timeZoneParam),typeof n.extraParams=="function"?u=n.extraParams():u=n.extraParams||{},Object.assign(h,u),h[s]=r.formatIso(e.start),h[o]=r.formatIso(e.end),r.timeZone!=="local"&&(h[l]=r.timeZone),h}const ck={daysOfWeek:G,startTime:Ve,endTime:Ve,duration:Ve,startRecur:G,endRecur:G};let uk={parse(n,e){if(n.daysOfWeek||n.startTime||n.endTime||n.startRecur||n.endRecur){let t={daysOfWeek:n.daysOfWeek||null,startTime:n.startTime||null,endTime:n.endTime||null,startRecur:n.startRecur?e.createMarker(n.startRecur):null,endRecur:n.endRecur?e.createMarker(n.endRecur):null,dateEnv:e},r;return n.duration&&(r=n.duration),!r&&n.startTime&&n.endTime&&(r=RC(n.endTime,n.startTime)),{allDayGuess:!n.startTime&&!n.endTime,duration:r,typeData:t}}return null},expand(n,e,t){let r=mi(e,{start:n.startRecur,end:n.endRecur});return r?hk(n.daysOfWeek,n.startTime,n.dateEnv,t,r):[]}};const dk=or({name:"simple-recurring-event",recurringTypes:[uk],eventRefiners:ck});function hk(n,e,t,r,i){let s=n?Xv(n):null,o=$e(i.start),l=i.end,u=[];for(;o<l;){let h;(!s||s[o.getUTCDay()])&&(e?h=r.add(o,e):h=o,u.push(r.createMarker(t.toDate(h)))),o=At(o,1)}return u}const fk=or({name:"change-handler",optionChangeHandlers:{events(n,e){Fp([n],e)},eventSources:Fp}});function Fp(n,e){let t=jd(e.getCurrentData().eventSources);if(t.length===1&&n.length===1&&Array.isArray(t[0]._raw)&&Array.isArray(n[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:t[0].sourceId,rawEvents:n[0]});return}let r=[];for(let i of n){let s=!1;for(let o=0;o<t.length;o+=1)if(t[o]._raw===i){t.splice(o,1),s=!0;break}s||r.push(i)}for(let i of t)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:i.sourceId});for(let i of r)e.calendarApi.addEventSource(i)}function pk(n,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},by(n.activeRange,e.dateEnv)),{view:e.viewApi}))}function gk(n,e){let{emitter:t}=e;t.hasHandlers("eventsSet")&&t.trigger("eventsSet",ai(n,e))}const mk=[nk,ik,ak,dk,fk,or({name:"misc",isLoadingFuncs:[n=>Ky(n.eventSources)],propSetHandlers:{dateProfile:pk,eventStore:gk}})];class vk{constructor(e,t){this.runTaskOption=e,this.drainedOption=t,this.queue=[],this.delayedRunner=new Nd(this.drain.bind(this))}request(e,t){this.queue.push(e),this.delayedRunner.request(t)}pause(e){this.delayedRunner.pause(e)}resume(e,t){this.delayedRunner.resume(e,t)}drain(){let{queue:e}=this;for(;e.length;){let t=[],r;for(;r=e.shift();)this.runTask(r),t.push(r);this.drained(t)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function yk(n,e,t){let r;return/^(year|month)$/.test(n.currentRangeUnit)?r=n.currentRange:r=n.activeRange,t.formatRange(r.start,r.end,Xe(e.titleFormat||_k(n)),{isEndExclusive:n.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function _k(n){let{currentRangeUnit:e}=n;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let t=fl(n.currentRange.start,n.currentRange.end);return t!==null&&t>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class Up{constructor(){this.resetListeners=new Set}handleInput(e,t){const r=this.dateEnv;if(e!==r&&(typeof t=="function"?this.nowFn=t:r||(this.nowAnchorDate=e.toDate(t?e.createMarker(t):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,r))for(const i of this.resetListeners.values())i()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class Ek{constructor(e){this.computeCurrentViewData=ge(this._computeCurrentViewData),this.organizeRawLocales=ge(wD),this.buildLocale=ge(Qy),this.buildPluginHooks=ID(),this.buildDateEnv=ge(bk),this.buildTheme=ge(wk),this.parseToolbars=ge(JD),this.buildViewSpecs=ge(PD),this.buildDateProfileGenerator=Ha(Tk),this.buildViewApi=ge(Ak),this.buildViewUiProps=Ha(Ck),this.buildEventUiBySource=ge(Sk,kn),this.buildEventUiBases=ge(Ik),this.parseContextBusinessHours=Ha(Rk),this.buildTitle=ge(yk),this.nowManager=new Up,this.emitter=new Xl,this.actionRunner=new vk(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=w=>{this.actionRunner.request(w)},this.props=e,this.actionRunner.pause(),this.nowManager=new Up;let t={},r=this.computeOptionsData(e.optionOverrides,t,e.calendarApi),i=r.calendarOptions.initialView||r.pluginHooks.initialView,s=this.computeCurrentViewData(i,r,e.optionOverrides,t);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(s.options);let o={nowManager:this.nowManager,dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},l=LD(r.calendarOptions,r.dateEnv,this.nowManager),u=s.dateProfileGenerator.build(l);Kn(u.activeRange,l)||(l=u.currentRange.start);for(let w of r.pluginHooks.contextInit)w(o);let h=BD(r.calendarOptions,u,o),g={dynamicOptionOverrides:t,currentViewType:i,currentDate:l,dateProfile:u,businessHours:this.parseContextBusinessHours(o),eventSources:h,eventUiBases:{},eventStore:qt(),renderableEventStore:qt(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(o).selectionConfig},b=Object.assign(Object.assign({},o),g);for(let w of r.pluginHooks.reducers)Object.assign(g,w(null,null,b));qc(g,o)&&this.emitter.trigger("loading",!0),this.state=g,this.updateData(),this.actionRunner.resume()}resetOptions(e,t){let{props:r}=this;t===void 0?r.optionOverrides=e:(r.optionOverrides=Object.assign(Object.assign({},r.optionOverrides||{}),e),this.optionsForRefining.push(...t)),(t===void 0||t.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:t,state:r,emitter:i}=this,s=FD(r.dynamicOptionOverrides,e),o=this.computeOptionsData(t.optionOverrides,s,t.calendarApi),l=OD(r.currentViewType,e),u=this.computeCurrentViewData(l,o,t.optionOverrides,s);t.calendarApi.currentDataManager=this,i.setThisContext(t.calendarApi),i.setOptions(u.options);let h={nowManager:this.nowManager,dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:i,getCurrentData:this.getCurrentData},{currentDate:g,dateProfile:b}=r;this.data&&this.data.dateProfileGenerator!==u.dateProfileGenerator&&(b=u.dateProfileGenerator.build(g)),g=VD(g,e),b=UD(b,e,g,u.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!Kn(b.currentRange,g))&&(g=b.currentRange.start);let w=HD(r.eventSources,e,b,h),A=j0(r.eventStore,e,w,b,h),P=Ky(w)&&!u.options.progressiveEventRendering&&r.renderableEventStore||A,{eventUiSingleBase:O,selectionConfig:U}=this.buildViewUiProps(h),X=this.buildEventUiBySource(w),te=this.buildEventUiBases(P.defs,O,X),ie={dynamicOptionOverrides:s,currentViewType:l,currentDate:g,dateProfile:b,eventSources:w,eventStore:A,renderableEventStore:P,selectionConfig:U,eventUiBases:te,businessHours:this.parseContextBusinessHours(h),dateSelection:QD(r.dateSelection,e),eventSelection:YD(r.eventSelection,e),eventDrag:KD(r.eventDrag,e),eventResize:XD(r.eventResize,e)},Se=Object.assign(Object.assign({},h),ie);for(let R of o.pluginHooks.reducers)Object.assign(ie,R(r,e,Se));let de=qc(r,h),f=qc(ie,h);!de&&f?i.trigger("loading",!0):de&&!f&&i.trigger("loading",!1),this.state=ie,t.onAction&&t.onAction(e)}updateData(){let{props:e,state:t}=this,r=this.data,i=this.computeOptionsData(e.optionOverrides,t.dynamicOptionOverrides,e.calendarApi),s=this.computeCurrentViewData(t.currentViewType,i,e.optionOverrides,t.dynamicOptionOverrides),o=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(t.dateProfile,s.options,i.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},i),s),t),l=i.pluginHooks.optionChangeHandlers,u=r&&r.calendarOptions,h=i.calendarOptions;if(u&&u!==h){u.timeZone!==h.timeZone&&(t.eventSources=o.eventSources=jD(o.eventSources,t.dateProfile,o),t.eventStore=o.eventStore=Rp(o.eventStore,r.dateEnv,o.dateEnv),t.renderableEventStore=o.renderableEventStore=Rp(o.renderableEventStore,r.dateEnv,o.dateEnv));for(let g in l)(this.optionsForHandling.indexOf(g)!==-1||u[g]!==h[g])&&l[g](h[g],o)}this.optionsForHandling=[],e.onData&&e.onData(o)}computeOptionsData(e,t,r){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&t===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:i,pluginHooks:s,localeDefaults:o,availableLocaleData:l,extra:u}=this.processRawCalendarOptions(e,t);Bp(u);let h=this.buildDateEnv(i.timeZone,i.locale,i.weekNumberCalculation,i.firstDay,i.weekText,s,l,i.defaultRangeSeparator),g=this.buildViewSpecs(s.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,o),b=this.buildTheme(i,s),w=this.parseToolbars(i,this.stableOptionOverrides,b,g,r);return this.stableCalendarOptionsData={calendarOptions:i,pluginHooks:s,dateEnv:h,viewSpecs:g,theme:b,toolbarConfig:w,localeDefaults:o,availableRawLocales:l.map}}processRawCalendarOptions(e,t){let{locales:r,locale:i}=Vc([fo,e,t]),s=this.organizeRawLocales(r),o=s.map,l=this.buildLocale(i||s.defaultCode,o).options,u=this.buildPluginHooks(e.plugins||[],mk),h=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wp),Tp),Ap),u.listenerRefiners),u.optionRefiners),g={},b=Vc([fo,l,e,t]),w={},A=this.currentCalendarOptionsInput,C=this.currentCalendarOptionsRefined,P=!1;for(let O in b)this.optionsForRefining.indexOf(O)===-1&&(b[O]===A[O]||ri[O]&&O in A&&ri[O](A[O],b[O]))?w[O]=C[O]:h[O]?(w[O]=h[O](b[O]),P=!0):g[O]=A[O];return P&&(this.currentCalendarOptionsInput=b,this.currentCalendarOptionsRefined=w,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=t),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:u,availableLocaleData:s,localeDefaults:l,extra:g}}_computeCurrentViewData(e,t,r,i){let s=t.viewSpecs[e];if(!s)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:o,extra:l}=this.processRawViewOptions(s,t.pluginHooks,t.localeDefaults,r,i);Bp(l),this.nowManager.handleInput(t.dateEnv,o.now);let u=this.buildDateProfileGenerator({dateProfileGeneratorClass:s.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:s.duration,durationUnit:s.durationUnit,usesMinMaxTime:s.optionDefaults.usesMinMaxTime,dateEnv:t.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,fixedWeekCount:o.fixedWeekCount}),h=this.buildViewApi(e,this.getCurrentData,t.dateEnv);return{viewSpec:s,options:o,dateProfileGenerator:u,viewApi:h}}processRawViewOptions(e,t,r,i,s){let o=Vc([fo,e.optionDefaults,r,i,e.optionOverrides,s]),l=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wp),Tp),Ap),a0),t.listenerRefiners),t.optionRefiners),u={},h=this.currentViewOptionsInput,g=this.currentViewOptionsRefined,b=!1,w={};for(let A in o)o[A]===h[A]||ri[A]&&ri[A](o[A],h[A])?u[A]=g[A]:(o[A]===this.currentCalendarOptionsInput[A]||ri[A]&&ri[A](o[A],this.currentCalendarOptionsInput[A])?A in this.currentCalendarOptionsRefined&&(u[A]=this.currentCalendarOptionsRefined[A]):l[A]?u[A]=l[A](o[A]):w[A]=o[A],b=!0);return b&&(this.currentViewOptionsInput=o,this.currentViewOptionsRefined=u),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:w}}}function bk(n,e,t,r,i,s,o,l){let u=Qy(e||o.defaultCode,o.map);return new v0({calendarSystem:"gregory",timeZone:n,namedTimeZoneImpl:s.namedTimeZonedImpl,locale:u,weekNumberCalculation:t,firstDay:r,weekText:i,cmdFormatter:s.cmdFormatter,defaultSeparator:l})}function wk(n,e){let t=e.themeClasses[n.themeSystem]||Hr;return new t(n)}function Tk(n){let e=n.dateProfileGeneratorClass||sy;return new e(n)}function Ak(n,e,t){return new ek(n,e,t)}function Sk(n){return tr(n,e=>e.ui)}function Ik(n,e,t){let r={"":e};for(let i in n){let s=n[i];s.sourceId&&t[s.sourceId]&&(r[i]=t[s.sourceId])}return r}function Ck(n){let{options:e}=n;return{eventUiSingleBase:El({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},n),selectionConfig:El({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},n)}}function qc(n,e){for(let t of e.pluginHooks.isLoadingFuncs)if(t(n))return!0;return!1}function Rk(n){return X0(n.options.businessHours,n)}function Bp(n,e){for(let t in n)console.warn(`Unknown option '${t}'`)}class Dk extends He{render(){let e=this.props.widgetGroups.map(t=>this.renderWidgetGroup(t));return M("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:t}=this,{theme:r}=this.context,i=[],s=!0;for(let o of e){let{buttonName:l,buttonClick:u,buttonText:h,buttonIcon:g,buttonHint:b}=o;if(l==="title")s=!1,i.push(M("h2",{className:"fc-toolbar-title",id:t.titleId},t.title));else{let w=l===t.activeButton,A=!t.isTodayEnabled&&l==="today"||!t.isPrevEnabled&&l==="prev"||!t.isNextEnabled&&l==="next",C=[`fc-${l}-button`,r.getClass("button")];w&&C.push(r.getClass("buttonActive")),i.push(M("button",{type:"button",title:typeof b=="function"?b(t.navUnit):b,disabled:A,"aria-pressed":w,className:C.join(" "),onClick:u},h||(g?M("span",{className:g,role:"img"}):"")))}}if(i.length>1){let o=s&&r.getClass("buttonGroup")||"";return M("div",{className:o},...i)}return i[0]}}class Hp extends He{render(){let{model:e,extraClassName:t}=this.props,r=!1,i,s,o=e.sectionWidgets,l=o.center;return o.left?(r=!0,i=o.left):i=o.start,o.right?(r=!0,s=o.right):s=o.end,M("div",{className:[t||"","fc-toolbar",r?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",i||[]),this.renderSection("center",l||[]),this.renderSection("end",s||[]))}renderSection(e,t){let{props:r}=this;return M(Dk,{key:e,widgetGroups:t,title:r.title,navUnit:r.navUnit,activeButton:r.activeButton,isTodayEnabled:r.isTodayEnabled,isPrevEnabled:r.isPrevEnabled,isNextEnabled:r.isNextEnabled,titleId:r.titleId})}}class kk extends He{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,nr(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:t}=this,{aspectRatio:r}=e,i=["fc-view-harness",r||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],s="",o="";return r?t.availableWidth!==null?s=t.availableWidth/r:o=`${1/r*100}%`:s=e.height||"",M("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:i.join(" "),style:{height:s,paddingBottom:o}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class xk extends ks{constructor(e){super(e),this.handleSegClick=(t,r)=>{let{component:i}=this,{context:s}=i,o=_s(r);if(o&&i.isValidSegDownEl(t.target)){let l=Tt(t.target,".fc-event-forced-url"),u=l?l.querySelector("a[href]").href:"";s.emitter.trigger("eventClick",{el:r,event:new Ke(i.context,o.eventRange.def,o.eventRange.instance),jsEvent:t,view:s.viewApi}),u&&!t.defaultPrevented&&(window.location.href=u)}},this.destroy=$v(e.el,"click",".fc-event",this.handleSegClick)}}class Pk extends ks{constructor(e){super(e),this.handleEventElRemove=t=>{t===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(t,r)=>{_s(r)&&(this.currentSegEl=r,this.triggerEvent("eventMouseEnter",t,r))},this.handleSegLeave=(t,r)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",t,r))},this.removeHoverListeners=fC(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,t,r){let{component:i}=this,{context:s}=i,o=_s(r);(!t||i.isValidSegDownEl(t.target))&&s.emitter.trigger(e,{el:r,event:new Ke(s,o.eventRange.def,o.eventRange.instance),jsEvent:t,view:s.viewApi})}}class Nk extends wi{constructor(){super(...arguments),this.buildViewContext=ge(E0),this.buildViewPropTransformers=ge(Ok),this.buildToolbarProps=ge(Mk),this.headerRef=Mt(),this.footerRef=Mt(),this.interactionsStore={},this.state={viewLabelId:Gl()},this.registerInteractiveComponent=(e,t)=>{let r=_R(e,t),o=[xk,Pk].concat(this.props.pluginHooks.componentInteractions).map(l=>new l(r));this.interactionsStore[e.uid]=o,Du[e.uid]=r},this.unregisterInteractiveComponent=e=>{let t=this.interactionsStore[e.uid];if(t){for(let r of t)r.destroy();delete this.interactionsStore[e.uid]}delete Du[e.uid]},this.resizeRunner=new Nd(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:t}=this.props;t.handleWindowResize&&e.target===window&&this.resizeRunner.request(t.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:t,options:r}=e,i=!1,s="",o;e.isHeightAuto||e.forPrint?s="":r.height!=null?i=!0:r.contentHeight!=null?s=r.contentHeight:o=Math.max(r.aspectRatio,.5);let l=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),u=t.header&&t.header.hasTitle?this.state.viewLabelId:void 0;return M(sr.Provider,{value:l},M(xs,{unit:"day"},h=>{let g=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,h,e.viewTitle);return M(qe,null,t.header&&M(Hp,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:t.header,titleId:u},g)),M(kk,{liquid:i,height:s,aspectRatio:o,labeledById:u},this.renderView(e),this.buildAppendContent()),t.footer&&M(Hp,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:t.footer,titleId:""},g)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(r=>new r(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:t}=e.pluginHooks;for(let r in t)t[r](e[r],e)}componentDidUpdate(e){let{props:t}=this,{propSetHandlers:r}=t.pluginHooks;for(let i in r)t[i]!==e[i]&&r[i](t[i],t)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,t=e.pluginHooks.viewContainerAppends.map(r=>r(e));return M(qe,{},...t)}renderView(e){let{pluginHooks:t}=e,{viewSpec:r}=e,i={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},s=this.buildViewPropTransformers(t.viewPropsTransformers);for(let l of s)Object.assign(i,l.transform(i,e));let o=r.component;return M(o,Object.assign({},i))}}function Mk(n,e,t,r,i,s){let o=t.build(i,void 0,!1),l=t.buildPrev(e,r,!1),u=t.buildNext(e,r,!1);return{title:s,activeButton:n.type,navUnit:n.singleUnit,isTodayEnabled:o.isValid&&!Kn(e.currentRange,i),isPrevEnabled:l.isValid,isNextEnabled:u.isValid}}function Ok(n){return n.map(e=>new e)}class Vk extends bR{constructor(e,t={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=r=>{switch(r.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=r=>{this.currentData=r,this.renderRunner.request(r.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:r}=this;vl(()=>{Ao(M(yR,{options:r.calendarOptions,theme:r.theme,emitter:r.emitter},(i,s,o,l)=>(this.setClassNames(i),this.setHeight(s),M(ty.Provider,{value:this.customContentRenderId},M(Nk,Object.assign({isHeightAuto:o,forPrint:l},r))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Ao(null,this.el),this.setClassNames([]),this.setHeight(""))},iC(e),this.el=e,this.renderRunner=new Nd(this.handleRenderRequest),new Ek({optionOverrides:t,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){vl(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,t){this.currentDataManager.resetOptions(e,t)}setClassNames(e){if(!Vr(e,this.currentClassNames)){let{classList:t}=this.el;for(let r of this.currentClassNames)t.remove(r);for(let r of e)t.add(r);this.currentClassNames=e}}setHeight(e){Wv(this.el,"height",e)}}class Lk extends Pn{constructor(){super(...arguments),this.headerElRef=Mt()}renderSimpleLayout(e,t){let{props:r,context:i}=this,s=[],o=Tl(i.options);return e&&s.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),s.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),M(yl,{elClasses:["fc-daygrid"],viewSpec:i.viewSpec},M(rh,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[],sections:s}))}renderHScrollLayout(e,t,r,i){let s=this.context.pluginHooks.scrollGridImpl;if(!s)throw new Error("No ScrollGrid implementation");let{props:o,context:l}=this,u=!o.forPrint&&Tl(l.options),h=!o.forPrint&&Uy(l.options),g=[];return e&&g.push({type:"header",key:"header",isSticky:u,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),g.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),h&&g.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:Pu}]}),M(yl,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},M(s,{liquid:!o.isHeightAuto&&!o.forPrint,forPrint:o.forPrint,collapsibleWidth:o.forPrint,colGroups:[{cols:[{span:r,minWidth:i}]}],sections:g}))}}function Sa(n,e){let t=[];for(let r=0;r<e;r+=1)t[r]=[];for(let r of n)t[r.row].push(r);return t}function Ia(n,e){let t=[];for(let r=0;r<e;r+=1)t[r]=[];for(let r of n)t[r.firstCol].push(r);return t}function jp(n,e){let t=[];if(n){for(let r=0;r<e;r+=1)t[r]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let r of n.segs)t[r.row].segs.push(r)}else for(let r=0;r<e;r+=1)t[r]=null;return t}const t_=Xe({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function n_(n){let{display:e}=n.eventRange.ui;return e==="list-item"||e==="auto"&&!n.eventRange.def.allDay&&n.firstCol===n.lastCol&&n.isStart&&n.isEnd}class r_ extends He{render(){let{props:e}=this;return M(By,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:t_,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class i_ extends He{render(){let{props:e,context:t}=this,{options:r}=t,{seg:i}=e,s=r.eventTimeFormat||t_,o=yy(i,s,t,!0,e.defaultDisplayEventEnd);return M(ih,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:Ey(e.seg,t),defaultGenerator:Fk,timeText:o,isResizing:!1,isDateSelecting:!1}))}}function Fk(n){return M(qe,null,M("div",{className:"fc-daygrid-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}}),n.timeText&&M("div",{className:"fc-event-time"},n.timeText),M("div",{className:"fc-event-title"},n.event.title||M(qe,null,"Â ")))}class Uk extends He{constructor(){super(...arguments),this.compileSegs=ge(Bk)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:r}=this.compileSegs(e.singlePlacements);return M(Wy,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:r,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let i=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return M(qe,null,t.map(s=>{let o=s.eventRange.instance.instanceId;return M("div",{className:"fc-daygrid-event-harness",key:o,style:{visibility:i[o]?"hidden":""}},n_(s)?M(i_,Object.assign({seg:s,isDragging:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},Dr(s,e.todayRange))):M(r_,Object.assign({seg:s,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},Dr(s,e.todayRange))))}))}})}}function Bk(n){let e=[],t=[];for(let r of n)e.push(r.seg),r.isVisible||t.push(r.seg);return{allSegs:e,invisibleSegs:t}}const Hk=Xe({week:"narrow"});class jk extends Pn{constructor(){super(...arguments),this.rootElRef=Mt(),this.state={dayNumberId:Gl()},this.handleRootEl=e=>{nr(this.rootElRef,e),nr(this.props.elRef,e)}}render(){let{context:e,props:t,state:r,rootElRef:i}=this,{options:s,dateEnv:o}=e,{date:l,dateProfile:u}=t;const h=t.showDayNumber&&Wk(l,u.currentRange,o);return M(oh,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:zk,date:l,dateProfile:u,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:h,extraRenderProps:t.extraRenderProps},(g,b)=>M("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&M(zy,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:wl(e,l,"week"),date:l,defaultFormat:Hk}),!b.isDisabled&&(t.showDayNumber||ah(s)||t.forceDayTop)?M("div",{className:"fc-daygrid-day-top"},M(g,{elTag:"a",elClasses:["fc-daygrid-day-number",h&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},wl(e,l)),{id:r.dayNumberId})})):t.showDayNumber?M("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},M("a",{className:"fc-daygrid-day-number"},"Â ")):void 0,M("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,M("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},M(Uk,{allDayDate:l,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:i,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),M("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}}function zk(n){return n.dayNumberText||M(qe,null,"Â ")}function Wk(n,e,t){const{start:r,end:i}=e,s=Lr(i,-1),o=t.getYear(r),l=t.getMonth(r),u=t.getYear(s),h=t.getMonth(s);return!(o===u&&l===h)&&(n.valueOf()===r.valueOf()||t.getDay(n)===1&&n.valueOf()<i.valueOf())}function s_(n){return n.eventRange.instance.instanceId+":"+n.firstCol}function o_(n){return s_(n)+":"+n.lastCol}function qk(n,e,t,r,i,s,o){let l=new Qk(U=>{let X=n[U.index].eventRange.instance.instanceId+":"+U.span.start+":"+(U.span.end-1);return i[X]||1});l.allowReslicing=!0,l.strictOrder=r,e===!0||t===!0?(l.maxCoord=s,l.hiddenConsumes=!0):typeof e=="number"?l.maxStackCnt=e:typeof t=="number"&&(l.maxStackCnt=t,l.hiddenConsumes=!0);let u=[],h=[];for(let U=0;U<n.length;U+=1){let X=n[U],te=o_(X);i[te]!=null?u.push({index:U,span:{start:X.firstCol,end:X.lastCol+1}}):h.push(X)}let g=l.addSegs(u),b=l.toRects(),{singleColPlacements:w,multiColPlacements:A,leftoverMargins:C}=$k(b,n,o),P=[],O=[];for(let U of h){A[U.firstCol].push({seg:U,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let X=U.firstCol;X<=U.lastCol;X+=1)w[X].push({seg:ls(U,X,X+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let U=0;U<o.length;U+=1)P.push(0);for(let U of g){let X=n[U.index],te=U.span;A[te.start].push({seg:ls(X,te.start,te.end,o),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let ie=te.start;ie<te.end;ie+=1)P[ie]+=1,w[ie].push({seg:ls(X,ie,ie+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let U=0;U<o.length;U+=1)O.push(C[U]);return{singleColPlacements:w,multiColPlacements:A,moreCnts:P,moreMarginTops:O}}function $k(n,e,t){let r=Gk(n,t.length),i=[],s=[],o=[];for(let l=0;l<t.length;l+=1){let u=r[l],h=[],g=0,b=0;for(let A of u){let C=e[A.index];h.push({seg:ls(C,l,l+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:A.levelCoord,marginTop:A.levelCoord-g}),g=A.levelCoord+A.thickness}let w=[];g=0,b=0;for(let A of u){let C=e[A.index],P=A.span.end-A.span.start>1,O=A.span.start===l;b+=A.levelCoord-g,g=A.levelCoord+A.thickness,P?(b+=A.thickness,O&&w.push({seg:ls(C,A.span.start,A.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:A.levelCoord,marginTop:0})):O&&(w.push({seg:ls(C,A.span.start,A.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:A.levelCoord,marginTop:b}),b=0)}i.push(h),s.push(w),o.push(b)}return{singleColPlacements:i,multiColPlacements:s,leftoverMargins:o}}function Gk(n,e){let t=[];for(let r=0;r<e;r+=1)t.push([]);for(let r of n)for(let i=r.span.start;i<r.span.end;i+=1)t[i].push(r);return t}function ls(n,e,t,r){if(n.firstCol===e&&n.lastCol===t-1)return n;let i=n.eventRange,s=i.range,o=mi(s,{start:r[e].date,end:At(r[t-1].date,1)});return Object.assign(Object.assign({},n),{firstCol:e,lastCol:t-1,eventRange:{def:i.def,ui:Object.assign(Object.assign({},i.ui),{durationEditable:!1}),instance:i.instance,range:o},isStart:n.isStart&&o.start.valueOf()===s.start.valueOf(),isEnd:n.isEnd&&o.end.valueOf()===s.end.valueOf()})}class Qk extends Ry{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:r}=this,i=s=>!this.forceHidden[li(s)];for(let s=0;s<r.length;s+=1)r[s]=r[s].filter(i);return t}handleInvalidInsertion(e,t,r){const{entriesByLevel:i,forceHidden:s}=this,{touchingEntry:o,touchingLevel:l,touchingLateral:u}=e;if(this.hiddenConsumes&&o){const h=li(o);if(!s[h])if(this.allowReslicing){const g=Object.assign(Object.assign({},o),{span:th(o.span,t.span)}),b=li(g);s[b]=!0,i[l][u]=g,r.push(g),this.splitEntry(o,t,r)}else s[h]=!0,r.push(o)}super.handleInvalidInsertion(e,t,r)}}class a_ extends Pn{constructor(){super(...arguments),this.cellElRefs=new Gn,this.frameElRefs=new Gn,this.fgElRefs=new Gn,this.segHarnessRefs=new Gn,this.rootElRef=Mt(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:r}=this,{options:i}=r,s=e.cells.length,o=Ia(e.businessHourSegs,s),l=Ia(e.bgEventSegs,s),u=Ia(this.getHighlightSegs(),s),h=Ia(this.getMirrorSegs(),s),{singleColPlacements:g,multiColPlacements:b,moreCnts:w,moreMarginTops:A}=qk(vy(e.fgEventSegs,i.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,i.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),C=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return M("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((P,O)=>{let U=this.renderFgSegs(O,e.forPrint?g[O]:b[O],e.todayRange,C),X=this.renderFgSegs(O,Yk(h[O],b),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return M(jk,{key:P.key,elRef:this.cellElRefs.createRef(P.key),innerElRef:this.frameElRefs.createRef(P.key),dateProfile:e.dateProfile,date:P.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&O===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:P.extraRenderProps,extraDataAttrs:P.extraDataAttrs,extraClassNames:P.extraClassNames,extraDateSpan:P.extraDateSpan,moreCnt:w[O],moreMarginTop:A[O],singlePlacements:g[O],fgContentElRef:this.fgElRefs.createRef(P.key),fgContent:M(qe,null,M(qe,null,U),M(qe,null,X)),bgContent:M(qe,null,this.renderFillSegs(u[O],"highlight"),this.renderFillSegs(o[O],"non-business"),this.renderFillSegs(l[O],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let r=this.props;this.updateSizing(!kn(e,r))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,r,i,s,o,l){let{context:u}=this,{eventSelection:h}=this.props,{framePositions:g}=this.state,b=this.props.cells.length===1,w=s||o||l,A=[];if(g)for(let C of t){let{seg:P}=C,{instanceId:O}=P.eventRange.instance,U=C.isVisible&&!i[O],X=C.isAbsolute,te="",ie="";X&&(u.isRtl?(ie=0,te=g.lefts[P.lastCol]-g.lefts[P.firstCol]):(te=0,ie=g.rights[P.firstCol]-g.rights[P.lastCol])),A.push(M("div",{className:"fc-daygrid-event-harness"+(X?" fc-daygrid-event-harness-abs":""),key:s_(P),ref:w?null:this.segHarnessRefs.createRef(o_(P)),style:{visibility:U?"":"hidden",marginTop:X?"":C.marginTop,top:X?C.absoluteTop:"",left:te,right:ie}},n_(P)?M(i_,Object.assign({seg:P,isDragging:s,isSelected:O===h,defaultDisplayEventEnd:b},Dr(P,r))):M(r_,Object.assign({seg:P,isDragging:s,isResizing:o,isDateSelecting:l,isSelected:O===h,defaultDisplayEventEnd:b},Dr(P,r)))))}return A}renderFillSegs(e,t){let{isRtl:r}=this.context,{todayRange:i}=this.props,{framePositions:s}=this.state,o=[];if(s)for(let l of e){let u=r?{right:0,left:s.lefts[l.lastCol]-s.lefts[l.firstCol]}:{left:0,right:s.rights[l.firstCol]-s.rights[l.lastCol]};o.push(M("div",{key:_y(l.eventRange),className:"fc-daygrid-bg-harness",style:u},t==="bg-event"?M(Hy,Object.assign({seg:l},Dr(l,i))):jy(t)))}return M(qe,{},...o)}updateSizing(e){let{props:t,state:r,frameElRefs:i}=this;if(!t.forPrint&&t.clientWidth!==null){if(e){let u=t.cells.map(h=>i.currentMap[h.key]);if(u.length){let h=this.rootElRef.current,g=new Es(h,u,!0,!1);(!r.framePositions||!r.framePositions.similarTo(g))&&this.setState({framePositions:new Es(h,u,!0,!1)})}}const s=this.state.segHeights,o=this.querySegHeights(),l=t.dayMaxEvents===!0||t.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},s),o),maxContentHeight:l?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let r in e){let i=Math.round(e[r].getBoundingClientRect().height);t[r]=Math.max(t[r]||0,i)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],r=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-r.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(t=>e[t.key])}}a_.addStateEquality({segHeights:kn});function Yk(n,e){if(!n.length)return[];let t=Kk(e);return n.map(r=>({seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:t[r.eventRange.instance.instanceId],marginTop:0}))}function Kk(n){let e={};for(let t of n)for(let r of t)e[r.seg.eventRange.instance.instanceId]=r.absoluteTop;return e}class Xk extends Pn{constructor(){super(...arguments),this.splitBusinessHourSegs=ge(Sa),this.splitBgEventSegs=ge(Sa),this.splitFgEventSegs=ge(Sa),this.splitDateSelectionSegs=ge(Sa),this.splitEventDrag=ge(jp),this.splitEventResize=ge(jp),this.rowRefs=new Gn}render(){let{props:e,context:t}=this,r=e.cells.length,i=this.splitBusinessHourSegs(e.businessHourSegs,r),s=this.splitBgEventSegs(e.bgEventSegs,r),o=this.splitFgEventSegs(e.fgEventSegs,r),l=this.splitDateSelectionSegs(e.dateSelectionSegs,r),u=this.splitEventDrag(e.eventDrag,r),h=this.splitEventResize(e.eventResize,r),g=r>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return M(xs,{unit:"day"},(b,w)=>M(qe,null,e.cells.map((A,C)=>M(a_,{ref:this.rowRefs.createRef(C),key:A.length?A[0].date.toISOString():C,showDayNumbers:r>1,showWeekNumbers:e.showWeekNumbers,todayRange:w,dateProfile:e.dateProfile,cells:A,renderIntro:e.renderRowIntro,businessHourSegs:i[C],eventSelection:e.eventSelection,bgEventSegs:s[C].filter(Jk),fgEventSegs:o[C],dateSelectionSegs:l[C],eventDrag:u[C],eventResize:h[C],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:g,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new Es(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new Es(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:r,rowPositions:i}=this,s=r.leftToIndex(e),o=i.topToIndex(t);if(o!=null&&s!=null){let l=this.props.cells[o][s];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(o,s),allDay:!0},l.extraDateSpan),dayEl:this.getCellEl(o,s),rect:{left:r.lefts[s],right:r.rights[s],top:i.tops[o],bottom:i.bottoms[o]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let r=this.props.cells[e][t].date,i=At(r,1);return{start:r,end:i}}}function Jk(n){return n.eventRange.def.allDay}class Zk extends Pn{constructor(){super(...arguments),this.elRef=Mt(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:r,expandRows:i}=e,s=r===!0||t===!0;s&&!i&&(s=!1,t=null,r=null);let o=["fc-daygrid-body",s?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",i?"":"fc-daygrid-body-natural"];return M("div",{ref:this.elRef,className:o.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},M("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:i?e.clientHeight:""}},e.colGroupNode,M("tbody",{role:"presentation"},M(Xk,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:r,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=ex(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),r=t.closest(".fc-scroller"),i=e.getBoundingClientRect().top-t.getBoundingClientRect().top;r.scrollTop=i?i+1:0}this.needsScrollReset=!1}}}function ex(n,e){let t;return e.currentRangeUnit.match(/year|month/)&&(t=n.querySelector(`[data-date="${WC(e.currentDate)}-01"]`)),t||(t=n.querySelector(`[data-date="${Fd(e.currentDate)}"]`)),t}class tx extends My{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class l_ extends Pn{constructor(){super(...arguments),this.slicer=new tx,this.tableRef=Mt()}render(){let{props:e,context:t}=this;return M(Zk,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class nx extends Lk{constructor(){super(...arguments),this.buildDayTableModel=ge(rx),this.headerRef=Mt(),this.tableRef=Mt()}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:r}=this,i=this.buildDayTableModel(r.dateProfile,t),s=e.dayHeaders&&M(xy,{ref:this.headerRef,dateProfile:r.dateProfile,dates:i.headerDates,datesRepDistinctDays:i.rowCnt===1}),o=l=>M(l_,{ref:this.tableRef,dateProfile:r.dateProfile,dayTableModel:i,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:l.tableColGroupNode,tableMinWidth:l.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:l.clientWidth,clientHeight:l.clientHeight,forPrint:r.forPrint});return e.dayMinWidth?this.renderHScrollLayout(s,o,i.colCnt,e.dayMinWidth):this.renderSimpleLayout(s,o)}}function rx(n,e){let t=new Py(n.renderRange,e);return new Ny(t,/year|month|week/.test(n.currentRangeUnit))}class ix extends sy{buildRenderRange(e,t,r){let i=super.buildRenderRange(e,t,r),{props:s}=this;return sx({currentRange:i,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:s.fixedWeekCount,dateEnv:s.dateEnv})}}function sx(n){let{dateEnv:e,currentRange:t}=n,{start:r,end:i}=t,s;if(n.snapToWeek&&(r=e.startOfWeek(r),s=e.startOfWeek(i),s.valueOf()!==i.valueOf()&&(i=vp(s,1))),n.fixedWeekCount){let o=e.startOfWeek(e.startOfMonth(At(t.end,-1))),l=Math.ceil(NC(o,i));i=vp(i,6-l)}return{start:r,end:i}}var ox=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';Pd(ox);var ax=or({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:nx,dateProfileGeneratorClass:ix},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class lx extends IR{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?nR(e)?["timed","allDay"]:["allDay"]:["timed"]}}const cx=Xe({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function c_(n){let e=["fc-timegrid-slot","fc-timegrid-slot-label",n.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return M(sr.Consumer,null,t=>{if(!n.isLabeled)return M("td",{className:e.join(" "),"data-time":n.isoTimeStr});let{dateEnv:r,options:i,viewApi:s}=t,o=i.slotLabelFormat==null?cx:Array.isArray(i.slotLabelFormat)?Xe(i.slotLabelFormat[0]):Xe(i.slotLabelFormat),l={level:0,time:n.time,date:r.toDate(n.date),view:s,text:r.format(n.date,o)};return M($t,{elTag:"td",elClasses:e,elAttrs:{"data-time":n.isoTimeStr},renderProps:l,generatorName:"slotLabelContent",customGenerator:i.slotLabelContent,defaultGenerator:ux,classNameGenerator:i.slotLabelClassNames,didMount:i.slotLabelDidMount,willUnmount:i.slotLabelWillUnmount},u=>M("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},M(u,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function ux(n){return n.text}class dx extends He{render(){return this.props.slatMetas.map(e=>M("tr",{key:e.key},M(c_,Object.assign({},e))))}}const hx=Xe({week:"short"}),fx=5;class px extends Pn{constructor(){super(...arguments),this.allDaySplitter=new lx,this.headerElRef=Mt(),this.rootElRef=Mt(),this.scrollerElRef=Mt(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let t=this.scrollerElRef.current;t&&(t.scrollTop=e)},this.renderHeadAxis=(e,t="")=>{let{options:r}=this.context,{dateProfile:i}=this.props,s=i.renderRange,l=bi(s.start,s.end)===1?wl(this.context,s.start,"week"):{};return r.weekNumbers&&e==="day"?M(zy,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:s.start,defaultFormat:hx},u=>M("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:t}},M(u,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:l}))):M("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},M("div",{className:"fc-timegrid-axis-frame",style:{height:t}}))},this.renderTableRowAxis=e=>{let{options:t,viewApi:r}=this.context,i={text:t.allDayText,view:r};return M($t,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:i,generatorName:"allDayContent",customGenerator:t.allDayContent,defaultGenerator:gx,classNameGenerator:t.allDayClassNames,didMount:t.allDayDidMount,willUnmount:t.allDayWillUnmount},s=>M("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",e==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},M(s,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,t,r){let{context:i,props:s}=this,o=[],l=Tl(i.options);return e&&o.push({type:"header",key:"header",isSticky:l,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),t&&(o.push({type:"body",key:"all-day",chunk:{content:t}}),o.push({type:"body",key:"all-day-divider",outerContent:M("tr",{role:"presentation",className:"fc-scrollgrid-section"},M("td",{className:"fc-timegrid-divider "+i.theme.getClass("tableCellShaded")}))})),o.push({type:"body",key:"body",liquid:!0,expandRows:!!i.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:r}}),M(yl,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:i.viewSpec},M(rh,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[{width:"shrink"}],sections:o}))}renderHScrollLayout(e,t,r,i,s,o,l){let u=this.context.pluginHooks.scrollGridImpl;if(!u)throw new Error("No ScrollGrid implementation");let{context:h,props:g}=this,b=!g.forPrint&&Tl(h.options),w=!g.forPrint&&Uy(h.options),A=[];e&&A.push({type:"header",key:"header",isSticky:b,syncRowHeights:!0,chunks:[{key:"axis",rowContent:P=>M("tr",{role:"presentation"},this.renderHeadAxis("day",P.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),t&&(A.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:P=>M("tr",{role:"presentation"},this.renderTableRowAxis(P.rowSyncHeights[0]))},{key:"cols",content:t}]}),A.push({key:"all-day-divider",type:"body",outerContent:M("tr",{role:"presentation",className:"fc-scrollgrid-section"},M("td",{colSpan:2,className:"fc-timegrid-divider "+h.theme.getClass("tableCellShaded")}))}));let C=h.options.nowIndicator;return A.push({type:"body",key:"body",liquid:!0,expandRows:!!h.options.expandRows,chunks:[{key:"axis",content:P=>M("div",{className:"fc-timegrid-axis-chunk"},M("table",{"aria-hidden":!0,style:{height:P.expandRows?P.clientHeight:""}},P.tableColGroupNode,M("tbody",null,M(dx,{slatMetas:o}))),M("div",{className:"fc-timegrid-now-indicator-container"},M(xs,{unit:C?"minute":"day"},O=>{let U=C&&l&&l.safeComputeTop(O);return typeof U=="number"?M(sh,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:U},isAxis:!0,date:O}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:r}]}),w&&A.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:Pu},{key:"cols",content:Pu}]}),M(yl,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:h.viewSpec},M(u,{liquid:!g.isHeightAuto&&!g.forPrint,forPrint:g.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:i,minWidth:s}]}],sections:A}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:t}=this.context.options;return(e===!0||t===!0)&&(e=void 0,t=fx),{dayMaxEvents:e,dayMaxEventRows:t}}}function gx(n){return n.text}class mx{constructor(e,t,r){this.positions=e,this.dateProfile=t,this.slotDuration=r}safeComputeTop(e){let{dateProfile:t}=this;if(Kn(t.currentRange,e)){let r=$e(e),i=e.valueOf()-r.valueOf();if(i>=ln(t.slotMinTime)&&i<ln(t.slotMaxTime))return this.computeTimeTop(Ve(i))}return null}computeDateTop(e,t){return t||(t=$e(e)),this.computeTimeTop(Ve(e.valueOf()-t.valueOf()))}computeTimeTop(e){let{positions:t,dateProfile:r}=this,i=t.els.length,s=(e.milliseconds-ln(r.slotMinTime))/ln(this.slotDuration),o,l;return s=Math.max(0,s),s=Math.min(i,s),o=Math.floor(s),o=Math.min(o,i-1),l=s-o,t.tops[o]+t.getHeight(o)*l}}class vx extends He{render(){let{props:e,context:t}=this,{options:r}=t,{slatElRefs:i}=e;return M("tbody",null,e.slatMetas.map((s,o)=>{let l={time:s.time,date:t.dateEnv.toDate(s.date),view:t.viewApi};return M("tr",{key:s.key,ref:i.createRef(s.key)},e.axis&&M(c_,Object.assign({},s)),M($t,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!s.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":s.isoTimeStr},renderProps:l,generatorName:"slotLaneContent",customGenerator:r.slotLaneContent,classNameGenerator:r.slotLaneClassNames,didMount:r.slotLaneDidMount,willUnmount:r.slotLaneWillUnmount}))}))}}class yx extends He{constructor(){super(...arguments),this.rootElRef=Mt(),this.slatElRefs=new Gn}render(){let{props:e,context:t}=this;return M("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},M("table",{"aria-hidden":!0,className:t.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,M(vx,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:t}=this;t.onCoords&&t.clientWidth!==null&&this.rootElRef.current.offsetHeight&&t.onCoords(new mx(new Es(this.rootElRef.current,_x(this.slatElRefs.currentMap,t.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}function _x(n,e){return e.map(t=>n[t.key])}function Xs(n,e){let t=[],r;for(r=0;r<e;r+=1)t.push([]);if(n)for(r=0;r<n.length;r+=1)t[n[r].col].push(n[r]);return t}function zp(n,e){let t=[];if(n){for(let r=0;r<e;r+=1)t[r]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let r of n.segs)t[r.col].segs.push(r)}else for(let r=0;r<e;r+=1)t[r]=null;return t}class Ex extends He{render(){let{props:e}=this;return M(Wy,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>d_(e.hiddenSegs,e),defaultGenerator:bx,forceTimed:!0},t=>M(t,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function bx(n){return n.shortText}function wx(n,e,t){let r=new Ry;e!=null&&(r.strictOrder=e),t!=null&&(r.maxStackCnt=t);let i=r.addSegs(n),s=UR(i),o=Tx(r);return o=Cx(o,1),{segRects:Rx(o),hiddenGroups:s}}function Tx(n){const{entriesByLevel:e}=n,t=ch((r,i)=>r+":"+i,(r,i)=>{let s=Ix(n,r,i),o=Wp(s,t),l=e[r][i];return[Object.assign(Object.assign({},l),{nextLevelNodes:o[0]}),l.thickness+o[1]]});return Wp(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,t)[0]}function Wp(n,e){if(!n)return[[],0];let{level:t,lateralStart:r,lateralEnd:i}=n,s=r,o=[];for(;s<i;)o.push(e(t,s)),s+=1;return o.sort(Ax),[o.map(Sx),o[0][1]]}function Ax(n,e){return e[1]-n[1]}function Sx(n){return n[0]}function Ix(n,e,t){let{levelCoords:r,entriesByLevel:i}=n,s=i[e][t],o=r[e]+s.thickness,l=r.length,u=e;for(;u<l&&r[u]<o;u+=1);for(;u<l;u+=1){let h=i[u],g,b=xu(h,s.span.start,ku),w=b[0]+b[1],A=w;for(;(g=h[A])&&g.span.start<s.span.end;)A+=1;if(w<A)return{level:u,lateralStart:w,lateralEnd:A}}return null}function Cx(n,e){const t=ch((r,i,s)=>li(r),(r,i,s)=>{let{nextLevelNodes:o,thickness:l}=r,u=l+s,h=l/u,g,b=[];if(!o.length)g=e;else for(let A of o)if(g===void 0){let C=t(A,i,u);g=C[0],b.push(C[1])}else{let C=t(A,g,0);b.push(C[1])}let w=(g-i)*h;return[g-w,Object.assign(Object.assign({},r),{thickness:w,nextLevelNodes:b})]});return n.map(r=>t(r,0,0)[1])}function Rx(n){let e=[];const t=ch((i,s,o)=>li(i),(i,s,o)=>{let l=Object.assign(Object.assign({},i),{levelCoord:s,stackDepth:o,stackForward:0});return e.push(l),l.stackForward=r(i.nextLevelNodes,s+i.thickness,o+1)+1});function r(i,s,o){let l=0;for(let u of i)l=Math.max(t(u,s,o),l);return l}return r(n,0,0),e}function ch(n,e){const t={};return(...r)=>{let i=n(...r);return i in t?t[i]:t[i]=e(...r)}}function qp(n,e,t=null,r=0){let i=[];if(t)for(let s=0;s<n.length;s+=1){let o=n[s],l=t.computeDateTop(o.start,e),u=Math.max(l+(r||0),t.computeDateTop(o.end,e));i.push({start:Math.round(l),end:Math.round(u)})}return i}function Dx(n,e,t,r){let i=[],s=[];for(let h=0;h<n.length;h+=1){let g=e[h];g?i.push({index:h,thickness:1,span:g}):s.push(n[h])}let{segRects:o,hiddenGroups:l}=wx(i,t,r),u=[];for(let h of o)u.push({seg:n[h.index],rect:h});for(let h of s)u.push({seg:h,rect:null});return{segPlacements:u,hiddenGroups:l}}const kx=Xe({hour:"numeric",minute:"2-digit",meridiem:!1});class u_ extends He{render(){return M(By,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:kx}))}}class xx extends He{constructor(){super(...arguments),this.sortEventSegs=ge(vy)}render(){let{props:e,context:t}=this,{options:r}=t,i=r.selectMirror,s=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||i&&e.dateSelectionSegs||[],o=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},l=this.sortEventSegs(e.fgEventSegs,r.eventOrder);return M(oh,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},u=>M("div",{className:"fc-timegrid-col-frame"},M("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),M("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(l,o,!1,!1,!1)),M("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(s,{},!!e.eventDrag,!!e.eventResize,!!i,"mirror")),M("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),ah(r)&&M(u,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(e,t,r,i,s,o){let{props:l}=this;return l.forPrint?d_(e,l):this.renderPositionedFgSegs(e,t,r,i,s,o)}renderPositionedFgSegs(e,t,r,i,s,o){let{eventMaxStack:l,eventShortHeight:u,eventOrderStrict:h,eventMinHeight:g}=this.context.options,{date:b,slatCoords:w,eventSelection:A,todayRange:C,nowDate:P}=this.props,O=r||i||s,U=qp(e,b,w,g),{segPlacements:X,hiddenGroups:te}=Dx(e,U,h,l);return M(qe,null,this.renderHiddenGroups(te,e),X.map(ie=>{let{seg:Se,rect:de}=ie,f=Se.eventRange.instance.instanceId,R=O||!!(!t[f]&&de),k=$c(de&&de.span),L=!O&&de?this.computeSegHStyle(de):{left:0,right:0},B=!!de&&de.stackForward>0,j=!!de&&de.span.end-de.span.start<u;return M("div",{className:"fc-timegrid-event-harness"+(B?" fc-timegrid-event-harness-inset":""),key:o||f,style:Object.assign(Object.assign({visibility:R?"":"hidden"},k),L)},M(u_,Object.assign({seg:Se,isDragging:r,isResizing:i,isDateSelecting:s,isSelected:f===A,isShort:j},Dr(Se,C,P))))}))}renderHiddenGroups(e,t){let{extraDateSpan:r,dateProfile:i,todayRange:s,nowDate:o,eventSelection:l,eventDrag:u,eventResize:h}=this.props;return M(qe,null,e.map(g=>{let b=$c(g.span),w=Px(g.entries,t);return M(Ex,{key:Kv(qy(w)),hiddenSegs:w,top:b.top,bottom:b.bottom,extraDateSpan:r,dateProfile:i,todayRange:s,nowDate:o,eventSelection:l,eventDrag:u,eventResize:h})}))}renderFillSegs(e,t){let{props:r,context:i}=this,o=qp(e,r.date,r.slatCoords,i.options.eventMinHeight).map((l,u)=>{let h=e[u];return M("div",{key:_y(h.eventRange),className:"fc-timegrid-bg-harness",style:$c(l)},t==="bg-event"?M(Hy,Object.assign({seg:h},Dr(h,r.todayRange,r.nowDate))):jy(t))});return M(qe,null,o)}renderNowIndicator(e){let{slatCoords:t,date:r}=this.props;return t?e.map((i,s)=>M(sh,{key:s,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:t.computeDateTop(i.start,r)},isAxis:!1,date:r})):null}computeSegHStyle(e){let{isRtl:t,options:r}=this.context,i=r.slotEventOverlap,s=e.levelCoord,o=e.levelCoord+e.thickness,l,u;i&&(o=Math.min(1,s+(o-s)*2)),t?(l=1-o,u=s):(l=s,u=1-o);let h={zIndex:e.stackDepth+1,left:l*100+"%",right:u*100+"%"};return i&&!e.stackForward&&(h[t?"marginLeft":"marginRight"]=10*2),h}}function d_(n,{todayRange:e,nowDate:t,eventSelection:r,eventDrag:i,eventResize:s}){let o=(i?i.affectedInstances:null)||(s?s.affectedInstances:null)||{};return M(qe,null,n.map(l=>{let u=l.eventRange.instance.instanceId;return M("div",{key:u,style:{visibility:o[u]?"hidden":""}},M(u_,Object.assign({seg:l,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:u===r,isShort:!1},Dr(l,e,t))))}))}function $c(n){return n?{top:n.start,bottom:-n.end}:{top:"",bottom:""}}function Px(n,e){return n.map(t=>e[t.index])}class Nx extends He{constructor(){super(...arguments),this.splitFgEventSegs=ge(Xs),this.splitBgEventSegs=ge(Xs),this.splitBusinessHourSegs=ge(Xs),this.splitNowIndicatorSegs=ge(Xs),this.splitDateSelectionSegs=ge(Xs),this.splitEventDrag=ge(zp),this.splitEventResize=ge(zp),this.rootElRef=Mt(),this.cellElRefs=new Gn}render(){let{props:e,context:t}=this,r=t.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),i=e.cells.length,s=this.splitFgEventSegs(e.fgEventSegs,i),o=this.splitBgEventSegs(e.bgEventSegs,i),l=this.splitBusinessHourSegs(e.businessHourSegs,i),u=this.splitNowIndicatorSegs(e.nowIndicatorSegs,i),h=this.splitDateSelectionSegs(e.dateSelectionSegs,i),g=this.splitEventDrag(e.eventDrag,i),b=this.splitEventResize(e.eventResize,i);return M("div",{className:"fc-timegrid-cols",ref:this.rootElRef},M("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,M("tbody",{role:"presentation"},M("tr",{role:"row"},e.axis&&M("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},M("div",{className:"fc-timegrid-col-frame"},M("div",{className:"fc-timegrid-now-indicator-container"},typeof r=="number"&&M(sh,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:r},isAxis:!0,date:e.nowDate})))),e.cells.map((w,A)=>M(xx,{key:w.key,elRef:this.cellElRefs.createRef(w.key),dateProfile:e.dateProfile,date:w.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:w.extraRenderProps,extraDataAttrs:w.extraDataAttrs,extraClassNames:w.extraClassNames,extraDateSpan:w.extraDateSpan,fgEventSegs:s[A],bgEventSegs:o[A],businessHourSegs:l[A],nowIndicatorSegs:u[A],dateSelectionSegs:h[A],eventDrag:g[A],eventResize:b[A],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&e.clientWidth!==null&&e.onColCoords(new Es(this.rootElRef.current,Mx(this.cellElRefs.currentMap,e.cells),!0,!1))}}function Mx(n,e){return e.map(t=>n[t.key])}class Ox extends Pn{constructor(){super(...arguments),this.processSlotOptions=ge(Vx),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:t}=this.props,{slatCoords:r}=this.state;if(t&&r){if(e.time){let i=r.computeTimeTop(e.time);i=Math.ceil(i),i&&(i+=1),t(i)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:t}=this;return M("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},M(yx,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),M(Nx,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:t.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,t){let{dateEnv:r,options:i}=this.context,{colCoords:s}=this,{dateProfile:o}=this.props,{slatCoords:l}=this.state,{snapDuration:u,snapsPerSlot:h}=this.processSlotOptions(this.props.slotDuration,i.snapDuration),g=s.leftToIndex(e),b=l.positions.topToIndex(t);if(g!=null&&b!=null){let w=this.props.cells[g],A=l.positions.tops[b],C=l.positions.getHeight(b),P=(t-A)/C,O=Math.floor(P*h),U=b*h+O,X=this.props.cells[g].date,te=Tu(o.slotMinTime,DC(u,U)),ie=r.add(X,te),Se=r.add(ie,u);return{dateProfile:o,dateSpan:Object.assign({range:{start:ie,end:Se},allDay:!1},w.extraDateSpan),dayEl:s.els[g],rect:{left:s.lefts[g],right:s.rights[g],top:A,bottom:A+C},layer:0}}return null}}function Vx(n,e){let t=e||n,r=Ld(n,t);return r===null&&(t=n,r=1),{snapDuration:t,snapsPerSlot:r}}class Lx extends My{sliceRange(e,t){let r=[];for(let i=0;i<t.length;i+=1){let s=mi(e,t[i]);s&&r.push({start:s.start,end:s.end,isStart:s.start.valueOf()===e.start.valueOf(),isEnd:s.end.valueOf()===e.end.valueOf(),col:i})}return r}}class Fx extends Pn{constructor(){super(...arguments),this.buildDayRanges=ge(Ux),this.slicer=new Lx,this.timeColsRef=Mt()}render(){let{props:e,context:t}=this,{dateProfile:r,dayTableModel:i}=e,{nowIndicator:s,nextDayThreshold:o}=t.options,l=this.buildDayRanges(i,r,t.dateEnv);return M(xs,{unit:s?"minute":"day"},(u,h)=>M(Ox,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,r,null,t,l),{forPrint:e.forPrint,axis:e.axis,dateProfile:r,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:i.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:u,nowIndicatorSegs:s&&this.slicer.sliceNowDate(u,r,o,t,l),todayRange:h,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})))}}function Ux(n,e,t){let r=[];for(let i of n.headerDates)r.push({start:t.add(i,e.slotMinTime),end:t.add(i,e.slotMaxTime)});return r}const $p=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function Bx(n,e,t,r,i){let s=new Date(0),o=n,l=Ve(0),u=t||Hx(r),h=[];for(;ln(o)<ln(e);){let g=i.add(s,o),b=Ld(l,u)!==null;h.push({date:g,time:o,key:g.toISOString(),isoTimeStr:qC(g),isLabeled:b}),o=Tu(o,r),l=Tu(l,r)}return h}function Hx(n){let e,t,r;for(e=$p.length-1;e>=0;e-=1)if(t=Ve($p[e]),r=Ld(t,n),r!==null&&r>1)return t;return n}class jx extends px{constructor(){super(...arguments),this.buildTimeColsModel=ge(zx),this.buildSlatMetas=ge(Bx)}render(){let{options:e,dateEnv:t,dateProfileGenerator:r}=this.context,{props:i}=this,{dateProfile:s}=i,o=this.buildTimeColsModel(s,r),l=this.allDaySplitter.splitProps(i),u=this.buildSlatMetas(s.slotMinTime,s.slotMaxTime,e.slotLabelInterval,e.slotDuration,t),{dayMinWidth:h}=e,g=!h,b=h,w=e.dayHeaders&&M(xy,{dates:o.headerDates,dateProfile:s,datesRepDistinctDays:!0,renderIntro:g?this.renderHeadAxis:null}),A=e.allDaySlot!==!1&&(P=>M(l_,Object.assign({},l.allDay,{dateProfile:s,dayTableModel:o,nextDayThreshold:e.nextDayThreshold,tableMinWidth:P.tableMinWidth,colGroupNode:P.tableColGroupNode,renderRowIntro:g?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:P.clientWidth,clientHeight:P.clientHeight,forPrint:i.forPrint},this.getAllDayMaxEventProps()))),C=P=>M(Fx,Object.assign({},l.timed,{dayTableModel:o,dateProfile:s,axis:g,slotDuration:e.slotDuration,slatMetas:u,forPrint:i.forPrint,tableColGroupNode:P.tableColGroupNode,tableMinWidth:P.tableMinWidth,clientWidth:P.clientWidth,clientHeight:P.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:P.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return b?this.renderHScrollLayout(w,A,C,o.colCnt,h,u,this.state.slatCoords):this.renderSimpleLayout(w,A,C)}}function zx(n,e){let t=new Py(n.renderRange,e);return new Ny(t,!1)}var Wx='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';Pd(Wx);const qx={allDaySlot:Boolean};var $x=or({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:qx,views:{timeGrid:{component:jx,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});nh.touchMouseIgnoreWait=500;let Mu=0,Al=0,Ou=!1;class h_{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=t=>{if(!this.shouldIgnoreMouse()&&Gx(t)&&this.tryStart(t)){let r=this.createEventFromMouse(t,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=t=>{let r=this.createEventFromMouse(t);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleMouseUp=t=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(t)),this.cleanup()},this.handleTouchStart=t=>{if(this.tryStart(t)){this.isTouchDragging=!0;let r=this.createEventFromTouch(t,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r);let i=t.target;this.shouldIgnoreMove||i.addEventListener("touchmove",this.handleTouchMove),i.addEventListener("touchend",this.handleTouchEnd),i.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=t=>{let r=this.createEventFromTouch(t);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleTouchEnd=t=>{if(this.isDragging){let r=t.target;r.removeEventListener("touchmove",this.handleTouchMove),r.removeEventListener("touchend",this.handleTouchEnd),r.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(t)),this.cleanup(),this.isTouchDragging=!1,Qx()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=t=>{if(!this.shouldIgnoreMove){let r=window.scrollX-this.prevScrollX+this.prevPageX,i=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:t,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:r,pageY:i,deltaX:r-this.origPageX,deltaY:i-this.origPageY})}},this.containerEl=e,this.emitter=new Xl,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),Yx()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),Kx()}tryStart(e){let t=this.querySubjectEl(e),r=e.target;return t&&(!this.handleSelector||Tt(r,this.handleSelector))?(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){Ou=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?Tt(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return Mu||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(Ou=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,t){let r=0,i=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(r=e.pageX-this.origPageX,i=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:r,deltaY:i}}createEventFromTouch(e,t){let r=e.touches,i,s,o=0,l=0;return r&&r.length?(i=r[0].pageX,s=r[0].pageY):(i=e.pageX,s=e.pageY),t?(this.origPageX=i,this.origPageY=s):(o=i-this.origPageX,l=s-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:i,pageY:s,deltaX:o,deltaY:l}}}function Gx(n){return n.button===0&&!n.ctrlKey}function Qx(){Mu+=1,setTimeout(()=>{Mu-=1},nh.touchMouseIgnoreWait)}function Yx(){Al+=1,Al===1&&window.addEventListener("touchmove",f_,{passive:!1})}function Kx(){Al-=1,Al||window.removeEventListener("touchmove",f_,{passive:!1})}function f_(n){Ou&&n.preventDefault()}class Xx{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,t,r){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.scrollX,this.origScreenY=r-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,t){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=t-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,t){let r=()=>{this.cleanup(),t()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(r,this.revertDuration):setTimeout(r,0)}doRevertAnimation(e,t){let r=this.mirrorEl,i=this.sourceEl.getBoundingClientRect();r.style.transition="top "+t+"ms,left "+t+"ms",uo(r,{left:i.left,top:i.top}),pC(r,()=>{r.style.transition="",e()})}cleanup(){this.mirrorEl&&(Md(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&uo(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,t=this.mirrorEl;return t||(t=this.mirrorEl=this.sourceEl.cloneNode(!0),t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.pointerEvents="none",t.classList.add("fc-event-dragging"),uo(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t}}class p_ extends eh{constructor(e,t){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=t,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class g_ extends p_{constructor(e,t){super(new LR(e),t)}getEventTarget(){return this.scrollController.el}computeClientRect(){return OR(this.scrollController.el)}}class Jx extends p_{constructor(e){super(new FR,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const Gp=typeof performance=="function"?performance.now:Date.now;class Zx{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let t=Gp();this.handleSide(e,(t-this.msSinceRequest)/1e3),this.requestAnimation(t)}else this.isAnimating=!1}}}start(e,t,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))}handleMove(e,t){if(this.isEnabled){let r=e-window.scrollX,i=t-window.scrollY,s=this.pointerScreenY===null?0:i-this.pointerScreenY,o=this.pointerScreenX===null?0:r-this.pointerScreenX;s<0?this.everMovedUp=!0:s>0&&(this.everMovedDown=!0),o<0?this.everMovedLeft=!0:o>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=i,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(Gp()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,t){let{scrollCache:r}=e,{edgeThreshold:i}=this,s=i-e.distance,o=s*s/(i*i)*this.maxVelocity*t,l=1;switch(e.name){case"left":l=-1;case"right":r.setScrollLeft(r.getScrollLeft()+o*l);break;case"top":l=-1;case"bottom":r.setScrollTop(r.getScrollTop()+o*l);break}}computeBestEdge(e,t){let{edgeThreshold:r}=this,i=null,s=this.scrollCaches||[];for(let o of s){let l=o.clientRect,u=e-l.left,h=l.right-e,g=t-l.top,b=l.bottom-t;u>=0&&h>=0&&g>=0&&b>=0&&(g<=r&&this.everMovedUp&&o.canScrollUp()&&(!i||i.distance>g)&&(i={scrollCache:o,name:"top",distance:g}),b<=r&&this.everMovedDown&&o.canScrollDown()&&(!i||i.distance>b)&&(i={scrollCache:o,name:"bottom",distance:b}),u<=r&&this.everMovedLeft&&o.canScrollLeft()&&(!i||i.distance>u)&&(i={scrollCache:o,name:"left",distance:u}),h<=r&&this.everMovedRight&&o.canScrollRight()&&(!i||i.distance>h)&&(i={scrollCache:o,name:"right",distance:h}))}return i}buildCaches(e){return this.queryScrollEls(e).map(t=>t===window?new Jx(!1):new g_(t,!1))}queryScrollEls(e){let t=[];for(let r of this.scrollQuery)typeof r=="object"?t.push(r):t.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(r)));return t}}class Bo extends HR{constructor(e,t){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=i=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,gC(document.body),vC(document.body),i.isTouch||i.origEvent.preventDefault(),this.emitter.trigger("pointerdown",i),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(i.subjectEl,i.pageX,i.pageY),this.startDelay(i),this.minDistance||this.handleDistanceSurpassed(i)))},this.onPointerMove=i=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",i),!this.isDistanceSurpassed){let s=this.minDistance,o,{deltaX:l,deltaY:u}=i;o=l*l+u*u,o>=s*s&&this.handleDistanceSurpassed(i)}this.isDragging&&(i.origEvent.type!=="scroll"&&(this.mirror.handleMove(i.pageX,i.pageY),this.autoScroller.handleMove(i.pageX,i.pageY)),this.emitter.trigger("dragmove",i))}},this.onPointerUp=i=>{this.isInteracting&&(this.isInteracting=!1,mC(document.body),yC(document.body),this.emitter.trigger("pointerup",i),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(i)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let r=this.pointer=new h_(e);r.emitter.on("pointerdown",this.onPointerDown),r.emitter.on("pointermove",this.onPointerMove),r.emitter.on("pointerup",this.onPointerUp),t&&(r.selector=t),this.mirror=new Xx,this.autoScroller=new Zx}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class eP{constructor(e){this.el=e,this.origRect=Zd(e),this.scrollCaches=Cy(e).map(t=>new g_(t,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let t of this.scrollCaches)e+=t.origScrollLeft-t.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let t of this.scrollCaches)e+=t.origScrollTop-t.getScrollTop();return e}isWithinClipping(e,t){let r={left:e,top:t};for(let i of this.scrollCaches)if(!tP(i.getEventTarget())&&!wR(r,i.clientRect))return!1;return!0}}function tP(n){let e=n.tagName;return e==="HTML"||e==="BODY"}class Jl{constructor(e,t){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=r=>{let{dragging:i}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(r),this.initialHit||!this.requireInitial?(i.setIgnoreMove(!1),this.emitter.trigger("pointerdown",r)):i.setIgnoreMove(!0)},this.handleDragStart=r=>{this.emitter.trigger("dragstart",r),this.handleMove(r,!0)},this.handleDragMove=r=>{this.emitter.trigger("dragmove",r),this.handleMove(r)},this.handlePointerUp=r=>{this.releaseHits(),this.emitter.trigger("pointerup",r)},this.handleDragEnd=r=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,r),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",r)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new Xl}processFirstCoord(e){let t={left:e.pageX,top:e.pageY},r=t,i=e.subjectEl,s;i instanceof HTMLElement&&(s=Zd(i),r=TR(r,s));let o=this.initialHit=this.queryHitForOffset(r.left,r.top);if(o){if(this.useSubjectCenter&&s){let l=Ay(s,o.rect);l&&(r=AR(l))}this.coordAdjust=SR(r,t)}else this.coordAdjust={left:0,top:0}}handleMove(e,t){let r=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(t||!Zl(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,e))}prepareHits(){this.offsetTrackers=tr(this.droppableStore,e=>(e.component.prepareHits(),new eP(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let t in e)e[t].destroy();this.offsetTrackers={}}queryHitForOffset(e,t){let{droppableStore:r,offsetTrackers:i}=this,s=null;for(let o in r){let l=r[o].component,u=i[o];if(u&&u.isWithinClipping(e,t)){let h=u.computeLeft(),g=u.computeTop(),b=e-h,w=t-g,{origRect:A}=u,C=A.right-A.left,P=A.bottom-A.top;if(b>=0&&b<C&&w>=0&&w<P){let O=l.queryHit(b,w,C,P);O&&Yl(O.dateProfile.activeRange,O.dateSpan.range)&&(this.disablePointCheck||u.el.contains(u.el.getRootNode().elementFromPoint(b+h-window.scrollX,w+g-window.scrollY)))&&(!s||O.layer>s.layer)&&(O.componentId=o,O.context=l.context,O.rect.left+=h,O.rect.right+=h,O.rect.top+=g,O.rect.bottom+=g,s=O)}}}return s}}function Zl(n,e){return!n&&!e?!0:!!n!=!!e?!1:dR(n.dateSpan,e.dateSpan)}function m_(n,e){let t={};for(let r of e.pluginHooks.datePointTransforms)Object.assign(t,r(n,e));return Object.assign(t,nP(n,e.dateEnv)),t}function nP(n,e){return{date:e.toDate(n.range.start),dateStr:e.formatIso(n.range.start,{omitTime:n.allDay}),allDay:n.allDay}}class rP extends ks{constructor(e){super(e),this.handlePointerDown=r=>{let{dragging:i}=this,s=r.origEvent.target;i.setIgnoreMove(!this.component.isValidDateDownEl(s))},this.handleDragEnd=r=>{let{component:i}=this,{pointer:s}=this.dragging;if(!s.wasTouchScroll){let{initialHit:o,finalHit:l}=this.hitDragging;if(o&&l&&Zl(o,l)){let{context:u}=i,h=Object.assign(Object.assign({},m_(o.dateSpan,u)),{dayEl:o.dayEl,jsEvent:r.origEvent,view:u.viewApi||u.calendarApi.view});u.emitter.trigger("dateClick",h)}}},this.dragging=new Bo(e.el),this.dragging.autoScroller.isEnabled=!1;let t=this.hitDragging=new Jl(this.dragging,Xd(e));t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class iP extends ks{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=o=>{let{component:l,dragging:u}=this,{options:h}=l.context,g=h.selectable&&l.isValidDateDownEl(o.origEvent.target);u.setIgnoreMove(!g),u.delay=o.isTouch?sP(l):null},this.handleDragStart=o=>{this.component.context.calendarApi.unselect(o)},this.handleHitUpdate=(o,l)=>{let{context:u}=this.component,h=null,g=!1;if(o){let b=this.hitDragging.initialHit;o.componentId===b.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(b,o)||(h=oP(b,o,u.pluginHooks.dateSelectionTransformers)),(!h||!GR(h,o.dateProfile,u))&&(g=!0,h=null)}h?u.dispatch({type:"SELECT_DATES",selection:h}):l||u.dispatch({type:"UNSELECT_DATES"}),g?Od():Vd(),l||(this.dragSelection=h)},this.handlePointerUp=o=>{this.dragSelection&&(py(this.dragSelection,o,this.component.context),this.dragSelection=null)};let{component:t}=e,{options:r}=t.context,i=this.dragging=new Bo(e.el);i.touchScrollAllowed=!1,i.minDistance=r.selectMinDistance||0,i.autoScroller.isEnabled=r.dragScroll;let s=this.hitDragging=new Jl(this.dragging,Xd(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function sP(n){let{options:e}=n.context,t=e.selectLongPressDelay;return t==null&&(t=e.longPressDelay),t}function oP(n,e,t){let r=n.dateSpan,i=e.dateSpan,s=[r.range.start,r.range.end,i.range.start,i.range.end];s.sort(TC);let o={};for(let l of t){let u=l(n,e);if(u===!1)return null;u&&Object.assign(o,u)}return o.range={start:s[0],end:s[3]},o.allDay=r.allDay,o}class Ho extends ks{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=o=>{let l=o.origEvent.target,{component:u,dragging:h}=this,{mirror:g}=h,{options:b}=u.context,w=u.context;this.subjectEl=o.subjectEl;let A=this.subjectSeg=_s(o.subjectEl),P=(this.eventRange=A.eventRange).instance.instanceId;this.relevantEvents=Gd(w.getCurrentData().eventStore,P),h.minDistance=o.isTouch?0:b.eventDragMinDistance,h.delay=o.isTouch&&P!==u.props.eventSelection?lP(u):null,b.fixedMirrorParent?g.parentNode=b.fixedMirrorParent:g.parentNode=Tt(l,".fc"),g.revertDuration=b.dragRevertDuration;let O=u.isValidSegDownEl(l)&&!Tt(l,".fc-event-resizer");h.setIgnoreMove(!O),this.isDragging=O&&o.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=o=>{let l=this.component.context,u=this.eventRange,h=u.instance.instanceId;o.isTouch?h!==this.component.props.eventSelection&&l.dispatch({type:"SELECT_EVENT",eventInstanceId:h}):l.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(l.calendarApi.unselect(o),l.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Ke(l,u.def,u.instance),jsEvent:o.origEvent,view:l.viewApi}))},this.handleHitUpdate=(o,l)=>{if(!this.isDragging)return;let u=this.relevantEvents,h=this.hitDragging.initialHit,g=this.component.context,b=null,w=null,A=null,C=!1,P={affectedEvents:u,mutatedEvents:qt(),isEvent:!0};if(o){b=o.context;let O=b.options;g===b||O.editable&&O.droppable?(w=aP(h,o,this.eventRange.instance.range.start,b.getCurrentData().pluginHooks.eventDragMutationMassagers),w&&(A=Kd(u,b.getCurrentData().eventUiBases,w,b),P.mutatedEvents=A,Oy(P,o.dateProfile,b)||(C=!0,w=null,A=null,P.mutatedEvents=qt()))):b=null}this.displayDrag(b,P),C?Od():Vd(),l||(g===b&&Zl(h,o)&&(w=null),this.dragging.setMirrorNeedsRevert(!w),this.dragging.setMirrorIsVisible(!o||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=b,this.validMutation=w,this.mutatedRelevantEvents=A)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=o=>{if(this.isDragging){let l=this.component.context,u=l.viewApi,{receivingContext:h,validMutation:g}=this,b=this.eventRange.def,w=this.eventRange.instance,A=new Ke(l,b,w),C=this.relevantEvents,P=this.mutatedRelevantEvents,{finalHit:O}=this.hitDragging;if(this.clearDrag(),l.emitter.trigger("eventDragStop",{el:this.subjectEl,event:A,jsEvent:o.origEvent,view:u}),g){if(h===l){let U=new Ke(l,P.defs[b.defId],w?P.instances[w.instanceId]:null);l.dispatch({type:"MERGE_EVENTS",eventStore:P});let X={oldEvent:A,event:U,relatedEvents:ai(P,l,w),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:C})}},te={};for(let ie of l.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(te,ie(g,l));l.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},X),te),{el:o.subjectEl,delta:g.datesDelta,jsEvent:o.origEvent,view:u})),l.emitter.trigger("eventChange",X)}else if(h){let U={event:A,relatedEvents:ai(C,l,w),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:C})}};l.emitter.trigger("eventLeave",Object.assign(Object.assign({},U),{draggedEl:o.subjectEl,view:u})),l.dispatch({type:"REMOVE_EVENTS",eventStore:C}),l.emitter.trigger("eventRemove",U);let X=P.defs[b.defId],te=P.instances[w.instanceId],ie=new Ke(h,X,te);h.dispatch({type:"MERGE_EVENTS",eventStore:P});let Se={event:ie,relatedEvents:ai(P,h,te),revert(){h.dispatch({type:"REMOVE_EVENTS",eventStore:P})}};h.emitter.trigger("eventAdd",Se),o.isTouch&&h.dispatch({type:"SELECT_EVENT",eventInstanceId:w.instanceId}),h.emitter.trigger("drop",Object.assign(Object.assign({},m_(O.dateSpan,h)),{draggedEl:o.subjectEl,jsEvent:o.origEvent,view:O.context.viewApi})),h.emitter.trigger("eventReceive",Object.assign(Object.assign({},Se),{draggedEl:o.subjectEl,view:O.context.viewApi}))}}else l.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:t}=this,{options:r}=t.context,i=this.dragging=new Bo(e.el);i.pointer.selector=Ho.SELECTOR,i.touchScrollAllowed=!1,i.autoScroller.isEnabled=r.dragScroll;let s=this.hitDragging=new Jl(this.dragging,Du);s.useSubjectCenter=e.useEventCenter,s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,t){let r=this.component.context,i=this.receivingContext;i&&i!==e&&(i===r?i.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:t.affectedEvents,mutatedEvents:qt(),isEvent:!0}}):i.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})}clearDrag(){let e=this.component.context,{receivingContext:t}=this;t&&t.dispatch({type:"UNSET_EVENT_DRAG"}),e!==t&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}Ho.SELECTOR=".fc-event-draggable, .fc-event-resizable";function aP(n,e,t,r){let i=n.dateSpan,s=e.dateSpan,o=i.range.start,l=s.range.start,u={};i.allDay!==s.allDay&&(u.allDay=s.allDay,u.hasEnd=e.context.options.allDayMaintainDuration,s.allDay?o=$e(t):o=t);let h=ts(o,l,n.context.dateEnv,n.componentId===e.componentId?n.largeUnit:null);h.milliseconds&&(u.allDay=!1);let g={datesDelta:h,standardProps:u};for(let b of r)b(g,n,e);return g}function lP(n){let{options:e}=n.context,t=e.eventLongPressDelay;return t==null&&(t=e.longPressDelay),t}class cP extends ks{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=s=>{let{component:o}=this,l=this.querySegEl(s),u=_s(l),h=this.eventRange=u.eventRange;this.dragging.minDistance=o.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(s.origEvent.target)||s.isTouch&&this.component.props.eventSelection!==h.instance.instanceId)},this.handleDragStart=s=>{let{context:o}=this.component,l=this.eventRange;this.relevantEvents=Gd(o.getCurrentData().eventStore,this.eventRange.instance.instanceId);let u=this.querySegEl(s);this.draggingSegEl=u,this.draggingSeg=_s(u),o.calendarApi.unselect(),o.emitter.trigger("eventResizeStart",{el:u,event:new Ke(o,l.def,l.instance),jsEvent:s.origEvent,view:o.viewApi})},this.handleHitUpdate=(s,o,l)=>{let{context:u}=this.component,h=this.relevantEvents,g=this.hitDragging.initialHit,b=this.eventRange.instance,w=null,A=null,C=!1,P={affectedEvents:h,mutatedEvents:qt(),isEvent:!0};s&&(s.componentId===g.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(g,s)||(w=uP(g,s,l.subjectEl.classList.contains("fc-event-resizer-start"),b.range))),w&&(A=Kd(h,u.getCurrentData().eventUiBases,w,u),P.mutatedEvents=A,Oy(P,s.dateProfile,u)||(C=!0,w=null,A=null,P.mutatedEvents=null)),A?u.dispatch({type:"SET_EVENT_RESIZE",state:P}):u.dispatch({type:"UNSET_EVENT_RESIZE"}),C?Od():Vd(),o||(w&&Zl(g,s)&&(w=null),this.validMutation=w,this.mutatedRelevantEvents=A)},this.handleDragEnd=s=>{let{context:o}=this.component,l=this.eventRange.def,u=this.eventRange.instance,h=new Ke(o,l,u),g=this.relevantEvents,b=this.mutatedRelevantEvents;if(o.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:h,jsEvent:s.origEvent,view:o.viewApi}),this.validMutation){let w=new Ke(o,b.defs[l.defId],u?b.instances[u.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:b});let A={oldEvent:h,event:w,relatedEvents:ai(b,o,u),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:g})}};o.emitter.trigger("eventResize",Object.assign(Object.assign({},A),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Ve(0),endDelta:this.validMutation.endDelta||Ve(0),jsEvent:s.origEvent,view:o.viewApi})),o.emitter.trigger("eventChange",A)}else o.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:t}=e,r=this.dragging=new Bo(e.el);r.pointer.selector=".fc-event-resizer",r.touchScrollAllowed=!1,r.autoScroller.isEnabled=t.context.options.dragScroll;let i=this.hitDragging=new Jl(this.dragging,Xd(e));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return Tt(e.subjectEl,".fc-event")}}function uP(n,e,t,r){let i=n.context.dateEnv,s=n.dateSpan.range.start,o=e.dateSpan.range.start,l=ts(s,o,i,n.largeUnit);if(t){if(i.add(r.start,l)<r.end)return{startDelta:l}}else if(i.add(r.end,l)>r.start)return{endDelta:l};return null}class dP{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=r=>{r.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=r=>{let i=this.context.options.unselectCancel,s=qv(r.origEvent);this.matchesCancel=!!Tt(s,i),this.matchesEvent=!!Tt(s,Ho.SELECTOR)},this.onDocumentPointerUp=r=>{let{context:i}=this,{documentPointer:s}=this,o=i.getCurrentData();if(!s.wasTouchScroll){if(o.dateSelection&&!this.isRecentPointerDateSelect){let l=i.options.unselectAuto;l&&(!l||!this.matchesCancel)&&i.calendarApi.unselect(r)}o.eventSelection&&!this.matchesEvent&&i.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let t=this.documentPointer=new h_(document);t.shouldIgnoreMove=!0,t.shouldWatchScroll=!1,t.emitter.on("pointerdown",this.onDocumentPointerDown),t.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const hP={fixedMirrorParent:G},fP={dateClick:G,eventDragStart:G,eventDragStop:G,eventDrop:G,eventResizeStart:G,eventResizeStop:G,eventResize:G,drop:G,eventReceive:G,eventLeave:G};nh.dataAttrPrefix="";var pP=or({name:"@fullcalendar/interaction",componentInteractions:[rP,iP,Ho,cP],calendarInteractions:[dP],elementDraggingImpl:Bo,optionRefiners:hP,listenerRefiners:fP});(()=>{const n=[["Cielo","#0EBEFF"],["Dulce","#FF5C69"],["Paz","#29C72E"],["Mora","#7000FF"],["Futuro","#21273B"]],e=i=>{const[s,o]=ve(i).data("tema").split("|");ve("html").attr("data-theme",s),ve('meta[name="theme-color"]').length?ve('meta[name="theme-color"]').attr("content",o):ve("<meta>",{name:"theme-color",content:o}).appendTo("head"),uh("witema",`${s}|${o}`,720),ve(".mtha").removeClass("mtha"),ve(i).addClass("mtha")};ve(".witemas").html(n.map(([i,s])=>`<div class="tema" data-tema="${i}|${s}" style="background:${s}"></div>`).join(""));const t=bs("witema"),r=ve(`[data-tema="${t}"]`)[0]||ve(".mtha")[0]||ve("[data-tema]").first()[0];return r&&e(r),ve(document).on("click","[data-tema]",i=>e(i.currentTarget)),{set:e}})();const UP=(n,e)=>{ve(n).addClass(e).siblings().removeClass(e)},BP=(n,e)=>{ve(n).addClass("updating").text(e),setTimeout(()=>ve(n).removeClass("updating"),500)},HP=n=>{ve("#loading-style").length||ve("head").append('<style id="loading-style">.loading{height:1vh;background:linear-gradient(to right,#fdd835,#43a047,#fdd835);background-size:200% 100%;animation:l 1.5s infinite;border-radius:3px;width:100%;position:fixed;top:0;left:0;z-index:9999}@keyframes l{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}</style>'),ve(".loading").length||ve("body").append('<div class="loading" style="display:none"></div>'),ve(".loading").toggle(!!n)},jP=n=>{window.location.href={smiletop:"/smiletop.html"}[n]||"/smile.html"};function zP(n,e="error",t=3e3){const r={success:"fa-check-circle",error:"fa-times-circle",warning:"fa-exclamation-triangle",info:"fa-info-circle"},i={success:"#2E7D32",error:"#D32F2F",warning:"#F9A825",info:"#0288D1"};ve("#notificationsContainer").length||ve("body").append('<div id="notificationsContainer" style="position:fixed;top:1rem;right:1rem;z-index:9999;display:flex;flex-direction:column;gap:.5rem;"></div>');const s=ve(`
    <div class="notification" style="background:#fff;border-left:4px solid ${i[e]};box-shadow:0 4px 12px rgba(0,0,0,.1);border-radius:8px;padding:1rem;display:flex;align-items:center;gap:.5rem;opacity:0;transform:translateX(20px);transition:all .3s ease;">
      <i class="fas ${r[e]}" style="color:${i[e]};"></i>
      <span style="flex:1">${n}</span>
      <button style="background:none;border:none;font-size:1.2rem;cursor:pointer;">&times;</button>
    </div>
  `);ve("#notificationsContainer").append(s),requestAnimationFrame(()=>s.css({opacity:1,transform:"translateX(0)"})),s.find("button").on("click",()=>{s.css({opacity:0,transform:"translateX(20px)"}),setTimeout(()=>s.remove(),300)}),setTimeout(()=>{s.css({opacity:0,transform:"translateX(20px)"}),setTimeout(()=>s.remove(),300)},t)}const WP=n=>{const[e,t,r]=n.split("-").map(Number);return new Date(e,t-1,r)},qP=(n,e="success")=>{ve(".alert-box").remove();const t={error:{bg:"#FFE8E6",txt:"#D32F2F",border:"#FFCDD2",icon:"fa-circle-exclamation"},success:{bg:"#E8F5E9",txt:"#2E7D32",border:"#C8E6C9",icon:"fa-circle-check"}},{bg:r,txt:i,border:s,icon:o}=t[e]||t.error,l=ve(`
        <div class="alert-box" style="
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 20px;
            border-radius: 8px;
            background: ${r};
            color: ${i};
            border-left: 4px solid ${s};
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 300px;
            max-width: 90%;
        ">
            <i class="fas ${o}"></i>
            <span>${n}</span>
        </div>
    `).appendTo("body").hide().fadeIn(300);setTimeout(()=>l.fadeOut(300,()=>l.remove()),3e3)};function $P(n){return!n||n.length!==2?null:`https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/${n.toLowerCase()}.svg`}function uh(n,e,t){try{localStorage.setItem(n,JSON.stringify({value:e,expiry:Date.now()+t*36e5,type:typeof e,isArray:Array.isArray(e)}))}catch(r){console.error("Error savels",r)}}function bs(n){try{const e=localStorage.getItem(n);if(!e)return null;const t=JSON.parse(e);return!t||Date.now()>t.expiry?(localStorage.removeItem(n),null):t.value}catch(e){return console.error("Error getls:",e),gP(n),null}}function gP(...n){n.forEach(e=>{e&&typeof e=="string"&&localStorage.removeItem(e)})}ve(`<style>
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.5);z-index:100;justify-content:center;align-items:center;animation:fadeInModal 0.3s ease;}
.modal.active{display:flex;}
@keyframes fadeInModal{from{opacity:0;}to{opacity:1;}}
.modal-content{background-color:#fff;border-radius:var(--border-radius);box-shadow:var(--shadow);width:90%;max-width:600px;max-height:90vh;overflow-y:auto;animation:slideInModal 0.3s ease;border-radius:1vh}
@keyframes slideInModal{from{transform:translateY(-30px);opacity:0;}to{transform:translateY(0);opacity:1;}}
.modal-header{padding:20px;border-bottom:1px solid #e0e0e0;display:flex;justify-content:space-between;align-items:center;}
.modal-title{color:var(--navy-blue);font-size:1.2rem;font-weight:600;}
.close-modal{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#777;transition:color 0.2s;}
.close-modal:hover{color:var(--navy-blue);}
.modal-body{padding:20px;}
.modal-footer{padding:15px 20px;border-top:1px solid #e0e0e0;display:flex;justify-content:flex-end;gap:10px;}
</style>`).appendTo("head");const GP=n=>{ve(`#${n}`).addClass("active"),ve("body").addClass("modal-open")},QP=n=>{ve(`#${n}`).removeClass("active"),ve("body").removeClass("modal-open")},Gc=()=>{ve(".modal").removeClass("active"),ve("body").removeClass("modal-open")},mP=()=>{ve(document).on("click",".close-modal",()=>Gc()),ve(document).on("click",".modal",n=>{ve(n.target).hasClass("modal")&&Gc()}),ve(document).on("keydown",n=>{n.key==="Escape"&&Gc()})};mP();function vP(n,e,t="top",r=1800){const i={success:"--success",error:"--error",warning:"--warning",info:"--info"},s=i[t]?t:null,o=s?"top":t;if(ve("#witip-styles").length||ve('<style id="witip-styles">.witip{position:fixed;background:var(--mco);color:var(--txa);z-index:10000;padding:8px 12px;border-radius:4px;font-size:.85rem;max-width:250px;box-shadow:0 2px 8px rgba(0,0,0,.2);opacity:0;transition:opacity .2s;pointer-events:none}.witip::after{content:"";position:absolute;border:6px solid transparent}.witip.show{opacity:1}.witip.top::after{top:100%;left:50%;margin-left:-6px;border-top-color:inherit}.witip.bottom::after{bottom:100%;left:50%;margin-left:-6px;border-bottom-color:inherit}.witip.left::after{left:100%;top:50%;margin-top:-6px;border-left-color:inherit}.witip.right::after{right:100%;top:50%;margin-top:-6px;border-right-color:inherit}.witip.success{background:var(--success);color:#fff}.witip.error{background:var(--error);color:#fff}.witip.warning{background:var(--warning);color:#000}.witip.info{background:var(--info);color:#fff}</style>').appendTo("head"),typeof n=="string"&&(n.includes(",")||n.match(/^[.#a-z]/i)))return ve(n).each((Se,de)=>vP(de,e,t,r)),ve(n);const l=ve(n);if(!l.length)return;clearTimeout(l.data("witip-timer")),ve(".witip").remove();const u=l.attr("id")||l.attr("id",`wtip-${Date.now()}-${Math.floor(Math.random()*1e3)}`).attr("id"),h=ve("<div>",{class:`witip ${o} ${s||""}`,"data-for":u,text:e,css:{"border-color":s?`var(${i[s]})`:"var(--mco)"}});s&&h.css("background-color",`var(${i[s]})`),ve("body").append(h);const{left:g,top:b,right:w,bottom:A,width:C,height:P}=l[0].getBoundingClientRect(),O=h.outerWidth(),U=h.outerHeight(),X={top:{x:g+C/2-O/2,y:b-U-8},bottom:{x:g+C/2-O/2,y:A+8},left:{x:g-O-8,y:b+P/2-U/2},right:{x:w+8,y:b+P/2-U/2}};let{x:te,y:ie}=X[o];return te=Math.max(8,Math.min(te,window.innerWidth-O-8)),ie=Math.max(8,Math.min(ie,window.innerHeight-U-8)),h.css({left:te,top:ie}),l.data("witip-timer",setTimeout(()=>{h.addClass("show"),r>0&&setTimeout(()=>{h.removeClass("show"),setTimeout(()=>h.remove(),200)},r)},10)),l}const YP=n=>{const e=new Date,t=new Date(n);if(t>e)return-1;let r=e.getFullYear()-t.getFullYear();const i=e.getMonth(),s=e.getDate(),o=t.getMonth(),l=t.getDate();return(i<o||i===o&&s<l)&&r--,r};function yP(){ve("#modal-styles").length===0&&ve("head").append(`
<style id="modal-styles">
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.modal-container {
  background: var(--wb);
  border-radius: var(--border-radius-lg);
  box-shadow: var(--box-shadow-lg);
  border: 1px solid var(--bdr);
  overflow: hidden;
  width: 90%;
  max-width: 500px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  transform: translateY(20px);
  transition: transform 0.3s ease;
}

.modal-container.small {
  max-width: 400px;
}

.modal-container.large {
  max-width: 700px;
}

.modal-container.full {
  max-width: 90%;
  height: 90%;
}

.modal-header {
  padding: 15px 20px;
  border-bottom: 1px solid var(--bdr);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.modal-header h3 {
  margin: 0;
  font-size: var(--fz_l1);
  color: var(--txh);
}

.modal-close {
  background: none;
  border: none;
  font-size: 24px;
  cursor: pointer;
  color: var(--tx);
  padding: 0;
  margin: 0;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.2s ease;
}

.modal-close:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--mco);
}

.modal-content {
  padding: 20px;
  overflow-y: auto;
  flex: 1;
  color: var(--tx);
}

.modal-footer {
  padding: 15px 20px;
  border-top: 1px solid var(--bdr);
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 10px;
}

@media (max-width: 768px) {
  .modal-container {
      width: 95%;
  }
}
</style>
`)}yP();const KP=n=>{const e=bs("wiip");return e?n==="miciudad"?`${e.region}, ${e.country}`:e[n]:ve.getJSON("https://ipinfo.io/json?token=3868948e170a74",t=>{var l,u;const r=navigator.userAgent,[i,s]=(t.loc||"0,0").split(",").map(Number),o={ip:t.ip,city:t.city,region:t.region,country:t.country,postal:t.postal,lat:i,lng:s,browser:/Edg/i.test(r)?"Edge":/Chrome/i.test(r)?"Chrome":/Firefox/i.test(r)?"Firefox":/Safari/i.test(r)&&!/Chrome/i.test(r)?"Safari":/Opera|OPR/i.test(r)?"Opera":"Otro",os:/Windows/i.test(r)?"Windows":/Android/i.test(r)?"Android":/iPhone|iPad/i.test(r)?"iOS":/Mac/i.test(r)?"macOS":/Linux/i.test(r)?"Linux":"Otro",device:/Mobile|Android|iPhone|iPad/i.test(r)?"MÃ³vil":/Tablet|iPad/i.test(r)?"Tablet":"Escritorio",platform:navigator.platform,screen:`${screen.width}Ã${screen.height}`,viewport:`${outerWidth}Ã${outerHeight}`,resolution:`${screen.width}Ã${screen.height}`,language:navigator.language,languages:((l=navigator.languages)==null?void 0:l.join(", "))||navigator.language,charset:document.characterSet,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,localTime:new Date().toLocaleString("es-ES"),utcOffset:new Date().getTimezoneOffset()/-60,isDST:new Date().getTimezoneOffset()<new Date(new Date().getFullYear(),0,1).getTimezoneOffset(),cookieEnabled:navigator.cookieEnabled,javaEnabled:((u=navigator.javaEnabled)==null?void 0:u.call(navigator))||!1,onLine:navigator.onLine,userAgent:r};return uh("wiip",o,24),`${o.city}, ${o.country}`}).fail(()=>{const t=bs("wiip");return(t==null?void 0:t[n])||null})},XP=(n="default",e=".calendarioMain")=>{let t;const r={plugins:[ax,$x,pP],initialView:"dayGridMonth",locale:"es",headerToolbar:{left:"dayGridMonth,timeGridWeek",center:"title",right:"today prev,next"},buttonText:{today:"Hoy",month:"Mes",week:"Semana"},height:"auto",aspectRatio:1.5,...n==="interactivo"&&{editable:!0,selectable:!0,events:bs("cal-eventos")||[],select:s=>{const o=prompt("TÃ­tulo del evento:");if(o){const l={id:Date.now(),title:o,start:s.start,end:s.end,allDay:s.allDay};t.addEvent(l),i()}t.unselect()},eventClick:s=>{confirm(`Â¿Eliminar "${s.event.title}"?`)&&(s.event.remove(),i())},eventDrop:i,eventResize:i}};t=new Vk(ve(e)[0],r),t.render();const i=()=>{const s=t.getEvents().map(o=>({id:o.id,title:o.title,start:o.start,end:o.end,allDay:o.allDay}));uh("cal-eventos",s,8760)};return{obtener:()=>t,agregar:s=>{t.addEvent(s),i()},ir:s=>t.gotoDate(s),vista:s=>t.changeView(s)}},Qi={paisesSur:["PE","AR","CL","UY","PY","BO","EC","CO","VE","GY","SR","BR","AU","NZ","ZA"],estaciones:{n:["Invierno","Primavera","Verano","OtoÃ±o"],s:["Verano","OtoÃ±o","Invierno","Primavera"]},fases:["Luna nueva","Luna creciente","Cuarto creciente","Luna gibosa creciente","Luna llena","Luna gibosa menguante","Cuarto menguante","Luna menguante"],unidades:{aÃ±os:"aÃ±o|aÃ±os",meses:"mes|meses",semanas:"semana|semanas",dÃ­as:"dÃ­a|dÃ­as",horas:"hora|horas",minutos:"minuto|minutos",segundos:"segundo|segundos"}},JP=(n=new Date)=>{const e=s=>{const o=new Date(s),[l,u,h]=[o.getFullYear(),o.getMonth(),o.getDate()],g=Math.ceil((o-new Date(l,0,1))/864e5),b=new Date(l,1,29).getDate()===29?366:365,w=bs("wiip"),A=w&&(Qi.paisesSur.includes(w.country)||w.lat<0);return{fecha:o,aÃ±o:l,mes:u,dia:h,hora:o.getHours(),minuto:o.getMinutes(),segundo:o.getSeconds(),mesReal:u+1,diaDelAÃ±o:g,diasEnAÃ±o:b,diasEnMes:new Date(l,u+1,0).getDate(),semana:Math.ceil(g/7),trimestre:Math.ceil((u+1)/3),bisiesto:l%4===0&&(l%100!==0||l%400===0),faseLunar:Qi.fases[Math.floor((o-new Date(2e3,0,6))/864e5%29.53/3.69)],estacion:(A?Qi.estaciones.s:Qi.estaciones.n)[Math.floor((u*30.44+h%365)/91.25)]}},t=(s,o,l="aÃ±os meses dÃ­as")=>{const[u,h]=[new Date(s),new Date(o)],[g,b]=h>u?[u,h]:[h,u];let w=b.getFullYear()-g.getFullYear(),A=b.getMonth()-g.getMonth(),C=b.getDate()-g.getDate();C<0&&(A--,C+=new Date(b.getFullYear(),b.getMonth(),0).getDate()),A<0&&(w--,A+=12);const P=Math.floor((b-g)/864e5),O={aÃ±os:w,meses:A,semanas:Math.floor(P/7),dÃ­as:C,horas:Math.floor((b-g)/36e5),minutos:Math.floor((b-g)/6e4),segundos:Math.floor((b-g)/1e3)};if(l==="completo")return O;const X=(l.includes(",")?l.split(",").map(te=>te.trim()):l.split(" ")).map(te=>{var Se;const ie=O[te.toLowerCase()];if(ie>0){const[de,f]=((Se=Qi.unidades[te.toLowerCase()])==null?void 0:Se.split("|"))||[te,te+"s"];return`${ie} ${ie===1?de:f}`}}).filter(Boolean);return X.length?X.join(" con "):"Mismo momento"},r=s=>{const o=e(s),l=o.fecha;return{...o,iso:l.toISOString().split("T")[0],isoCompleto:l.toISOString(),local:l.toLocaleString("es-ES"),utc:l.toISOString().replace("T"," ").slice(0,19),timestamp:Math.floor(l.getTime()/1e3),milisegundos:l.getTime(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,offsetUTC:l.getTimezoneOffset()/-60,gmt:`GMT${l.getTimezoneOffset()<=0?"+":"-"}${Math.abs(Math.floor(l.getTimezoneOffset()/60)).toString().padStart(2,"0")}:${Math.abs(l.getTimezoneOffset()%60).toString().padStart(2,"0")}`,duracionDia:`${12+Math.floor(Math.sin((o.diaDelAÃ±o-80)*Math.PI/182.5)*2)}h ${32+Math.floor(Math.cos((o.diaDelAÃ±o-80)*Math.PI/182.5)*28)}m`,fechaCompleta:l.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),horaCompleta:l.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),fechaCorta:l.toLocaleDateString("es-ES"),horaCorta:l.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),diaAÃ±o:`${o.diaDelAÃ±o}/${o.diasEnAÃ±o}`,diferencia:(u,h="aÃ±os meses dÃ­as")=>t(l,u,h),edad:u=>t(u,l,"aÃ±os"),esHoy:()=>l.toDateString()===new Date().toDateString(),esAyer:()=>l.toDateString()===new Date(Date.now()-864e5).toDateString(),esMaÃ±ana:()=>l.toDateString()===new Date(Date.now()+864e5).toDateString(),esIgual:u=>l.getTime()===new Date(u).getTime(),esMayorIgual:u=>l.getTime()>=new Date(u).getTime(),esMenorIgual:u=>l.getTime()<=new Date(u).getTime(),formato:u=>new Map([["dd/mm/yyyy",`${o.dia.toString().padStart(2,"0")}/${o.mesReal.toString().padStart(2,"0")}/${o.aÃ±o}`],["mm/dd/yyyy",`${o.mesReal.toString().padStart(2,"0")}/${o.dia.toString().padStart(2,"0")}/${o.aÃ±o}`],["yyyy-mm-dd",`${o.aÃ±o}-${o.mesReal.toString().padStart(2,"0")}-${o.dia.toString().padStart(2,"0")}`],["texto",l.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]]).get(u)||l.toLocaleDateString("es-ES")}},i=s=>!isNaN(new Date(s).getTime())&&s.includes("-");if(typeof n=="string"){if(i(n))return r(n);const s=e(new Date),o=s.fecha,l=bs("wiip");return{...Object.fromEntries(["hora","minuto","segundo","dia","aÃ±o","diaDelAÃ±o","diasEnAÃ±o","diasEnMes","semana","trimestre","bisiesto"].map(h=>[h,s[h]])),mes:s.mesReal,year:s.aÃ±o,luna:s.faseLunar,estacion:s.estacion,faseLunar:s.faseLunar,iso:o.toISOString().split("T")[0],local:o.toLocaleString("es-ES"),utc:o.toISOString().replace("T"," ").slice(0,19),timestamp:Math.floor(o.getTime()/1e3),milisegundos:o.getTime(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,gmt:`GMT${o.getTimezoneOffset()<=0?"+":"-"}${Math.abs(Math.floor(o.getTimezoneOffset()/60)).toString().padStart(2,"0")}:${Math.abs(o.getTimezoneOffset()%60).toString().padStart(2,"0")}`,duracionDia:`${12+Math.floor(Math.sin((s.diaDelAÃ±o-80)*Math.PI/182.5)*2)}h ${32+Math.floor(Math.cos((s.diaDelAÃ±o-80)*Math.PI/182.5)*28)}m`,diaAÃ±o:`${s.diaDelAÃ±o}/${s.diasEnAÃ±o}`,fechaCompleta:o.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),horaCompleta:o.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),fechaCorta:o.toLocaleDateString("es-ES"),horaCorta:o.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),pais:()=>(l==null?void 0:l.country)||"XX",ciudad:()=>(l==null?void 0:l.city)||"Desconocida",hemisferio:()=>l&&(Qi.paisesSur.includes(l.country)||l.lat<0)?"Sur":"Norte"}[n]??null}return r(n)},ZP=(n,e)=>{if(!n)return"Ahora";const t=Math.abs(new Date-new Date(n)),r=[[31536e6,"aÃ±o"],[2629746e3,"mes"],[6048e5,"sem"],[864e5,"dÃ­a"],[36e5,"h"],[6e4,"min"]];for(const[i,s]of r){const o=Math.floor(t/i);if(o>0)return new Date(n)<new Date?`Hace ${o}${s}`:`En ${o}${s}`}return"Ahora mismo"};export{ve as $,NP as A,VP as B,WP as C,bP as D,_P as E,YP as F,HP as G,MP as H,OP as I,qP as M,zP as N,JP as T,UP as a,BP as b,XP as c,$P as d,jP as e,ZP as f,bs as g,PP as h,kP as i,CP as j,FP as k,LP as l,SP as m,GP as n,AP as o,QP as p,DP as q,gP as r,uh as s,vP as t,xP as u,RP as v,KP as w,EP as x,TP as y,wP as z};
